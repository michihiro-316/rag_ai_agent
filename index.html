<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LangGraph å®Œå…¨å­¦ç¿’ã‚¬ã‚¤ãƒ‰</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-gradient-start: #667eea;
            --bg-gradient-end: #764ba2;
            --bg-card: rgba(255, 255, 255, 0.95);
            --accent-green: #10b981;
            --accent-emerald: #059669;
            --accent-teal: #14b8a6;
            --accent-cyan: #06b6d4;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-orange: #f97316;
            --accent-pink: #ec4899;
            --text-primary: #1f2937;
            --text-secondary: #4b5563;
            --text-muted: #6b7280;
            --border-color: #e5e7eb;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
            background-attachment: fixed;
            color: var(--text-primary);
            line-height: 1.8;
            min-height: 100vh;
        }
        .header {
            background: rgba(255, 255, 255, 0.9);
            border-bottom: 1px solid var(--border-color);
            padding: 1.5rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(20px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }
        .logo { display: flex; align-items: center; gap: 1rem; }
        .logo-icon {
            width: 48px; height: 48px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        .logo-text h1 {
            font-size: 1.5rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .logo-text span { font-size: 0.75rem; color: var(--text-secondary); letter-spacing: 0.1em; }
        .nav-tabs { display: flex; gap: 0.5rem; flex-wrap: wrap; }
        .nav-tab {
            padding: 0.75rem 1.5rem;
            background: #f3f4f6;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            font-family: inherit;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .nav-tab:hover { background: #e5e7eb; color: var(--text-primary); transform: translateY(-2px); }
        .nav-tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: transparent;
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transform: translateY(-2px);
        }
        .main { max-width: 1400px; margin: 0 auto; padding: 2rem; }
        .section { display: none; animation: fadeIn 0.4s ease; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .section-header { margin-bottom: 3rem; text-align: center; }
        .section-number {
            display: inline-block; width: 60px; height: 60px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%; line-height: 60px;
            font-size: 1.5rem; font-weight: 900; margin-bottom: 1rem;
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        .section-title {
            font-size: 2.5rem; font-weight: 900; margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .section-subtitle { color: var(--text-secondary); font-size: 1.125rem; }
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        }
        .card-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem; }
        .card-icon {
            width: 48px; height: 48px; border-radius: 12px;
            display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
        }
        .card-icon.green { background: rgba(34, 197, 94, 0.2); }
        .card-icon.emerald { background: rgba(16, 185, 129, 0.2); }
        .card-icon.blue { background: rgba(59, 130, 246, 0.2); }
        .card-icon.purple { background: rgba(139, 92, 246, 0.2); }
        .card-icon.orange { background: rgba(249, 115, 22, 0.2); }
        .card-title { font-size: 1.5rem; font-weight: 700; }
        .code-block {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 12px;
            margin: 1.5rem 0;
            overflow: hidden;
        }
        .code-header {
            background: #161b22;
            padding: 0.6rem 1rem;
            border-bottom: 1px solid #30363d;
            font-size: 0.75rem;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
        }
        .code-body { display: flex; }
        .line-nums {
            padding: 1rem 0;
            background: #0d1117;
            border-right: 1px solid #30363d;
            text-align: right;
            user-select: none;
            color: #484f58;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
        }
        .line-nums span { display: block; padding: 0 0.75rem; }
        .code-content {
            flex: 1;
            padding: 1rem 1.25rem;
            overflow-x: auto;
        }
        .code-content pre {
            margin: 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            color: #e6edf3;
            white-space: pre;
        }
        .cm { color: #8b949e; }
        .kw { color: #ff7b72; }
        .st { color: #a5d6ff; }
        .fn { color: #d2a8ff; }
        .cl { color: #79c0ff; }
        .bi { color: #ffa657; }
        .diagram-container {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            overflow-x: auto;
        }
        .diagram-title {
            text-align: center;
            font-size: 1.125rem;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 1.5rem;
        }
        .svg-diagram { width: 100%; max-width: 900px; margin: 0 auto; display: block; }
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; }
        .concept-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }
        .concept-icon { font-size: 3rem; margin-bottom: 1rem; }
        .concept-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; }
        .concept-desc { color: var(--text-secondary); font-size: 0.9rem; }
        .tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .tag.green { background: rgba(34, 197, 94, 0.2); color: var(--accent-green); }
        .tag.emerald { background: rgba(16, 185, 129, 0.2); color: var(--accent-emerald); }
        .tag.blue { background: rgba(59, 130, 246, 0.2); color: var(--accent-blue); }
        .tag.purple { background: rgba(139, 92, 246, 0.2); color: var(--accent-purple); }
        .tag.orange { background: rgba(249, 115, 22, 0.2); color: var(--accent-orange); }
        .highlight-box {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.05));
            border-left: 4px solid #667eea;
            border-radius: 0 12px 12px 0;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        .highlight-box.warning { border-left-color: var(--accent-orange); background: linear-gradient(135deg, rgba(249, 115, 22, 0.1), rgba(249, 115, 22, 0.05)); }
        .highlight-box.success { border-left-color: var(--accent-green); background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(16, 185, 129, 0.05)); }
        .highlight-title { font-weight: 700; color: #667eea; margin-bottom: 0.5rem; }
        table { width: 100%; border-collapse: collapse; font-size: 0.9rem; margin: 1rem 0; }
        th, td { padding: 1rem; text-align: left; border-bottom: 1px solid var(--border-color); }
        th { background: rgba(102, 126, 234, 0.1); font-weight: 600; color: #667eea; }
        code:not(pre code) {
            background: rgba(102, 126, 234, 0.15);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85em;
            color: #667eea;
        }
        .steps { display: flex; flex-direction: column; gap: 1.5rem; }
        .step { display: flex; gap: 1.5rem; align-items: flex-start; }
        .step-number {
            width: 40px; height: 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: 700; flex-shrink: 0;
            color: white;
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.3);
        }
        .step-title { font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; }
        @media (max-width: 768px) {
            .header-content { flex-direction: column; }
            .section-title { font-size: 1.75rem; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">ğŸ”—</div>
                <div class="logo-text">
                    <h1>LangGraph å®Œå…¨å­¦ç¿’ã‚¬ã‚¤ãƒ‰</h1>
                    <span>FOR AI AGENT DEVELOPMENT</span>
                </div>
            </div>
            <nav class="nav-tabs">
                <button class="nav-tab active" data-section="intro">æ¦‚è¦</button>
                <button class="nav-tab" data-section="basics">åŸºç¤æ¦‚å¿µ</button>
                <button class="nav-tab" data-section="minimal">æœ€å°æ§‹æˆ</button>
                <button class="nav-tab" data-section="branch">æ¡ä»¶åˆ†å²</button>
                <button class="nav-tab" data-section="state">Stateç®¡ç†</button>
                <button class="nav-tab" data-section="project">å®Ÿè·µ</button>
            </nav>
        </div>
    </header>

    <main class="main">
        <!-- æ¦‚è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section active" id="intro">
            <div class="section-header">
                <div class="section-number">1</div>
                <h2 class="section-title">LangGraphã¨ã¯ä½•ã‹</h2>
                <p class="section-subtitle">LangChainå­¦ç¿’æ¸ˆã¿ã®æ–¹å‘ã‘ã«è§£èª¬</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon orange">âš ï¸</div>
                    <h3 class="card-title">LangChainã®é™ç•Œ</h3>
                </div>
                <p>LangChainã®LCELã¯<strong>ç›´ç·šçš„ãªå‡¦ç†</strong>ã«å¼·ã„ã§ã™ï¼š</p>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span></div>
                        <div class="code-content">
<pre><span class="cm"># LCEL: ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ç¹‹ã</span>
chain = prompt | llm | output_parser
result = chain.invoke({<span class="st">"question"</span>: <span class="st">"..."</span>})</pre>
                        </div>
                    </div>
                </div>
                <p>ã—ã‹ã—ã€<strong>æ¡ä»¶åˆ†å²</strong>ã‚„<strong>è¤‡æ•°çµŒè·¯ã®åˆæµ</strong>ãŒå¿…è¦ãªå ´åˆã€LCELã ã‘ã§ã¯è¾›ããªã‚Šã¾ã™ã€‚</p>
            </div>

            <!-- ã‚°ãƒ©ãƒ•ç†è«–ã®å›³è§£ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">ğŸ¯</div>
                    <h3 class="card-title">ã‚°ãƒ©ãƒ•ç†è«–ã®åŸºæœ¬ï¼šé ‚ç‚¹ã¨è¾º</h3>
                </div>
                <div class="diagram-container">
                    <div class="diagram-title">LangGraphã¯ã‚°ãƒ©ãƒ•æ§‹é€ ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®šç¾©ã™ã‚‹</div>
                    <svg class="svg-diagram" viewBox="0 0 800 320">
                        <defs>
                            <marker id="arr1" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
                            </marker>
                        </defs>
                        <!-- å·¦å´ï¼šã‚°ãƒ©ãƒ•æ§‹é€  -->
                        <text x="180" y="30" text-anchor="middle" fill="#667eea" font-size="16" font-weight="700">ã‚°ãƒ©ãƒ•æ§‹é€ ã®åŸºæœ¬</text>
                        <circle cx="100" cy="120" r="40" fill="#667eea" fill-opacity="0.2" stroke="#667eea" stroke-width="3"/>
                        <text x="100" y="115" text-anchor="middle" fill="#1f2937" font-size="12" font-weight="600">é ‚ç‚¹</text>
                        <text x="100" y="130" text-anchor="middle" fill="#1f2937" font-size="12" font-weight="600">(Node)</text>
                        <circle cx="260" cy="120" r="40" fill="#10b981" fill-opacity="0.2" stroke="#10b981" stroke-width="3"/>
                        <text x="260" y="115" text-anchor="middle" fill="#1f2937" font-size="12" font-weight="600">é ‚ç‚¹</text>
                        <text x="260" y="130" text-anchor="middle" fill="#1f2937" font-size="12" font-weight="600">(Node)</text>
                        <circle cx="180" cy="240" r="40" fill="#ec4899" fill-opacity="0.2" stroke="#ec4899" stroke-width="3"/>
                        <text x="180" y="235" text-anchor="middle" fill="#1f2937" font-size="12" font-weight="600">é ‚ç‚¹</text>
                        <text x="180" y="250" text-anchor="middle" fill="#1f2937" font-size="12" font-weight="600">(Node)</text>
                        <!-- è¾º -->
                        <line x1="140" y1="120" x2="215" y2="120" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arr1)"/>
                        <line x1="115" y1="155" x2="150" y2="205" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arr1)"/>
                        <line x1="245" y1="155" x2="210" y2="205" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arr1)"/>
                        <text x="180" y="105" text-anchor="middle" fill="#8b5cf6" font-size="11" font-weight="600">è¾º(Edge)</text>
                        <!-- å³å´ï¼šå¯¾å¿œè¡¨ -->
                        <line x1="380" y1="50" x2="380" y2="280" stroke="#e5e7eb" stroke-width="2" stroke-dasharray="5,5"/>
                        <text x="590" y="30" text-anchor="middle" fill="#667eea" font-size="16" font-weight="700">LangGraphã§ã®å¯¾å¿œ</text>
                        <rect x="430" y="60" width="320" height="65" rx="10" fill="white" stroke="#667eea" stroke-width="2"/>
                        <circle cx="470" cy="92" r="20" fill="#667eea" fill-opacity="0.2" stroke="#667eea" stroke-width="2"/>
                        <text x="510" y="85" fill="#667eea" font-size="14" font-weight="700">Nodeï¼ˆé ‚ç‚¹ï¼‰</text>
                        <text x="510" y="105" fill="#4b5563" font-size="12">= å‡¦ç†ã®å˜ä½ï¼ˆé–¢æ•°ï¼‰</text>
                        <rect x="430" y="140" width="320" height="65" rx="10" fill="white" stroke="#8b5cf6" stroke-width="2"/>
                        <line x1="450" y1="172" x2="490" y2="172" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arr1)"/>
                        <text x="510" y="165" fill="#8b5cf6" font-size="14" font-weight="700">Edgeï¼ˆè¾ºï¼‰</text>
                        <text x="510" y="185" fill="#4b5563" font-size="12">= é ‚ç‚¹é–“ã®æ¥ç¶šï¼ˆçŸ¢å°ï¼‰</text>
                        <rect x="430" y="220" width="320" height="65" rx="10" fill="white" stroke="#10b981" stroke-width="2"/>
                        <rect x="455" y="245" width="30" height="25" rx="4" fill="#10b981" fill-opacity="0.2" stroke="#10b981" stroke-width="2"/>
                        <text x="470" y="262" text-anchor="middle" fill="#10b981" font-size="10">{ }</text>
                        <text x="510" y="250" fill="#10b981" font-size="14" font-weight="700">Stateï¼ˆçŠ¶æ…‹ï¼‰</text>
                        <text x="510" y="270" fill="#4b5563" font-size="12">= å…¨é ‚ç‚¹ã§å…±æœ‰ã™ã‚‹ãƒ‡ãƒ¼ã‚¿</text>
                    </svg>
                </div>
                <div class="grid-3" style="margin-top: 1.5rem;">
                    <div class="concept-card">
                        <div class="concept-icon">âš«</div>
                        <div class="concept-title">Nodeï¼ˆé ‚ç‚¹ï¼‰</div>
                        <div class="concept-desc">å‡¦ç†ã®å˜ä½ï¼ˆé–¢æ•°ï¼‰<br><span class="tag green">ã‚°ãƒ©ãƒ•ã®ã€Œç‚¹ã€</span></div>
                    </div>
                    <div class="concept-card">
                        <div class="concept-icon">â¡ï¸</div>
                        <div class="concept-title">Edgeï¼ˆè¾ºï¼‰</div>
                        <div class="concept-desc">é ‚ç‚¹é–“ã®æ¥ç¶š<br><span class="tag purple">ã‚°ãƒ©ãƒ•ã®ã€Œç·šã€</span></div>
                    </div>
                    <div class="concept-card">
                        <div class="concept-icon">ğŸ“¦</div>
                        <div class="concept-title">Stateï¼ˆçŠ¶æ…‹ï¼‰</div>
                        <div class="concept-desc">å…±æœ‰ãƒ‡ãƒ¼ã‚¿ã®å…¥ã‚Œç‰©<br><span class="tag emerald">é ‚ç‚¹é–“ã§å…±æœ‰</span></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- åŸºç¤æ¦‚å¿µã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="basics">
            <div class="section-header">
                <div class="section-number">2</div>
                <h2 class="section-title">åŸºç¤æ¦‚å¿µã®æ·±å €ã‚Š</h2>
                <p class="section-subtitle">State, Node, Edgeã‚’è©³ã—ãç†è§£ã™ã‚‹</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">ğŸ“¦</div>
                    <h3 class="card-title">Stateï¼ˆçŠ¶æ…‹ï¼‰ã¨ã¯ï¼Ÿ</h3>
                </div>
                <p>Stateã¯<strong>å…¨é ‚ç‚¹ï¼ˆNodeï¼‰ã§å…±æœ‰ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ </strong>ã§ã™ã€‚</p>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span></div>
                        <div class="code-content">
<pre><span class="kw">from</span> typing <span class="kw">import</span> TypedDict

<span class="kw">class</span> <span class="cl">ChatState</span>(TypedDict):
    <span class="st">"""å…¨é ‚ç‚¹ã§å…±æœ‰ã•ã‚Œã‚‹çŠ¶æ…‹"""</span>
    user_message: <span class="cl">str</span>      <span class="cm"># ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•</span>
    intent: <span class="cl">str</span>            <span class="cm"># æ„å›³åˆ†é¡çµæœ</span>
    response: <span class="cl">str</span>          <span class="cm"># æœ€çµ‚å›ç­”</span></pre>
                        </div>
                    </div>
                </div>
                <div class="highlight-box success">
                    <div class="highlight-title">ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ</div>
                    <p>Stateã¯ã€Œãƒã‚±ãƒ„ãƒªãƒ¬ãƒ¼ã®ãƒã‚±ãƒ„ã€ã€‚å„é ‚ç‚¹ãŒãƒã‚±ãƒ„ã‚’å—ã‘å–ã‚Šã€ä¸­èº«ã‚’æ›´æ–°ã—ã¦æ¬¡ã«æ¸¡ã—ã¾ã™ã€‚</p>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon emerald">âš™ï¸</div>
                    <h3 class="card-title">Nodeï¼ˆé ‚ç‚¹ï¼‰ã¨ã¯ï¼Ÿ</h3>
                </div>
                <p>Nodeã¯<strong>Stateã‚’å—ã‘å–ã‚Šã€æ›´æ–°å†…å®¹ã‚’è¿”ã™é–¢æ•°</strong>ã§ã™ã€‚</p>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span></div>
                        <div class="code-content">
<pre><span class="kw">def</span> <span class="fn">router_node</span>(state: <span class="cl">ChatState</span>) -> <span class="cl">dict</span>:
    <span class="st">"""ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ã‚’åˆ†é¡ã™ã‚‹é ‚ç‚¹"""</span>
    msg = state[<span class="st">"user_message"</span>]

    <span class="cm"># æ„å›³ã‚’åˆ¤å®š</span>
    <span class="kw">if</span> <span class="st">"ãƒ‡ãƒ¼ã‚¿"</span> <span class="kw">in</span> msg:
        intent = <span class="st">"data_query"</span>
    <span class="kw">else</span>:
        intent = <span class="st">"general"</span>

    <span class="cm"># intentã ã‘ã‚’è¿”ã™ï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰</span>
    <span class="kw">return</span> {<span class="st">"intent"</span>: intent}</pre>
                        </div>
                    </div>
                </div>
                <div class="highlight-box warning">
                    <div class="highlight-title">âš ï¸ é‡è¦</div>
                    <p><strong>æˆ»ã‚Šå€¤ã¯ã€Œéƒ¨åˆ†æ›´æ–°ã€</strong>ã€‚æ›´æ–°ã—ãŸã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã ã‘è¿”ã›ã°OKï¼</p>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon purple">ğŸ”—</div>
                    <h3 class="card-title">Edgeï¼ˆè¾ºï¼‰ã¨ã¯ï¼Ÿ</h3>
                </div>
                <p>Edgeã¯<strong>é ‚ç‚¹é–“ã®æ¥ç¶š</strong>ã‚’å®šç¾©ã—ã¾ã™ã€‚</p>
                <div class="diagram-container">
                    <div class="diagram-title">ğŸ”€ 2ç¨®é¡ã®è¾ºï¼ˆEdgeï¼‰</div>
                    <svg class="svg-diagram" viewBox="0 0 800 180">
                        <defs>
                            <marker id="arr2" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
                            </marker>
                            <marker id="arr3" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
                            </marker>
                        </defs>
                        <!-- å·¦ï¼šé€šå¸¸ã®è¾º -->
                        <text x="150" y="25" text-anchor="middle" fill="#22c55e" font-size="14" font-weight="700">é€šå¸¸ã®è¾ºï¼ˆadd_edgeï¼‰</text>
                        <circle cx="80" cy="90" r="30" fill="#22c55e" fill-opacity="0.3" stroke="#22c55e" stroke-width="2"/>
                        <text x="80" y="95" text-anchor="middle" fill="#f0fdf4" font-size="12">A</text>
                        <line x1="115" y1="90" x2="175" y2="90" stroke="#22c55e" stroke-width="3" marker-end="url(#arr2)"/>
                        <circle cx="220" cy="90" r="30" fill="#22c55e" fill-opacity="0.3" stroke="#22c55e" stroke-width="2"/>
                        <text x="220" y="95" text-anchor="middle" fill="#f0fdf4" font-size="12">B</text>
                        <text x="150" y="150" text-anchor="middle" fill="#86efac" font-size="12">å¸¸ã« A â†’ B ã¸</text>
                        <!-- åŒºåˆ‡ã‚Š -->
                        <line x1="350" y1="20" x2="350" y2="170" stroke="#30363d" stroke-width="2" stroke-dasharray="5,5"/>
                        <!-- å³ï¼šæ¡ä»¶åˆ†å² -->
                        <text x="580" y="25" text-anchor="middle" fill="#8b5cf6" font-size="14" font-weight="700">æ¡ä»¶åˆ†å²ã®è¾ºï¼ˆadd_conditional_edgesï¼‰</text>
                        <circle cx="420" cy="90" r="30" fill="#8b5cf6" fill-opacity="0.3" stroke="#8b5cf6" stroke-width="2"/>
                        <text x="420" y="95" text-anchor="middle" fill="#f0fdf4" font-size="12">A</text>
                        <line x1="455" y1="75" x2="530" y2="50" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr3)"/>
                        <line x1="455" y1="90" x2="530" y2="90" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr3)"/>
                        <line x1="455" y1="105" x2="530" y2="130" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr3)"/>
                        <circle cx="565" cy="45" r="22" fill="#10b981" fill-opacity="0.3" stroke="#10b981" stroke-width="2"/>
                        <text x="565" y="50" text-anchor="middle" fill="#f0fdf4" font-size="11">B</text>
                        <circle cx="565" cy="90" r="22" fill="#06b6d4" fill-opacity="0.3" stroke="#06b6d4" stroke-width="2"/>
                        <text x="565" y="95" text-anchor="middle" fill="#f0fdf4" font-size="11">C</text>
                        <circle cx="565" cy="135" r="22" fill="#f97316" fill-opacity="0.3" stroke="#f97316" stroke-width="2"/>
                        <text x="565" y="140" text-anchor="middle" fill="#f0fdf4" font-size="11">D</text>
                        <text x="680" y="50" fill="#10b981" font-size="10">æ¡ä»¶1</text>
                        <text x="680" y="95" fill="#06b6d4" font-size="10">æ¡ä»¶2</text>
                        <text x="680" y="140" fill="#f97316" font-size="10">ãã®ä»–</text>
                        <text x="580" y="170" text-anchor="middle" fill="#86efac" font-size="12">æ¡ä»¶ã§è¡Œãå…ˆãŒå¤‰ã‚ã‚‹</text>
                    </svg>
                </div>
                <table>
                    <thead><tr><th>ç¨®é¡</th><th>ç”¨é€”</th><th>ã‚³ãƒ¼ãƒ‰</th></tr></thead>
                    <tbody>
                        <tr><td><span class="tag green">é€šå¸¸ã®è¾º</span></td><td>å¸¸ã«åŒã˜é ‚ç‚¹ã¸</td><td><code>add_edge("A", "B")</code></td></tr>
                        <tr><td><span class="tag purple">æ¡ä»¶åˆ†å²ã®è¾º</span></td><td>æ¡ä»¶ã§åˆ†å²</td><td><code>add_conditional_edges(...)</code></td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- æœ€å°æ§‹æˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="minimal">
            <div class="section-header">
                <div class="section-number">3</div>
                <h2 class="section-title">æœ€å°æ§‹æˆã§ç†è§£ã™ã‚‹</h2>
                <p class="section-subtitle">2é ‚ç‚¹ã ã‘ã®æœ€å°æ§‹æˆ</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">ğŸš€</div>
                    <h3 class="card-title">æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªLangGraph</h3>
                </div>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span></div>
                        <div class="code-content">
<pre><span class="cm"># === æœ€å°æ§‹æˆã®LangGraph ===</span>

<span class="kw">from</span> typing <span class="kw">import</span> TypedDict
<span class="kw">from</span> langgraph.graph <span class="kw">import</span> StateGraph, START, END

<span class="cm"># --- Step 1: Stateã‚’å®šç¾© ---</span>
<span class="kw">class</span> <span class="cl">SimpleState</span>(TypedDict):
    message: <span class="cl">str</span>      <span class="cm"># å…¥åŠ›ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</span>
    result: <span class="cl">str</span>       <span class="cm"># å‡¦ç†çµæœ</span>

<span class="cm"># --- Step 2: Nodeï¼ˆé ‚ç‚¹ï¼‰ã‚’å®šç¾© ---</span>
<span class="kw">def</span> <span class="fn">process_node</span>(state: <span class="cl">SimpleState</span>) -> <span class="cl">dict</span>:
    <span class="st">"""ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†ã™ã‚‹é ‚ç‚¹"""</span>
    msg = state[<span class="st">"message"</span>]
    processed = <span class="st">f"å‡¦ç†æ¸ˆã¿: {msg}"</span>
    <span class="kw">return</span> {<span class="st">"result"</span>: processed}

<span class="kw">def</span> <span class="fn">output_node</span>(state: <span class="cl">SimpleState</span>) -> <span class="cl">dict</span>:
    <span class="st">"""çµæœã‚’å‡ºåŠ›ã™ã‚‹é ‚ç‚¹"""</span>
    <span class="bi">print</span>(<span class="st">f"æœ€çµ‚çµæœ: {state['result']}"</span>)
    <span class="kw">return</span> {}  <span class="cm"># æ›´æ–°ãªã—</span>

<span class="cm"># --- Step 3: Graphã‚’æ§‹ç¯‰ ---</span>
workflow = StateGraph(<span class="cl">SimpleState</span>)

workflow.add_node(<span class="st">"process"</span>, process_node)   <span class="cm"># é ‚ç‚¹ã‚’è¿½åŠ </span>
workflow.add_node(<span class="st">"output"</span>, output_node)     <span class="cm"># é ‚ç‚¹ã‚’è¿½åŠ </span>

workflow.add_edge(START, <span class="st">"process"</span>)          <span class="cm"># è¾ºã‚’è¿½åŠ </span>
workflow.add_edge(<span class="st">"process"</span>, <span class="st">"output"</span>)       <span class="cm"># è¾ºã‚’è¿½åŠ </span>
workflow.add_edge(<span class="st">"output"</span>, END)              <span class="cm"># è¾ºã‚’è¿½åŠ </span>

graph = workflow.compile()</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">ğŸ”„ å®Ÿè¡Œãƒ•ãƒ­ãƒ¼ï¼ˆã‚°ãƒ©ãƒ•æ§‹é€ ï¼‰</div>
                <svg class="svg-diagram" viewBox="0 0 700 350">
                    <defs>
                        <marker id="arr4" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
                        </marker>
                    </defs>
                    <!-- START -->
                    <circle cx="150" cy="50" r="35" fill="#10b981" fill-opacity="0.3" stroke="#10b981" stroke-width="3"/>
                    <text x="150" y="55" text-anchor="middle" fill="#f0fdf4" font-size="12" font-weight="600">START</text>
                    <line x1="150" y1="85" x2="150" y2="115" stroke="#22c55e" stroke-width="2" marker-end="url(#arr4)"/>
                    <!-- process_node -->
                    <circle cx="150" cy="160" r="45" fill="#22c55e" fill-opacity="0.3" stroke="#22c55e" stroke-width="3"/>
                    <text x="150" y="155" text-anchor="middle" fill="#f0fdf4" font-size="11" font-weight="600">process</text>
                    <text x="150" y="170" text-anchor="middle" fill="#f0fdf4" font-size="11" font-weight="600">_node</text>
                    <line x1="150" y1="205" x2="150" y2="235" stroke="#22c55e" stroke-width="2" marker-end="url(#arr4)"/>
                    <!-- output_node -->
                    <circle cx="150" cy="280" r="45" fill="#8b5cf6" fill-opacity="0.3" stroke="#8b5cf6" stroke-width="3"/>
                    <text x="150" y="275" text-anchor="middle" fill="#f0fdf4" font-size="11" font-weight="600">output</text>
                    <text x="150" y="290" text-anchor="middle" fill="#f0fdf4" font-size="11" font-weight="600">_node</text>
                    <line x1="150" y1="325" x2="150" y2="355" stroke="#22c55e" stroke-width="2"/>
                    <!-- END -->
                    <circle cx="150" cy="390" r="35" fill="#ec4899" fill-opacity="0.3" stroke="#ec4899" stroke-width="3"/>
                    <text x="150" y="395" text-anchor="middle" fill="#f0fdf4" font-size="12" font-weight="600">END</text>
                    <!-- å³å´ï¼šèª¬æ˜ -->
                    <rect x="280" y="30" width="380" height="70" rx="10" fill="#1a2234" stroke="#10b981" stroke-width="2"/>
                    <text x="300" y="55" fill="#10b981" font-size="13" font-weight="700">initial_state</text>
                    <text x="300" y="75" fill="#86efac" font-family="JetBrains Mono" font-size="11">message: "ã“ã‚“ã«ã¡ã¯", result: ""</text>
                    <rect x="280" y="130" width="380" height="80" rx="10" fill="#1a2234" stroke="#22c55e" stroke-width="2"/>
                    <text x="300" y="155" fill="#22c55e" font-size="13" font-weight="700">process_node ã®å‡¦ç†</text>
                    <text x="300" y="180" fill="#86efac" font-size="11">result ã‚’æ›´æ–°</text>
                    <text x="300" y="200" fill="#10b981" font-family="JetBrains Mono" font-size="11">return {"result": "å‡¦ç†æ¸ˆã¿: ã“ã‚“ã«ã¡ã¯"}</text>
                    <rect x="280" y="250" width="380" height="80" rx="10" fill="#1a2234" stroke="#8b5cf6" stroke-width="2"/>
                    <text x="300" y="275" fill="#8b5cf6" font-size="13" font-weight="700">output_node ã®å‡¦ç†</text>
                    <text x="300" y="300" fill="#86efac" font-size="11">æ›´æ–°ã•ã‚ŒãŸ result ã‚’å‚ç…§</text>
                    <text x="300" y="320" fill="#10b981" font-family="JetBrains Mono" font-size="11">return {} ï¼ˆæ›´æ–°ãªã—ï¼‰</text>
                    <!-- çŸ¢å° -->
                    <line x1="200" y1="65" x2="275" y2="65" stroke="#4ade80" stroke-width="1" stroke-dasharray="4"/>
                    <line x1="200" y1="160" x2="275" y2="170" stroke="#4ade80" stroke-width="1" stroke-dasharray="4"/>
                    <line x1="200" y1="280" x2="275" y2="290" stroke="#4ade80" stroke-width="1" stroke-dasharray="4"/>
                </svg>
            </div>

            <div class="highlight-box success">
                <div class="highlight-title">ğŸ’¡ éƒ¨åˆ†æ›´æ–°ã®ãƒã‚¤ãƒ³ãƒˆ</div>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span></div>
                        <div class="code-content">
<pre><span class="cm"># OK: æ›´æ–°ã—ãŸã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã ã‘è¿”ã™</span>
<span class="kw">return</span> {<span class="st">"result"</span>: processed}

<span class="cm"># NG: å…¨éƒ¨è¿”ã™å¿…è¦ã¯ãªã„</span>
<span class="cm"># return {"message": state["message"], "result": processed}</span>
<span class="cm"># messageã¯è‡ªå‹•çš„ã«å¼•ãç¶™ãŒã‚Œã‚‹ï¼</span></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- æ¡ä»¶åˆ†å²ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="branch">
            <div class="section-header">
                <div class="section-number">4</div>
                <h2 class="section-title">æ¡ä»¶åˆ†å²ã‚’è¿½åŠ ã™ã‚‹</h2>
                <p class="section-subtitle">æ¡ä»¶ã«ã‚ˆã£ã¦å‡¦ç†ã‚’åˆ†ã‘ã‚‹</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon purple">ğŸ”€</div>
                    <h3 class="card-title">æ¡ä»¶åˆ†å²ã®å®Ÿè£…</h3>
                </div>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span></div>
                        <div class="code-content">
<pre><span class="kw">from</span> typing <span class="kw">import</span> Literal

<span class="cm"># --- æ¡ä»¶åˆ†å²ã®é–¢æ•° ---</span>
<span class="kw">def</span> <span class="fn">route_by_intent</span>(state: <span class="cl">ChatState</span>) -> Literal[<span class="st">"weather"</span>, <span class="st">"time"</span>, <span class="st">"general"</span>]:
    <span class="st">"""intentã«åŸºã¥ã„ã¦æ¬¡ã®é ‚ç‚¹ã‚’æ±ºå®š"""</span>
    intent = state[<span class="st">"intent"</span>]
    <span class="kw">if</span> intent == <span class="st">"weather"</span>:
        <span class="kw">return</span> <span class="st">"weather"</span>
    <span class="kw">elif</span> intent == <span class="st">"time"</span>:
        <span class="kw">return</span> <span class="st">"time"</span>
    <span class="kw">else</span>:
        <span class="kw">return</span> <span class="st">"general"</span>

<span class="cm"># --- æ¡ä»¶åˆ†å²ã®è¾ºã‚’è¿½åŠ  ---</span>
workflow.add_conditional_edges(
    <span class="st">"classifier"</span>,        <span class="cm"># åˆ†å²å…ƒã®é ‚ç‚¹</span>
    route_by_intent,     <span class="cm"># æ¡ä»¶é–¢æ•°</span>
    {                    <span class="cm"># æˆ»ã‚Šå€¤ â†’ è¡Œãå…ˆã®é ‚ç‚¹</span>
        <span class="st">"weather"</span>: <span class="st">"weather"</span>,
        <span class="st">"time"</span>: <span class="st">"time"</span>,
        <span class="st">"general"</span>: <span class="st">"general"</span>,
    }
)</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">ğŸ”€ æ¡ä»¶åˆ†å²ã®ã‚°ãƒ©ãƒ•æ§‹é€ </div>
                <svg class="svg-diagram" viewBox="0 0 700 500">
                    <defs>
                        <marker id="arr5" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
                        </marker>
                    </defs>
                    <!-- START -->
                    <circle cx="350" cy="40" r="30" fill="#10b981" fill-opacity="0.3" stroke="#10b981" stroke-width="3"/>
                    <text x="350" y="45" text-anchor="middle" fill="#f0fdf4" font-size="12">START</text>
                    <line x1="350" y1="70" x2="350" y2="100" stroke="#22c55e" stroke-width="2" marker-end="url(#arr5)"/>
                    <!-- classifier -->
                    <circle cx="350" cy="140" r="45" fill="#22c55e" fill-opacity="0.3" stroke="#22c55e" stroke-width="3"/>
                    <text x="350" y="135" text-anchor="middle" fill="#f0fdf4" font-size="11">classifier</text>
                    <text x="350" y="150" text-anchor="middle" fill="#f0fdf4" font-size="11">_node</text>
                    <!-- æ¡ä»¶åˆ†å² -->
                    <polygon points="350,195 390,230 350,265 310,230" fill="#8b5cf6" fill-opacity="0.3" stroke="#8b5cf6" stroke-width="2"/>
                    <text x="350" y="235" text-anchor="middle" fill="#8b5cf6" font-size="10">åˆ†å²</text>
                    <!-- åˆ†å²ç·š -->
                    <line x1="310" y1="230" x2="150" y2="300" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <line x1="350" y1="265" x2="350" y2="300" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <line x1="390" y1="230" x2="550" y2="300" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <!-- ãƒ©ãƒ™ãƒ« -->
                    <text x="200" y="265" fill="#06b6d4" font-size="10">"weather"</text>
                    <text x="330" y="290" fill="#f97316" font-size="10">"time"</text>
                    <text x="480" y="265" fill="#ec4899" font-size="10">"general"</text>
                    <!-- åˆ†å²å…ˆ -->
                    <circle cx="150" cy="340" r="40" fill="#06b6d4" fill-opacity="0.3" stroke="#06b6d4" stroke-width="3"/>
                    <text x="150" y="335" text-anchor="middle" fill="#f0fdf4" font-size="10">weather</text>
                    <text x="150" y="350" text-anchor="middle" fill="#f0fdf4" font-size="10">_node</text>
                    <circle cx="350" cy="340" r="40" fill="#f97316" fill-opacity="0.3" stroke="#f97316" stroke-width="3"/>
                    <text x="350" y="335" text-anchor="middle" fill="#f0fdf4" font-size="10">time</text>
                    <text x="350" y="350" text-anchor="middle" fill="#f0fdf4" font-size="10">_node</text>
                    <circle cx="550" cy="340" r="40" fill="#ec4899" fill-opacity="0.3" stroke="#ec4899" stroke-width="3"/>
                    <text x="550" y="335" text-anchor="middle" fill="#f0fdf4" font-size="10">general</text>
                    <text x="550" y="350" text-anchor="middle" fill="#f0fdf4" font-size="10">_node</text>
                    <!-- END ã¸ã®åˆæµ -->
                    <line x1="150" y1="380" x2="330" y2="440" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <line x1="350" y1="380" x2="350" y2="430" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <line x1="550" y1="380" x2="370" y2="440" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <circle cx="350" cy="460" r="30" fill="#ec4899" fill-opacity="0.3" stroke="#ec4899" stroke-width="3"/>
                    <text x="350" y="465" text-anchor="middle" fill="#f0fdf4" font-size="12">END</text>
                </svg>
            </div>
        </section>

        <!-- Stateç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="state">
            <div class="section-header">
                <div class="section-number">5</div>
                <h2 class="section-title">Stateç®¡ç†ã®å¿œç”¨</h2>
                <p class="section-subtitle">Annotatedã¨reducer</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon orange">ğŸ”„</div>
                    <h3 class="card-title">reducerï¼ˆè‡ªå‹•ãƒãƒ¼ã‚¸ï¼‰</h3>
                </div>
                <p>ä¼šè©±å±¥æ­´ã®ã‚ˆã†ã«ã€Œè¿½åŠ ã—ã¦ã„ããŸã„ã€ãƒ‡ãƒ¼ã‚¿ã«ã¯<strong>reducer</strong>ã‚’ä½¿ã„ã¾ã™ã€‚</p>
                <table>
                    <thead><tr><th>ç¨®é¡</th><th>æŒ™å‹•</th><th>ä¾‹</th></tr></thead>
                    <tbody>
                        <tr><td><span class="tag orange">reducer ãªã—</span></td><td>ä¸Šæ›¸ã</td><td>å¤ã„å€¤ãŒæ¶ˆãˆã‚‹</td></tr>
                        <tr><td><span class="tag emerald">reducer ã‚ã‚Š</span></td><td>ãƒãƒ¼ã‚¸</td><td>æ—¢å­˜ + æ–°ã—ã„å€¤</td></tr>
                    </tbody>
                </table>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span></div>
                        <div class="code-content">
<pre><span class="kw">from</span> typing <span class="kw">import</span> Annotated, List
<span class="kw">from</span> operator <span class="kw">import</span> add

<span class="kw">class</span> <span class="cl">ChatState</span>(TypedDict):
    message: <span class="cl">str</span>
    response: <span class="cl">str</span>
    <span class="cm"># addã§è‡ªå‹•ãƒãƒ¼ã‚¸ï¼</span>
    history: Annotated[List[<span class="cl">str</span>], add]</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon purple">âœ¨</div>
                    <h3 class="card-title">ã‚«ã‚¹ã‚¿ãƒ reducer</h3>
                </div>
                <p>å±¥æ­´ã‚’<strong>ç›´è¿‘15ä»¶ã«åˆ¶é™</strong>ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ reducerï¼š</p>
                <div class="code-block">
                    <div class="code-header">Python - app/agents/state.py</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span></div>
                        <div class="code-content">
<pre><span class="kw">def</span> <span class="fn">merge_history</span>(current: List, new: List) -> List:
    <span class="st">"""ä¼šè©±å±¥æ­´ã‚’ãƒãƒ¼ã‚¸ã—ã€ç›´è¿‘15ä»¶ã«åˆ¶é™"""</span>
    merged = (current <span class="kw">or</span> []) + (new <span class="kw">or</span> [])
    <span class="kw">return</span> merged[<span class="cl">-15</span>:]  <span class="cm"># ç›´è¿‘15ä»¶ã®ã¿</span>

<span class="kw">class</span> <span class="cl">ChatState</span>(TypedDict):
    history: Annotated[List[Dict], merge_history]</pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- å®Ÿè·µã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="project">
            <div class="section-header">
                <div class="section-number">6</div>
                <h2 class="section-title">å®Ÿè·µãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</h2>
                <p class="section-subtitle">åºƒå‘Šåˆ†æAIãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon purple">âš™ï¸</div>
                    <h3 class="card-title">Workflowã®æ§‹ç¯‰</h3>
                </div>
                <div class="code-block">
                    <div class="code-header">Python - app/agents/workflow.py</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span></div>
                        <div class="code-content">
<pre><span class="kw">def</span> <span class="fn">create_chatbot_graph</span>() -> StateGraph:
    <span class="st">"""LangGraphãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰"""</span>

    workflow = StateGraph(<span class="cl">ChatState</span>)

    <span class="cm"># === é ‚ç‚¹ï¼ˆNodeï¼‰ã‚’è¿½åŠ  ===</span>
    workflow.add_node(<span class="st">"router"</span>, router_node)
    workflow.add_node(<span class="st">"clarification"</span>, clarification_node)
    workflow.add_node(<span class="st">"planner"</span>, planner_node)
    workflow.add_node(<span class="st">"executor"</span>, executor_node)
    workflow.add_node(<span class="st">"responder"</span>, responder_node)

    <span class="cm"># === è¾ºï¼ˆEdgeï¼‰ã‚’è¿½åŠ  ===</span>
    workflow.add_edge(START, <span class="st">"router"</span>)

    <span class="cm"># Router â†’ æ¡ä»¶åˆ†å²</span>
    workflow.add_conditional_edges(
        <span class="st">"router"</span>,
        route_after_router,
        {<span class="st">"clarification"</span>: <span class="st">"clarification"</span>, <span class="st">"planner"</span>: <span class="st">"planner"</span>}
    )

    workflow.add_edge(<span class="st">"clarification"</span>, <span class="st">"responder"</span>)
    workflow.add_edge(<span class="st">"planner"</span>, <span class="st">"executor"</span>)
    workflow.add_edge(<span class="st">"executor"</span>, <span class="st">"responder"</span>)
    workflow.add_edge(<span class="st">"responder"</span>, END)

    <span class="kw">return</span> workflow</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="highlight-box success">
                <div class="highlight-title">ğŸ“ ã¾ã¨ã‚</div>
                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <div class="step-title">State = å…±æœ‰ãƒ‡ãƒ¼ã‚¿</div>
                            <p>å…¨é ‚ç‚¹ã§å…±æœ‰ã€‚TypedDictã§å‹å®šç¾©ã€‚</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <div class="step-title">Nodeï¼ˆé ‚ç‚¹ï¼‰= å‡¦ç†å˜ä½</div>
                            <p>Stateã‚’å—ã‘å–ã‚Šã€éƒ¨åˆ†æ›´æ–°ã‚’è¿”ã™é–¢æ•°ã€‚</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <div class="step-title">Edgeï¼ˆè¾ºï¼‰= æ¥ç¶š</div>
                            <p>é ‚ç‚¹é–“ã®æµã‚Œã€‚æ¡ä»¶åˆ†å²ã‚‚å¯èƒ½ã€‚</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <div class="step-title">Annotated = è‡ªå‹•ãƒãƒ¼ã‚¸</div>
                            <p>reducerã§å±¥æ­´ãªã©ã‚’è‡ªå‹•ãƒãƒ¼ã‚¸ã€‚</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                document.getElementById(tab.dataset.section).classList.add('active');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        });
        document.addEventListener('keydown', (e) => {
            const tabs = document.querySelectorAll('.nav-tab');
            const i = Array.from(tabs).findIndex(t => t.classList.contains('active'));
            if (e.key === 'ArrowRight' && i < tabs.length - 1) tabs[i + 1].click();
            if (e.key === 'ArrowLeft' && i > 0) tabs[i - 1].click();
        });
    </script>
</body>
</html>
