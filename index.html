<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LangGraph å®Œå…¨å­¦ç¿’ã‚¬ã‚¤ãƒ‰</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¨çµ±ä¸€ã—ãŸãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒ */
            --bg-dark: #0f1419;
            --bg-card: #1a2634;
            --bg-card-hover: #243447;
            --accent-green: #22c55e;
            --accent-emerald: #10b981;
            --accent-teal: #14b8a6;
            --accent-cyan: #06b6d4;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-orange: #f97316;
            --accent-pink: #ec4899;
            --text-primary: #f0fdf4;
            --text-secondary: #86efac;
            --text-muted: #4ade80;
            --border-color: #22543d;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, var(--bg-dark) 0%, #1a2634 100%);
            background-attachment: fixed;
            color: var(--text-primary);
            line-height: 1.8;
            min-height: 100vh;
        }
        .header {
            background: rgba(15, 20, 25, 0.95);
            border-bottom: 2px solid var(--border-color);
            padding: 1.5rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(20px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }
        .logo { display: flex; align-items: center; gap: 1rem; }
        .logo-icon {
            width: 48px; height: 48px;
            background: linear-gradient(135deg, #22c55e, #10b981);
            border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
        }
        .logo-text h1 {
            font-size: 1.5rem;
            background: linear-gradient(135deg, #22c55e, #10b981);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .logo-text span { font-size: 0.75rem; color: var(--text-secondary); letter-spacing: 0.1em; }
        .nav-tabs { display: flex; gap: 0.5rem; flex-wrap: wrap; }
        .nav-tab {
            padding: 0.75rem 1.5rem;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            font-family: inherit;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .nav-tab:hover {
            background: var(--bg-card-hover);
            border-color: var(--accent-green);
            color: var(--text-primary);
            transform: translateY(-2px);
        }
        .nav-tab.active {
            background: linear-gradient(135deg, #22c55e, #10b981);
            border-color: transparent;
            color: #0f1419;
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
            transform: translateY(-2px);
        }
        .main { max-width: 1400px; margin: 0 auto; padding: 2rem; }
        .section { display: none; animation: fadeIn 0.4s ease; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .section-header { margin-bottom: 3rem; text-align: center; }
        .section-number {
            display: inline-block; width: 60px; height: 60px;
            background: linear-gradient(135deg, #22c55e, #10b981);
            border-radius: 50%; line-height: 60px;
            font-size: 1.5rem; font-weight: 900; margin-bottom: 1rem;
            color: #0f1419;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
        }
        .section-title {
            font-size: 2.5rem; font-weight: 900; margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #22c55e, #10b981);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .section-subtitle { color: var(--text-secondary); font-size: 1.125rem; }
        .card {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-green);
            box-shadow: 0 20px 60px rgba(34, 197, 94, 0.2);
        }
        .card-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem; }
        .card-icon {
            width: 48px; height: 48px; border-radius: 12px;
            display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
        }
        .card-icon.green { background: rgba(34, 197, 94, 0.2); }
        .card-icon.emerald { background: rgba(16, 185, 129, 0.2); }
        .card-icon.blue { background: rgba(59, 130, 246, 0.2); }
        .card-icon.purple { background: rgba(139, 92, 246, 0.2); }
        .card-icon.orange { background: rgba(249, 115, 22, 0.2); }
        .card-title { font-size: 1.5rem; font-weight: 700; }
        .code-block {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 12px;
            margin: 1.5rem 0;
            overflow: hidden;
        }
        .code-header {
            background: #161b22;
            padding: 0.6rem 1rem;
            border-bottom: 1px solid #30363d;
            font-size: 0.75rem;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
        }
        .code-body { display: flex; }
        .line-nums {
            padding: 1rem 0;
            background: #0d1117;
            border-right: 1px solid #30363d;
            text-align: right;
            user-select: none;
            color: #484f58;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
        }
        .line-nums span { display: block; padding: 0 0.75rem; }
        .code-content {
            flex: 1;
            padding: 1rem 1.25rem;
            overflow-x: auto;
        }
        .code-content pre {
            margin: 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            color: #e6edf3;
            white-space: pre;
        }
        .cm { color: #8b949e; }
        .kw { color: #ff7b72; }
        .st { color: #a5d6ff; }
        .fn { color: #d2a8ff; }
        .cl { color: #79c0ff; }
        .bi { color: #ffa657; }
        .diagram-container {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            overflow-x: auto;
        }
        .diagram-title {
            text-align: center;
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--accent-green);
            margin-bottom: 1.5rem;
        }
        .svg-diagram { width: 100%; max-width: 900px; margin: 0 auto; display: block; }

        /* SVGã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes nodeGlow {
            0%, 100% { filter: drop-shadow(0 0 8px #22c55e); }
            50% { filter: drop-shadow(0 0 25px #22c55e) drop-shadow(0 0 50px #22c55e); }
        }
        @keyframes nodePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }
        @keyframes flowDash {
            to { stroke-dashoffset: -30; }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes borderPulse {
            0%, 100% { stroke-width: 2; }
            50% { stroke-width: 4; }
        }
        .svg-node-animated {
            animation: nodePulse 2s ease-in-out infinite;
            transform-origin: center;
        }
        .svg-flow-animated {
            stroke-dasharray: 15 8;
            animation: flowDash 0.8s linear infinite;
        }
        .svg-glow {
            animation: nodeGlow 1.5s ease-in-out infinite;
        }
        .node-circle {
            transition: all 0.5s ease;
        }
        .node-active {
            animation: nodeGlow 1.5s ease-in-out infinite, nodePulse 2s ease-in-out infinite;
        }
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; }
        .concept-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }
        .concept-icon { font-size: 3rem; margin-bottom: 1rem; }
        .concept-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; }
        .concept-desc { color: var(--text-secondary); font-size: 0.9rem; }
        .tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .tag.green { background: rgba(34, 197, 94, 0.2); color: var(--accent-green); }
        .tag.emerald { background: rgba(16, 185, 129, 0.2); color: var(--accent-emerald); }
        .tag.blue { background: rgba(59, 130, 246, 0.2); color: var(--accent-blue); }
        .tag.purple { background: rgba(139, 92, 246, 0.2); color: var(--accent-purple); }
        .tag.orange { background: rgba(249, 115, 22, 0.2); color: var(--accent-orange); }
        .highlight-box {
            background: #1a2634;
            border: 2px solid var(--border-color);
            border-left: 4px solid var(--accent-green);
            border-radius: 0 12px 12px 0;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        .highlight-box.warning { border-left-color: var(--accent-orange); background: #2a1f1a; }
        .highlight-box.success { border-left-color: var(--accent-green); background: #1a2a1f; }
        .highlight-title { font-weight: 700; color: var(--accent-green); margin-bottom: 0.5rem; }
        table { width: 100%; border-collapse: collapse; font-size: 0.9rem; margin: 1rem 0; }
        th, td { padding: 1rem; text-align: left; border-bottom: 1px solid var(--border-color); }
        th { background: rgba(34, 197, 94, 0.2); font-weight: 600; color: var(--accent-green); }
        code:not(pre code) {
            background: rgba(34, 197, 94, 0.2);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85em;
            color: var(--accent-green);
        }
        .steps { display: flex; flex-direction: column; gap: 1.5rem; }
        .step { display: flex; gap: 1.5rem; align-items: flex-start; }
        .step-number {
            width: 40px; height: 40px;
            background: linear-gradient(135deg, #22c55e, #10b981);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: 700; flex-shrink: 0;
            color: #0f1419;
            box-shadow: 0 4px 10px rgba(34, 197, 94, 0.4);
        }
        .step-title { font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); }

        /* å®Ÿè·µã‚»ã‚¯ã‚·ãƒ§ãƒ³2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
        .tutorial-layout {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 2rem;
            align-items: start;
        }
        .tutorial-content {
            min-width: 0;
        }
        .tutorial-sidebar {
            position: sticky;
            top: 100px;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 16px;
            padding: 1.5rem;
            max-height: calc(100vh - 120px);
            overflow: hidden;
        }
        .tutorial-sidebar-title {
            color: var(--accent-green);
            font-weight: 700;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            text-align: center;
        }
        .tutorial-sidebar svg {
            width: 100%;
            height: auto;
        }
        .tutorial-sidebar .current-step-label {
            text-align: center;
            margin-top: 1rem;
            padding: 0.75rem;
            background: rgba(34, 197, 94, 0.2);
            border-radius: 8px;
            color: var(--accent-green);
            font-weight: 700;
            font-size: 0.85rem;
        }
        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼SVGã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .sidebar-step rect,
        .sidebar-step circle,
        .sidebar-step polygon {
            transition: all 0.4s ease;
        }
        .sidebar-step.active rect,
        .sidebar-step.active circle,
        .sidebar-step.active polygon {
            fill: rgba(34, 197, 94, 0.3);
            stroke: #22c55e;
            stroke-width: 3;
            filter: drop-shadow(0 0 10px #22c55e) drop-shadow(0 0 20px #22c55e);
        }
        .sidebar-step.active text {
            fill: #22c55e;
            font-weight: bold;
        }
        .sidebar-step.completed rect,
        .sidebar-step.completed circle,
        .sidebar-step.completed polygon {
            fill: rgba(16, 185, 129, 0.2);
            stroke: #10b981;
        }
        .sidebar-step.completed text {
            fill: #10b981;
        }
        @keyframes sidebarPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        .sidebar-step.active {
            animation: sidebarPulse 1.5s ease-in-out infinite;
            transform-origin: center;
        }

        @media (max-width: 1024px) {
            .tutorial-layout {
                grid-template-columns: 1fr;
            }
            .tutorial-sidebar {
                position: relative;
                top: 0;
                max-height: none;
                order: -1;
                margin-bottom: 2rem;
            }
        }
        @media (max-width: 768px) {
            .header-content { flex-direction: column; }
            .section-title { font-size: 1.75rem; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">ğŸ”—</div>
                <div class="logo-text">
                    <h1>LangGraph å®Œå…¨å­¦ç¿’ã‚¬ã‚¤ãƒ‰</h1>
                    <span>FOR AI AGENT DEVELOPMENT</span>
                </div>
            </div>
            <nav class="nav-tabs">
                <button class="nav-tab active" data-section="intro">æ¦‚è¦</button>
                <button class="nav-tab" data-section="basics">åŸºç¤æ¦‚å¿µ</button>
                <button class="nav-tab" data-section="minimal">æœ€å°æ§‹æˆ</button>
                <button class="nav-tab" data-section="branch">æ¡ä»¶åˆ†å²</button>
                <button class="nav-tab" data-section="state">Stateç®¡ç†</button>
                <button class="nav-tab" data-section="project">å®Ÿè·µ</button>
            </nav>
        </div>
    </header>

    <main class="main">
        <!-- æ¦‚è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section active" id="intro">
            <div class="section-header">
                <div class="section-number">1</div>
                <h2 class="section-title">LangGraphã¨ã¯ä½•ã‹</h2>
                <p class="section-subtitle">LangChainå­¦ç¿’æ¸ˆã¿ã®æ–¹å‘ã‘ã«è§£èª¬</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon blue">ğŸ¤”</div>
                    <h3 class="card-title">ãªãœLangGraphã‚’å­¦ã¶ã®ã‹ï¼Ÿ</h3>
                </div>
                <p>AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œã‚‹ã¨ãã€ã“ã‚“ãªçµŒé¨“ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ</p>
                <div class="highlight-box warning" style="margin: 1rem 0;">
                    <p>ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã«ã‚ˆã£ã¦ã€é•ã†å‡¦ç†ã‚’ã—ãŸã„...ã€</p>
                    <p>ã€Œè¤‡æ•°ã®AIã‚’é€£æºã•ã›ã¦ã€ã‚‚ã£ã¨è³¢ã„ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½œã‚ŠãŸã„...ã€</p>
                    <p>ã€Œã‚¨ãƒ©ãƒ¼ãŒèµ·ããŸã‚‰ã€ãƒªãƒˆãƒ©ã‚¤ã—ãŸã„...ã€</p>
                </div>
                <p><strong>LangGraph</strong>ã¯ã€ã“ã‚Œã‚‰ã™ã¹ã¦ã‚’<strong>ã‚·ãƒ³ãƒ—ãƒ«ãªã‚³ãƒ¼ãƒ‰</strong>ã§å®Ÿç¾ã§ãã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon orange">âš ï¸</div>
                    <h3 class="card-title">LangChainã ã‘ã§ã¯é™ç•ŒãŒã‚ã‚‹</h3>
                </div>
                <p>LangChainã®LCELã¯<strong>ç›´ç·šçš„ãªå‡¦ç†</strong>ã«å¼·ã„ã§ã™ï¼š</p>
                <div class="code-block">
                    <div class="code-header">Python - LangChainã®åŸºæœ¬ï¼ˆLCELï¼‰</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span></div>
                        <div class="code-content">
<pre><span class="cm"># LCEL: ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆç›´ç·šçš„ãªæµã‚Œï¼‰</span>
<span class="cm"># å…¥åŠ› â†’ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ â†’ LLM â†’ ãƒ‘ãƒ¼ã‚µãƒ¼ â†’ å‡ºåŠ›</span>
chain = prompt | llm | output_parser

<span class="cm"># å®Ÿè¡Œï¼ˆã‚·ãƒ³ãƒ—ãƒ«ï¼ï¼‰</span>
result = chain.invoke({<span class="st">"question"</span>: <span class="st">"ä»Šæ—¥ã®å¤©æ°—ã¯ï¼Ÿ"</span>})</pre>
                        </div>
                    </div>
                </div>
                <p style="margin-top: 1rem;">ã“ã®ã€Œãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã€ã¯ç°¡å˜ã§åˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ãŒ...</p>
                <div class="highlight-box" style="margin: 1rem 0;">
                    <div class="highlight-title">ğŸ˜° LCELã ã‘ã§ã¯é›£ã—ã„ã“ã¨</div>
                    <ul style="margin: 0.5rem 0 0 1.5rem;">
                        <li><strong>æ¡ä»¶åˆ†å²</strong>ï¼šã€Œå¤©æ°—ã®è³ªå•ã€ã¨ã€Œãƒ‹ãƒ¥ãƒ¼ã‚¹ã®è³ªå•ã€ã§é•ã†å‡¦ç†ã‚’ã—ãŸã„</li>
                        <li><strong>ãƒ«ãƒ¼ãƒ—</strong>ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæº€è¶³ã™ã‚‹ã¾ã§ç¹°ã‚Šè¿”ã—ãŸã„</li>
                        <li><strong>ä¸¦åˆ—å‡¦ç†</strong>ï¼šè¤‡æ•°ã®APIã‚’åŒæ™‚ã«å‘¼ã³ãŸã„</li>
                        <li><strong>çŠ¶æ…‹ç®¡ç†</strong>ï¼šä¼šè©±å±¥æ­´ã‚’æŒã¡å›ã‚ŠãŸã„</li>
                    </ul>
                </div>
                <p><strong>â†’ ã“ã‚Œã‚‰ã‚’è§£æ±ºã™ã‚‹ã®ãŒLangGraphã§ã™ï¼</strong></p>
            </div>

            <!-- ã‚°ãƒ©ãƒ•ç†è«–ã®å›³è§£ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">ğŸ¯</div>
                    <h3 class="card-title">ã‚°ãƒ©ãƒ•ç†è«–ã®åŸºæœ¬ï¼šé ‚ç‚¹ã¨è¾º</h3>
                </div>
                <div class="diagram-container">
                    <div class="diagram-title">LangGraphã¯ã‚°ãƒ©ãƒ•æ§‹é€ ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®šç¾©ã™ã‚‹</div>
                    <svg class="svg-diagram" viewBox="0 0 800 320">
                        <defs>
                            <marker id="arr1" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
                            </marker>
                        </defs>
                        <!-- å·¦å´ï¼šã‚°ãƒ©ãƒ•æ§‹é€  -->
                        <text x="180" y="30" text-anchor="middle" fill="#667eea" font-size="16" font-weight="700">ã‚°ãƒ©ãƒ•æ§‹é€ ã®åŸºæœ¬</text>
                        <circle cx="100" cy="120" r="40" fill="#667eea" fill-opacity="0.2" stroke="#667eea" stroke-width="3"/>
                        <text x="100" y="115" text-anchor="middle" fill="#f0fdf4" font-size="12" font-weight="600">é ‚ç‚¹</text>
                        <text x="100" y="130" text-anchor="middle" fill="#f0fdf4" font-size="12" font-weight="600">(Node)</text>
                        <circle cx="260" cy="120" r="40" fill="#10b981" fill-opacity="0.2" stroke="#10b981" stroke-width="3"/>
                        <text x="260" y="115" text-anchor="middle" fill="#f0fdf4" font-size="12" font-weight="600">é ‚ç‚¹</text>
                        <text x="260" y="130" text-anchor="middle" fill="#f0fdf4" font-size="12" font-weight="600">(Node)</text>
                        <circle cx="180" cy="240" r="40" fill="#ec4899" fill-opacity="0.2" stroke="#ec4899" stroke-width="3"/>
                        <text x="180" y="235" text-anchor="middle" fill="#f0fdf4" font-size="12" font-weight="600">é ‚ç‚¹</text>
                        <text x="180" y="250" text-anchor="middle" fill="#f0fdf4" font-size="12" font-weight="600">(Node)</text>
                        <!-- è¾º -->
                        <line x1="140" y1="120" x2="215" y2="120" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arr1)"/>
                        <line x1="115" y1="155" x2="150" y2="205" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arr1)"/>
                        <line x1="245" y1="155" x2="210" y2="205" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arr1)"/>
                        <text x="180" y="105" text-anchor="middle" fill="#8b5cf6" font-size="11" font-weight="600">è¾º(Edge)</text>
                        <!-- å³å´ï¼šå¯¾å¿œè¡¨ -->
                        <line x1="380" y1="50" x2="380" y2="280" stroke="#e5e7eb" stroke-width="2" stroke-dasharray="5,5"/>
                        <text x="590" y="30" text-anchor="middle" fill="#667eea" font-size="16" font-weight="700">LangGraphã§ã®å¯¾å¿œ</text>
                        <rect x="430" y="60" width="320" height="65" rx="10" fill="white" stroke="#667eea" stroke-width="2"/>
                        <circle cx="470" cy="92" r="20" fill="#667eea" fill-opacity="0.2" stroke="#667eea" stroke-width="2"/>
                        <text x="510" y="85" fill="#667eea" font-size="14" font-weight="700">Nodeï¼ˆé ‚ç‚¹ï¼‰</text>
                        <text x="510" y="105" fill="#4b5563" font-size="12">= å‡¦ç†ã®å˜ä½ï¼ˆé–¢æ•°ï¼‰</text>
                        <rect x="430" y="140" width="320" height="65" rx="10" fill="white" stroke="#8b5cf6" stroke-width="2"/>
                        <line x1="450" y1="172" x2="490" y2="172" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arr1)"/>
                        <text x="510" y="165" fill="#8b5cf6" font-size="14" font-weight="700">Edgeï¼ˆè¾ºï¼‰</text>
                        <text x="510" y="185" fill="#4b5563" font-size="12">= é ‚ç‚¹é–“ã®æ¥ç¶šï¼ˆçŸ¢å°ï¼‰</text>
                        <rect x="430" y="220" width="320" height="65" rx="10" fill="white" stroke="#10b981" stroke-width="2"/>
                        <rect x="455" y="245" width="30" height="25" rx="4" fill="#10b981" fill-opacity="0.2" stroke="#10b981" stroke-width="2"/>
                        <text x="470" y="262" text-anchor="middle" fill="#10b981" font-size="10">{ }</text>
                        <text x="510" y="250" fill="#10b981" font-size="14" font-weight="700">Stateï¼ˆçŠ¶æ…‹ï¼‰</text>
                        <text x="510" y="270" fill="#4b5563" font-size="12">= å…¨é ‚ç‚¹ã§å…±æœ‰ã™ã‚‹ãƒ‡ãƒ¼ã‚¿</text>
                    </svg>
                </div>
                <div class="grid-3" style="margin-top: 1.5rem;">
                    <div class="concept-card">
                        <div class="concept-icon">âš«</div>
                        <div class="concept-title">Nodeï¼ˆé ‚ç‚¹ï¼‰</div>
                        <div class="concept-desc">å‡¦ç†ã®å˜ä½ï¼ˆé–¢æ•°ï¼‰<br><span class="tag green">ã‚°ãƒ©ãƒ•ã®ã€Œç‚¹ã€</span></div>
                    </div>
                    <div class="concept-card">
                        <div class="concept-icon">â¡ï¸</div>
                        <div class="concept-title">Edgeï¼ˆè¾ºï¼‰</div>
                        <div class="concept-desc">é ‚ç‚¹é–“ã®æ¥ç¶š<br><span class="tag purple">ã‚°ãƒ©ãƒ•ã®ã€Œç·šã€</span></div>
                    </div>
                    <div class="concept-card">
                        <div class="concept-icon">ğŸ“¦</div>
                        <div class="concept-title">Stateï¼ˆçŠ¶æ…‹ï¼‰</div>
                        <div class="concept-desc">å…±æœ‰ãƒ‡ãƒ¼ã‚¿ã®å…¥ã‚Œç‰©<br><span class="tag emerald">é ‚ç‚¹é–“ã§å…±æœ‰</span></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- åŸºç¤æ¦‚å¿µã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="basics">
            <div class="section-header">
                <div class="section-number">2</div>
                <h2 class="section-title">åŸºç¤æ¦‚å¿µã®æ·±å €ã‚Š</h2>
                <p class="section-subtitle">State, Node, Edgeã‚’è©³ã—ãç†è§£ã™ã‚‹</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">ğŸ“¦</div>
                    <h3 class="card-title">Stateï¼ˆçŠ¶æ…‹ï¼‰ã¨ã¯ï¼Ÿ</h3>
                </div>
                <p>Stateã¯<strong>å…¨é ‚ç‚¹ï¼ˆNodeï¼‰ã§å…±æœ‰ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ </strong>ã§ã™ã€‚</p>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span></div>
                        <div class="code-content">
<pre><span class="kw">from</span> typing <span class="kw">import</span> TypedDict

<span class="kw">class</span> <span class="cl">ChatState</span>(TypedDict):
    <span class="st">"""å…¨é ‚ç‚¹ã§å…±æœ‰ã•ã‚Œã‚‹çŠ¶æ…‹"""</span>
    user_message: <span class="cl">str</span>      <span class="cm"># ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•</span>
    intent: <span class="cl">str</span>            <span class="cm"># æ„å›³åˆ†é¡çµæœ</span>
    response: <span class="cl">str</span>          <span class="cm"># æœ€çµ‚å›ç­”</span></pre>
                        </div>
                    </div>
                </div>
                <div class="highlight-box success">
                    <div class="highlight-title">ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ</div>
                    <p>Stateã¯ã€Œãƒã‚±ãƒ„ãƒªãƒ¬ãƒ¼ã®ãƒã‚±ãƒ„ã€ã€‚å„é ‚ç‚¹ãŒãƒã‚±ãƒ„ã‚’å—ã‘å–ã‚Šã€ä¸­èº«ã‚’æ›´æ–°ã—ã¦æ¬¡ã«æ¸¡ã—ã¾ã™ã€‚</p>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon emerald">âš™ï¸</div>
                    <h3 class="card-title">Nodeï¼ˆé ‚ç‚¹ï¼‰ã¨ã¯ï¼Ÿ</h3>
                </div>
                <p>Nodeã¯<strong>Stateã‚’å—ã‘å–ã‚Šã€æ›´æ–°å†…å®¹ã‚’è¿”ã™é–¢æ•°</strong>ã§ã™ã€‚</p>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span></div>
                        <div class="code-content">
<pre><span class="kw">def</span> <span class="fn">router_node</span>(state: <span class="cl">ChatState</span>) -> <span class="cl">dict</span>:
    <span class="st">"""ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ã‚’åˆ†é¡ã™ã‚‹é ‚ç‚¹"""</span>
    msg = state[<span class="st">"user_message"</span>]

    <span class="cm"># æ„å›³ã‚’åˆ¤å®š</span>
    <span class="kw">if</span> <span class="st">"ãƒ‡ãƒ¼ã‚¿"</span> <span class="kw">in</span> msg:
        intent = <span class="st">"data_query"</span>
    <span class="kw">else</span>:
        intent = <span class="st">"general"</span>

    <span class="cm"># intentã ã‘ã‚’è¿”ã™ï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰</span>
    <span class="kw">return</span> {<span class="st">"intent"</span>: intent}</pre>
                        </div>
                    </div>
                </div>
                <div class="highlight-box warning">
                    <div class="highlight-title">âš ï¸ é‡è¦</div>
                    <p><strong>æˆ»ã‚Šå€¤ã¯ã€Œéƒ¨åˆ†æ›´æ–°ã€</strong>ã€‚æ›´æ–°ã—ãŸã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã ã‘è¿”ã›ã°OKï¼</p>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon purple">ğŸ”—</div>
                    <h3 class="card-title">Edgeï¼ˆè¾ºï¼‰ã¨ã¯ï¼Ÿ</h3>
                </div>
                <p>Edgeã¯<strong>é ‚ç‚¹é–“ã®æ¥ç¶š</strong>ã‚’å®šç¾©ã—ã¾ã™ã€‚</p>
                <div class="diagram-container">
                    <div class="diagram-title">ğŸ”€ 2ç¨®é¡ã®è¾ºï¼ˆEdgeï¼‰</div>
                    <svg class="svg-diagram" viewBox="0 0 800 180">
                        <defs>
                            <marker id="arr2" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
                            </marker>
                            <marker id="arr3" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
                            </marker>
                        </defs>
                        <!-- å·¦ï¼šé€šå¸¸ã®è¾º -->
                        <text x="150" y="25" text-anchor="middle" fill="#22c55e" font-size="14" font-weight="700">é€šå¸¸ã®è¾ºï¼ˆadd_edgeï¼‰</text>
                        <circle cx="80" cy="90" r="30" fill="#22c55e" fill-opacity="0.3" stroke="#22c55e" stroke-width="2"/>
                        <text x="80" y="95" text-anchor="middle" fill="#f0fdf4" font-size="12">A</text>
                        <line x1="115" y1="90" x2="175" y2="90" stroke="#22c55e" stroke-width="3" marker-end="url(#arr2)"/>
                        <circle cx="220" cy="90" r="30" fill="#22c55e" fill-opacity="0.3" stroke="#22c55e" stroke-width="2"/>
                        <text x="220" y="95" text-anchor="middle" fill="#f0fdf4" font-size="12">B</text>
                        <text x="150" y="150" text-anchor="middle" fill="#86efac" font-size="12">å¸¸ã« A â†’ B ã¸</text>
                        <!-- åŒºåˆ‡ã‚Š -->
                        <line x1="350" y1="20" x2="350" y2="170" stroke="#30363d" stroke-width="2" stroke-dasharray="5,5"/>
                        <!-- å³ï¼šæ¡ä»¶åˆ†å² -->
                        <text x="580" y="25" text-anchor="middle" fill="#8b5cf6" font-size="14" font-weight="700">æ¡ä»¶åˆ†å²ã®è¾ºï¼ˆadd_conditional_edgesï¼‰</text>
                        <circle cx="420" cy="90" r="30" fill="#8b5cf6" fill-opacity="0.3" stroke="#8b5cf6" stroke-width="2"/>
                        <text x="420" y="95" text-anchor="middle" fill="#f0fdf4" font-size="12">A</text>
                        <line x1="455" y1="75" x2="530" y2="50" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr3)"/>
                        <line x1="455" y1="90" x2="530" y2="90" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr3)"/>
                        <line x1="455" y1="105" x2="530" y2="130" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr3)"/>
                        <circle cx="565" cy="45" r="22" fill="#10b981" fill-opacity="0.3" stroke="#10b981" stroke-width="2"/>
                        <text x="565" y="50" text-anchor="middle" fill="#f0fdf4" font-size="11">B</text>
                        <circle cx="565" cy="90" r="22" fill="#06b6d4" fill-opacity="0.3" stroke="#06b6d4" stroke-width="2"/>
                        <text x="565" y="95" text-anchor="middle" fill="#f0fdf4" font-size="11">C</text>
                        <circle cx="565" cy="135" r="22" fill="#f97316" fill-opacity="0.3" stroke="#f97316" stroke-width="2"/>
                        <text x="565" y="140" text-anchor="middle" fill="#f0fdf4" font-size="11">D</text>
                        <text x="680" y="50" fill="#10b981" font-size="10">æ¡ä»¶1</text>
                        <text x="680" y="95" fill="#06b6d4" font-size="10">æ¡ä»¶2</text>
                        <text x="680" y="140" fill="#f97316" font-size="10">ãã®ä»–</text>
                        <text x="580" y="170" text-anchor="middle" fill="#86efac" font-size="12">æ¡ä»¶ã§è¡Œãå…ˆãŒå¤‰ã‚ã‚‹</text>
                    </svg>
                </div>
                <table>
                    <thead><tr><th>ç¨®é¡</th><th>ç”¨é€”</th><th>ã‚³ãƒ¼ãƒ‰</th></tr></thead>
                    <tbody>
                        <tr><td><span class="tag green">é€šå¸¸ã®è¾º</span></td><td>å¸¸ã«åŒã˜é ‚ç‚¹ã¸</td><td><code>add_edge("A", "B")</code></td></tr>
                        <tr><td><span class="tag purple">æ¡ä»¶åˆ†å²ã®è¾º</span></td><td>æ¡ä»¶ã§åˆ†å²</td><td><code>add_conditional_edges(...)</code></td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- æœ€å°æ§‹æˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="minimal">
            <div class="section-header">
                <div class="section-number">3</div>
                <h2 class="section-title">æœ€å°æ§‹æˆã§ç†è§£ã™ã‚‹</h2>
                <p class="section-subtitle">2é ‚ç‚¹ã ã‘ã®æœ€å°æ§‹æˆ</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">ğŸš€</div>
                    <h3 class="card-title">æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªLangGraph</h3>
                </div>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span></div>
                        <div class="code-content">
<pre><span class="cm"># === æœ€å°æ§‹æˆã®LangGraph ===</span>

<span class="kw">from</span> typing <span class="kw">import</span> TypedDict
<span class="kw">from</span> langgraph.graph <span class="kw">import</span> StateGraph, START, END

<span class="cm"># --- Step 1: Stateã‚’å®šç¾© ---</span>
<span class="kw">class</span> <span class="cl">SimpleState</span>(TypedDict):
    message: <span class="cl">str</span>      <span class="cm"># å…¥åŠ›ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</span>
    result: <span class="cl">str</span>       <span class="cm"># å‡¦ç†çµæœ</span>

<span class="cm"># --- Step 2: Nodeï¼ˆé ‚ç‚¹ï¼‰ã‚’å®šç¾© ---</span>
<span class="kw">def</span> <span class="fn">process_node</span>(state: <span class="cl">SimpleState</span>) -> <span class="cl">dict</span>:
    <span class="st">"""ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†ã™ã‚‹é ‚ç‚¹"""</span>
    msg = state[<span class="st">"message"</span>]
    processed = <span class="st">f"å‡¦ç†æ¸ˆã¿: {msg}"</span>
    <span class="kw">return</span> {<span class="st">"result"</span>: processed}

<span class="kw">def</span> <span class="fn">output_node</span>(state: <span class="cl">SimpleState</span>) -> <span class="cl">dict</span>:
    <span class="st">"""çµæœã‚’å‡ºåŠ›ã™ã‚‹é ‚ç‚¹"""</span>
    <span class="bi">print</span>(<span class="st">f"æœ€çµ‚çµæœ: {state['result']}"</span>)
    <span class="kw">return</span> {}  <span class="cm"># æ›´æ–°ãªã—</span>

<span class="cm"># --- Step 3: Graphã‚’æ§‹ç¯‰ ---</span>
workflow = StateGraph(<span class="cl">SimpleState</span>)

workflow.add_node(<span class="st">"process"</span>, process_node)   <span class="cm"># é ‚ç‚¹ã‚’è¿½åŠ </span>
workflow.add_node(<span class="st">"output"</span>, output_node)     <span class="cm"># é ‚ç‚¹ã‚’è¿½åŠ </span>

workflow.add_edge(START, <span class="st">"process"</span>)          <span class="cm"># è¾ºã‚’è¿½åŠ </span>
workflow.add_edge(<span class="st">"process"</span>, <span class="st">"output"</span>)       <span class="cm"># è¾ºã‚’è¿½åŠ </span>
workflow.add_edge(<span class="st">"output"</span>, END)              <span class="cm"># è¾ºã‚’è¿½åŠ </span>

graph = workflow.compile()</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">ğŸ”„ å®Ÿè¡Œãƒ•ãƒ­ãƒ¼ï¼ˆã‚°ãƒ©ãƒ•æ§‹é€ ï¼‰- ã‚¯ãƒªãƒƒã‚¯ã§ã‚¹ãƒ†ãƒƒãƒ—ã‚’é€²ã‚€</div>
                <svg class="svg-diagram" viewBox="0 0 700 450" id="flowSvg">
                    <defs>
                        <marker id="arr4" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
                        </marker>
                        <filter id="glow">
                            <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                            <feMerge>
                                <feMergeNode in="coloredBlur"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                    </defs>
                    <!-- START -->
                    <g class="flow-step" data-step="0">
                        <circle cx="150" cy="50" r="35" fill="#10b981" fill-opacity="0.3" stroke="#10b981" stroke-width="3" class="node-circle"/>
                        <text x="150" y="55" text-anchor="middle" fill="#10b981" font-size="12" font-weight="600">START</text>
                    </g>
                    <line x1="150" y1="85" x2="150" y2="115" stroke="#22c55e" stroke-width="3" class="flow-line svg-flow-animated"/>
                    <!-- process_node -->
                    <g class="flow-step" data-step="1">
                        <circle cx="150" cy="160" r="45" fill="#22c55e" fill-opacity="0.3" stroke="#22c55e" stroke-width="3" class="node-circle"/>
                        <text x="150" y="155" text-anchor="middle" fill="#22c55e" font-size="11" font-weight="600">process</text>
                        <text x="150" y="170" text-anchor="middle" fill="#22c55e" font-size="11" font-weight="600">_node</text>
                    </g>
                    <line x1="150" y1="205" x2="150" y2="235" stroke="#22c55e" stroke-width="3" class="flow-line svg-flow-animated"/>
                    <!-- output_node -->
                    <g class="flow-step" data-step="2">
                        <circle cx="150" cy="280" r="45" fill="#8b5cf6" fill-opacity="0.3" stroke="#8b5cf6" stroke-width="3" class="node-circle"/>
                        <text x="150" y="275" text-anchor="middle" fill="#8b5cf6" font-size="11" font-weight="600">output</text>
                        <text x="150" y="290" text-anchor="middle" fill="#8b5cf6" font-size="11" font-weight="600">_node</text>
                    </g>
                    <line x1="150" y1="325" x2="150" y2="355" stroke="#22c55e" stroke-width="3" class="flow-line svg-flow-animated"/>
                    <!-- END -->
                    <g class="flow-step" data-step="3">
                        <circle cx="150" cy="390" r="35" fill="#ec4899" fill-opacity="0.3" stroke="#ec4899" stroke-width="3" class="node-circle"/>
                        <text x="150" y="395" text-anchor="middle" fill="#ec4899" font-size="12" font-weight="600">END</text>
                    </g>
                    <!-- å³å´ï¼šèª¬æ˜ï¼ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ï¼‰ -->
                    <g class="state-box" data-step="0" opacity="1">
                        <rect x="280" y="30" width="380" height="90" rx="12" fill="white" stroke="#10b981" stroke-width="3">
                            <animate attributeName="stroke-width" values="3;5;3" dur="1.5s" repeatCount="indefinite"/>
                        </rect>
                        <text x="300" y="55" fill="#10b981" font-size="14" font-weight="700">ğŸ“ Step 0: åˆæœŸçŠ¶æ…‹</text>
                        <text x="300" y="80" fill="#4b5563" font-size="12">StateãŒåˆæœŸåŒ–ã•ã‚Œã¾ã™</text>
                        <text x="300" y="105" fill="#10b981" font-family="JetBrains Mono" font-size="11">{message: "ã“ã‚“ã«ã¡ã¯", result: ""}</text>
                        <line x1="200" y1="50" x2="275" y2="65" stroke="#10b981" stroke-width="2" stroke-dasharray="6"/>
                    </g>
                    <g class="state-box" data-step="1" opacity="0">
                        <rect x="280" y="130" width="380" height="100" rx="12" fill="white" stroke="#22c55e" stroke-width="3">
                            <animate attributeName="stroke-width" values="3;5;3" dur="1.5s" repeatCount="indefinite"/>
                        </rect>
                        <text x="300" y="155" fill="#22c55e" font-size="14" font-weight="700">âš™ï¸ Step 1: process_node å®Ÿè¡Œä¸­</text>
                        <text x="300" y="180" fill="#4b5563" font-size="12">messageã‚’å‡¦ç†ã—ã¦resultã‚’æ›´æ–°</text>
                        <text x="300" y="205" fill="#22c55e" font-family="JetBrains Mono" font-size="11">return {"result": "å‡¦ç†æ¸ˆã¿: ã“ã‚“ã«ã¡ã¯"}</text>
                        <text x="300" y="225" fill="#6b7280" font-size="10">â€» messageã¯å¤‰æ›´ãªã— â†’ è‡ªå‹•ã§å¼•ãç¶™ã</text>
                        <line x1="200" y1="160" x2="275" y2="170" stroke="#22c55e" stroke-width="2" stroke-dasharray="6"/>
                    </g>
                    <g class="state-box" data-step="2" opacity="0">
                        <rect x="280" y="250" width="380" height="100" rx="12" fill="white" stroke="#8b5cf6" stroke-width="3">
                            <animate attributeName="stroke-width" values="3;5;3" dur="1.5s" repeatCount="indefinite"/>
                        </rect>
                        <text x="300" y="275" fill="#8b5cf6" font-size="14" font-weight="700">ğŸ“¤ Step 2: output_node å®Ÿè¡Œä¸­</text>
                        <text x="300" y="300" fill="#4b5563" font-size="12">æ›´æ–°ã•ã‚ŒãŸresultã‚’å‚ç…§ã—ã¦å‡ºåŠ›</text>
                        <text x="300" y="325" fill="#8b5cf6" font-family="JetBrains Mono" font-size="11">print("æœ€çµ‚çµæœ: å‡¦ç†æ¸ˆã¿: ã“ã‚“ã«ã¡ã¯")</text>
                        <text x="300" y="345" fill="#6b7280" font-size="10">return {} â†’ æ›´æ–°ãªã—ã§ã‚‚OK!</text>
                        <line x1="200" y1="280" x2="275" y2="290" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="6"/>
                    </g>
                    <g class="state-box" data-step="3" opacity="0">
                        <rect x="280" y="370" width="380" height="70" rx="12" fill="white" stroke="#ec4899" stroke-width="3">
                            <animate attributeName="stroke-width" values="3;5;3" dur="1.5s" repeatCount="indefinite"/>
                        </rect>
                        <text x="300" y="395" fill="#ec4899" font-size="14" font-weight="700">âœ… Step 3: å®Œäº†!</text>
                        <text x="300" y="420" fill="#4b5563" font-size="12">æœ€çµ‚State: {message: "ã“ã‚“ã«ã¡ã¯", result: "å‡¦ç†æ¸ˆã¿: ã“ã‚“ã«ã¡ã¯"}</text>
                        <line x1="200" y1="390" x2="275" y2="400" stroke="#ec4899" stroke-width="2" stroke-dasharray="6"/>
                    </g>
                </svg>
                <div style="text-align: center; margin-top: 1rem;">
                    <button id="flowPrevBtn" style="padding: 0.75rem 2rem; margin: 0.25rem; background: linear-gradient(135deg, #22c55e, #10b981); color: #0f1419; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; transition: all 0.3s ease;">â—€ å‰ã¸</button>
                    <span id="flowStepIndicator" style="padding: 0.5rem 1rem; color: #22c55e; font-weight: 700;">Step 0 / 3</span>
                    <button id="flowNextBtn" style="padding: 0.75rem 2rem; margin: 0.25rem; background: linear-gradient(135deg, #22c55e, #10b981); color: #0f1419; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; transition: all 0.3s ease;">æ¬¡ã¸ â–¶</button>
                    <button id="flowAutoBtn" style="padding: 0.75rem 2rem; margin: 0.25rem; background: linear-gradient(135deg, #06b6d4, #0891b2); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; transition: all 0.3s ease;">â–¶ è‡ªå‹•å†ç”Ÿ</button>
                </div>
            </div>

            <div class="highlight-box success">
                <div class="highlight-title">ğŸ’¡ éƒ¨åˆ†æ›´æ–°ã®ãƒã‚¤ãƒ³ãƒˆ</div>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span></div>
                        <div class="code-content">
<pre><span class="cm"># OK: æ›´æ–°ã—ãŸã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã ã‘è¿”ã™</span>
<span class="kw">return</span> {<span class="st">"result"</span>: processed}

<span class="cm"># NG: å…¨éƒ¨è¿”ã™å¿…è¦ã¯ãªã„</span>
<span class="cm"># return {"message": state["message"], "result": processed}</span>
<span class="cm"># messageã¯è‡ªå‹•çš„ã«å¼•ãç¶™ãŒã‚Œã‚‹ï¼</span></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- æ¡ä»¶åˆ†å²ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="branch">
            <div class="section-header">
                <div class="section-number">4</div>
                <h2 class="section-title">æ¡ä»¶åˆ†å²ã‚’è¿½åŠ ã™ã‚‹</h2>
                <p class="section-subtitle">æ¡ä»¶ã«ã‚ˆã£ã¦å‡¦ç†ã‚’åˆ†ã‘ã‚‹</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon purple">ğŸ”€</div>
                    <h3 class="card-title">æ¡ä»¶åˆ†å²ã®å®Ÿè£…</h3>
                </div>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span></div>
                        <div class="code-content">
<pre><span class="kw">from</span> typing <span class="kw">import</span> Literal

<span class="cm"># --- æ¡ä»¶åˆ†å²ã®é–¢æ•° ---</span>
<span class="kw">def</span> <span class="fn">route_by_intent</span>(state: <span class="cl">ChatState</span>) -> Literal[<span class="st">"weather"</span>, <span class="st">"time"</span>, <span class="st">"general"</span>]:
    <span class="st">"""intentã«åŸºã¥ã„ã¦æ¬¡ã®é ‚ç‚¹ã‚’æ±ºå®š"""</span>
    intent = state[<span class="st">"intent"</span>]
    <span class="kw">if</span> intent == <span class="st">"weather"</span>:
        <span class="kw">return</span> <span class="st">"weather"</span>
    <span class="kw">elif</span> intent == <span class="st">"time"</span>:
        <span class="kw">return</span> <span class="st">"time"</span>
    <span class="kw">else</span>:
        <span class="kw">return</span> <span class="st">"general"</span>

<span class="cm"># --- æ¡ä»¶åˆ†å²ã®è¾ºã‚’è¿½åŠ  ---</span>
workflow.add_conditional_edges(
    <span class="st">"classifier"</span>,        <span class="cm"># åˆ†å²å…ƒã®é ‚ç‚¹</span>
    route_by_intent,     <span class="cm"># æ¡ä»¶é–¢æ•°</span>
    {                    <span class="cm"># æˆ»ã‚Šå€¤ â†’ è¡Œãå…ˆã®é ‚ç‚¹</span>
        <span class="st">"weather"</span>: <span class="st">"weather"</span>,
        <span class="st">"time"</span>: <span class="st">"time"</span>,
        <span class="st">"general"</span>: <span class="st">"general"</span>,
    }
)</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">ğŸ”€ æ¡ä»¶åˆ†å²ã®ã‚°ãƒ©ãƒ•æ§‹é€ </div>
                <svg class="svg-diagram" viewBox="0 0 700 500">
                    <defs>
                        <marker id="arr5" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
                        </marker>
                    </defs>
                    <!-- START -->
                    <circle cx="350" cy="40" r="30" fill="#10b981" fill-opacity="0.3" stroke="#10b981" stroke-width="3"/>
                    <text x="350" y="45" text-anchor="middle" fill="#f0fdf4" font-size="12">START</text>
                    <line x1="350" y1="70" x2="350" y2="100" stroke="#22c55e" stroke-width="2" marker-end="url(#arr5)"/>
                    <!-- classifier -->
                    <circle cx="350" cy="140" r="45" fill="#22c55e" fill-opacity="0.3" stroke="#22c55e" stroke-width="3"/>
                    <text x="350" y="135" text-anchor="middle" fill="#f0fdf4" font-size="11">classifier</text>
                    <text x="350" y="150" text-anchor="middle" fill="#f0fdf4" font-size="11">_node</text>
                    <!-- æ¡ä»¶åˆ†å² -->
                    <polygon points="350,195 390,230 350,265 310,230" fill="#8b5cf6" fill-opacity="0.3" stroke="#8b5cf6" stroke-width="2"/>
                    <text x="350" y="235" text-anchor="middle" fill="#8b5cf6" font-size="10">åˆ†å²</text>
                    <!-- åˆ†å²ç·š -->
                    <line x1="310" y1="230" x2="150" y2="300" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <line x1="350" y1="265" x2="350" y2="300" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <line x1="390" y1="230" x2="550" y2="300" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <!-- ãƒ©ãƒ™ãƒ« -->
                    <text x="200" y="265" fill="#06b6d4" font-size="10">"weather"</text>
                    <text x="330" y="290" fill="#f97316" font-size="10">"time"</text>
                    <text x="480" y="265" fill="#ec4899" font-size="10">"general"</text>
                    <!-- åˆ†å²å…ˆ -->
                    <circle cx="150" cy="340" r="40" fill="#06b6d4" fill-opacity="0.3" stroke="#06b6d4" stroke-width="3"/>
                    <text x="150" y="335" text-anchor="middle" fill="#f0fdf4" font-size="10">weather</text>
                    <text x="150" y="350" text-anchor="middle" fill="#f0fdf4" font-size="10">_node</text>
                    <circle cx="350" cy="340" r="40" fill="#f97316" fill-opacity="0.3" stroke="#f97316" stroke-width="3"/>
                    <text x="350" y="335" text-anchor="middle" fill="#f0fdf4" font-size="10">time</text>
                    <text x="350" y="350" text-anchor="middle" fill="#f0fdf4" font-size="10">_node</text>
                    <circle cx="550" cy="340" r="40" fill="#ec4899" fill-opacity="0.3" stroke="#ec4899" stroke-width="3"/>
                    <text x="550" y="335" text-anchor="middle" fill="#f0fdf4" font-size="10">general</text>
                    <text x="550" y="350" text-anchor="middle" fill="#f0fdf4" font-size="10">_node</text>
                    <!-- END ã¸ã®åˆæµ -->
                    <line x1="150" y1="380" x2="330" y2="440" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <line x1="350" y1="380" x2="350" y2="430" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <line x1="550" y1="380" x2="370" y2="440" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <circle cx="350" cy="460" r="30" fill="#ec4899" fill-opacity="0.3" stroke="#ec4899" stroke-width="3"/>
                    <text x="350" y="465" text-anchor="middle" fill="#f0fdf4" font-size="12">END</text>
                </svg>
            </div>
        </section>

        <!-- Stateç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="state">
            <div class="section-header">
                <div class="section-number">5</div>
                <h2 class="section-title">Stateç®¡ç†ã®å¿œç”¨</h2>
                <p class="section-subtitle">Annotatedã¨reducer</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon orange">ğŸ”„</div>
                    <h3 class="card-title">reducerï¼ˆè‡ªå‹•ãƒãƒ¼ã‚¸ï¼‰</h3>
                </div>
                <p>ä¼šè©±å±¥æ­´ã®ã‚ˆã†ã«ã€Œè¿½åŠ ã—ã¦ã„ããŸã„ã€ãƒ‡ãƒ¼ã‚¿ã«ã¯<strong>reducer</strong>ã‚’ä½¿ã„ã¾ã™ã€‚</p>
                <table>
                    <thead><tr><th>ç¨®é¡</th><th>æŒ™å‹•</th><th>ä¾‹</th></tr></thead>
                    <tbody>
                        <tr><td><span class="tag orange">reducer ãªã—</span></td><td>ä¸Šæ›¸ã</td><td>å¤ã„å€¤ãŒæ¶ˆãˆã‚‹</td></tr>
                        <tr><td><span class="tag emerald">reducer ã‚ã‚Š</span></td><td>ãƒãƒ¼ã‚¸</td><td>æ—¢å­˜ + æ–°ã—ã„å€¤</td></tr>
                    </tbody>
                </table>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span></div>
                        <div class="code-content">
<pre><span class="kw">from</span> typing <span class="kw">import</span> Annotated, List
<span class="kw">from</span> operator <span class="kw">import</span> add

<span class="kw">class</span> <span class="cl">ChatState</span>(TypedDict):
    message: <span class="cl">str</span>
    response: <span class="cl">str</span>
    <span class="cm"># addã§è‡ªå‹•ãƒãƒ¼ã‚¸ï¼</span>
    history: Annotated[List[<span class="cl">str</span>], add]</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon purple">âœ¨</div>
                    <h3 class="card-title">ã‚«ã‚¹ã‚¿ãƒ reducer</h3>
                </div>
                <p>å±¥æ­´ã‚’<strong>ç›´è¿‘15ä»¶ã«åˆ¶é™</strong>ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ reducerï¼š</p>
                <div class="code-block">
                    <div class="code-header">Python - app/agents/state.py</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span></div>
                        <div class="code-content">
<pre><span class="kw">def</span> <span class="fn">merge_history</span>(current: List, new: List) -> List:
    <span class="st">"""ä¼šè©±å±¥æ­´ã‚’ãƒãƒ¼ã‚¸ã—ã€ç›´è¿‘15ä»¶ã«åˆ¶é™"""</span>
    merged = (current <span class="kw">or</span> []) + (new <span class="kw">or</span> [])
    <span class="kw">return</span> merged[<span class="cl">-15</span>:]  <span class="cm"># ç›´è¿‘15ä»¶ã®ã¿</span>

<span class="kw">class</span> <span class="cl">ChatState</span>(TypedDict):
    history: Annotated[List[Dict], merge_history]</pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- å®Ÿè·µã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="project">
            <div class="section-header">
                <div class="section-number">6</div>
                <h2 class="section-title">å®Ÿè·µãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</h2>
                <p class="section-subtitle">ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆAIã‚’ä¸€ã‹ã‚‰ä½œã‚‹</p>
            </div>

            <!-- é€²è¡Œã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ -->
            <div class="card" style="background: linear-gradient(135deg, #1a2634, #243447); padding: 1.5rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <span style="color: var(--accent-green); font-weight: 700;">ğŸ“ ç¾åœ¨ã®é€²è¡ŒçŠ¶æ³</span>
                    <span id="tutorialProgress" style="color: var(--text-secondary);">Step 1 / 6</span>
                </div>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <button class="tut-step-btn active" data-step="1" style="flex: 1; min-width: 80px; padding: 0.5rem; border: 2px solid var(--accent-green); background: rgba(34, 197, 94, 0.2); color: var(--accent-green); border-radius: 8px; cursor: pointer; font-size: 0.75rem; transition: all 0.3s;">1. ç’°å¢ƒ</button>
                    <button class="tut-step-btn" data-step="2" style="flex: 1; min-width: 80px; padding: 0.5rem; border: 2px solid var(--border-color); background: transparent; color: var(--text-secondary); border-radius: 8px; cursor: pointer; font-size: 0.75rem; transition: all 0.3s;">2. State</button>
                    <button class="tut-step-btn" data-step="3" style="flex: 1; min-width: 80px; padding: 0.5rem; border: 2px solid var(--border-color); background: transparent; color: var(--text-secondary); border-radius: 8px; cursor: pointer; font-size: 0.75rem; transition: all 0.3s;">3. Node</button>
                    <button class="tut-step-btn" data-step="4" style="flex: 1; min-width: 80px; padding: 0.5rem; border: 2px solid var(--border-color); background: transparent; color: var(--text-secondary); border-radius: 8px; cursor: pointer; font-size: 0.75rem; transition: all 0.3s;">4. åˆ†å²</button>
                    <button class="tut-step-btn" data-step="5" style="flex: 1; min-width: 80px; padding: 0.5rem; border: 2px solid var(--border-color); background: transparent; color: var(--text-secondary); border-radius: 8px; cursor: pointer; font-size: 0.75rem; transition: all 0.3s;">5. çµ„ç«‹</button>
                    <button class="tut-step-btn" data-step="6" style="flex: 1; min-width: 80px; padding: 0.5rem; border: 2px solid var(--border-color); background: transparent; color: var(--text-secondary); border-radius: 8px; cursor: pointer; font-size: 0.75rem; transition: all 0.3s;">6. å®Ÿè¡Œ</button>
                </div>
                <div style="margin-top: 1rem; padding: 1rem; background: rgba(0,0,0,0.2); border-radius: 8px;">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <span style="font-size: 2rem;" id="tutorialIcon">ğŸ“</span>
                        <div>
                            <div id="tutorialStepName" style="color: var(--text-primary); font-weight: 700;">ç’°å¢ƒæº–å‚™</div>
                            <div id="tutorialStepDesc" style="color: var(--text-secondary); font-size: 0.85rem;">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon blue">ğŸ¯</div>
                    <h3 class="card-title">ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ä½œã‚‹ã‚‚ã®</h3>
                </div>
                <p>å®Ÿéš›ã«å‹•ã<strong>è­°äº‹éŒ²è¦ç´„AI</strong>ã‚’ä½œã‚Šã¾ã™ã€‚ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰æ§‹é€ åŒ–ã•ã‚ŒãŸè­°äº‹éŒ²ã‚’è‡ªå‹•ç”Ÿæˆï¼</p>
                <div class="highlight-box success" style="margin: 1rem 0;">
                    <div class="highlight-title">âœ… å®Œæˆå¾Œã«ã§ãã‚‹ã“ã¨</div>
                    <ul style="margin: 0.5rem 0 0 1.5rem;">
                        <li>ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã‚’<strong>è‡ªå‹•è¦ç´„</strong>ï¼ˆ300æ–‡å­—ç¨‹åº¦ï¼‰</li>
                        <li>ä¸»è¦ãª<strong>è­°é¡Œã‚’æŠ½å‡º</strong>ï¼ˆãƒªã‚¹ãƒˆå½¢å¼ï¼‰</li>
                        <li><strong>ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ </strong>ã‚’è‡ªå‹•æŠ½å‡ºï¼ˆæ‹…å½“è€…ãƒ»æœŸé™ä»˜ãï¼‰</li>
                        <li>é•·ã„ä¼šè­°ã¯è©³ç´°ãƒ¢ãƒ¼ãƒ‰ã€çŸ­ã„ä¼šè­°ã¯ç°¡æ˜“ãƒ¢ãƒ¼ãƒ‰ã§<strong>è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ</strong></li>
                    </ul>
                </div>
                <div class="diagram-container">
                    <div class="diagram-title">å®Œæˆã‚¤ãƒ¡ãƒ¼ã‚¸ - è­°äº‹éŒ²è¦ç´„AIã®ãƒ•ãƒ­ãƒ¼</div>
                    <svg class="svg-diagram" viewBox="0 0 800 220">
                        <defs>
                            <marker id="arrTut" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#667eea"/>
                            </marker>
                        </defs>
                        <!-- START -->
                        <circle cx="50" cy="110" r="25" fill="#10b981" fill-opacity="0.3" stroke="#10b981" stroke-width="2"/>
                        <text x="50" y="115" text-anchor="middle" fill="#10b981" font-size="10">START</text>
                        <!-- Arrow to summarize -->
                        <line x1="75" y1="110" x2="115" y2="110" stroke="#667eea" stroke-width="2" marker-end="url(#arrTut)"/>
                        <!-- summarize -->
                        <rect x="120" y="85" width="80" height="50" rx="8" fill="#667eea" fill-opacity="0.3" stroke="#667eea" stroke-width="2"/>
                        <text x="160" y="105" text-anchor="middle" fill="#667eea" font-size="9">summarize</text>
                        <text x="160" y="120" text-anchor="middle" fill="#667eea" font-size="9">_node</text>
                        <!-- Arrow to check_length -->
                        <line x1="200" y1="110" x2="240" y2="110" stroke="#667eea" stroke-width="2" marker-end="url(#arrTut)"/>
                        <!-- check_length -->
                        <rect x="245" y="85" width="80" height="50" rx="8" fill="#06b6d4" fill-opacity="0.3" stroke="#06b6d4" stroke-width="2"/>
                        <text x="285" y="105" text-anchor="middle" fill="#06b6d4" font-size="9">check</text>
                        <text x="285" y="120" text-anchor="middle" fill="#06b6d4" font-size="9">_length</text>
                        <!-- Diamond (routing) -->
                        <polygon points="390,110 420,80 450,110 420,140" fill="#8b5cf6" fill-opacity="0.3" stroke="#8b5cf6" stroke-width="2"/>
                        <text x="420" y="113" text-anchor="middle" fill="#8b5cf6" font-size="9">is_long?</text>
                        <line x1="325" y1="110" x2="385" y2="110" stroke="#667eea" stroke-width="2" marker-end="url(#arrTut)"/>
                        <!-- Detailed path (top) -->
                        <line x1="450" y1="95" x2="490" y2="60" stroke="#22c55e" stroke-width="2" marker-end="url(#arrTut)"/>
                        <text x="460" y="65" fill="#22c55e" font-size="8">True</text>
                        <!-- extract_topics -->
                        <rect x="495" y="35" width="70" height="45" rx="6" fill="#22c55e" fill-opacity="0.3" stroke="#22c55e" stroke-width="2"/>
                        <text x="530" y="53" text-anchor="middle" fill="#22c55e" font-size="8">extract</text>
                        <text x="530" y="66" text-anchor="middle" fill="#22c55e" font-size="8">_topics</text>
                        <!-- Arrow to extract_actions -->
                        <line x1="565" y1="57" x2="590" y2="57" stroke="#667eea" stroke-width="2" marker-end="url(#arrTut)"/>
                        <!-- extract_actions -->
                        <rect x="595" y="35" width="70" height="45" rx="6" fill="#f97316" fill-opacity="0.3" stroke="#f97316" stroke-width="2"/>
                        <text x="630" y="53" text-anchor="middle" fill="#f97316" font-size="8">extract</text>
                        <text x="630" y="66" text-anchor="middle" fill="#f97316" font-size="8">_actions</text>
                        <!-- Arrow from actions to format -->
                        <line x1="665" y1="80" x2="665" y2="120" stroke="#667eea" stroke-width="2" marker-end="url(#arrTut)"/>
                        <!-- Simple path (bottom) -->
                        <line x1="450" y1="125" x2="540" y2="160" stroke="#f97316" stroke-width="2" marker-end="url(#arrTut)"/>
                        <text x="480" y="155" fill="#f97316" font-size="8">False</text>
                        <!-- format_doc -->
                        <rect x="545" y="135" width="80" height="50" rx="8" fill="#ec4899" fill-opacity="0.3" stroke="#ec4899" stroke-width="2"/>
                        <text x="585" y="155" text-anchor="middle" fill="#ec4899" font-size="9">format</text>
                        <text x="585" y="170" text-anchor="middle" fill="#ec4899" font-size="9">_doc</text>
                        <!-- Connect detailed to format -->
                        <line x1="665" y1="130" x2="625" y2="145" stroke="#667eea" stroke-width="2"/>
                        <!-- Arrow to END -->
                        <line x1="625" y1="160" x2="700" y2="160" stroke="#667eea" stroke-width="2" marker-end="url(#arrTut)"/>
                        <!-- END -->
                        <circle cx="730" cy="160" r="25" fill="#ec4899" fill-opacity="0.3" stroke="#ec4899" stroke-width="2"/>
                        <text x="730" y="165" text-anchor="middle" fill="#ec4899" font-size="10">END</text>
                    </svg>
                </div>
            </div>

            <!-- ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ -->
            <div class="tutorial-layout">
                <!-- å·¦å´: ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
                <div class="tutorial-content">

            <!-- ã‚¹ãƒ†ãƒƒãƒ—1 -->
            <div class="card" id="tut-step1">
                <div class="card-header">
                    <div class="card-icon green">ğŸ“</div>
                    <h3 class="card-title">Step 1: ç’°å¢ƒæº–å‚™</h3>
                    <span class="tag green" style="margin-left: auto;">æ‰€è¦æ™‚é–“: 5åˆ†</span>
                </div>
                <p>ã€Œ<strong>è­°äº‹éŒ²è¦ç´„AI</strong>ã€ã‚’ä½œã‚Šã¾ã™ã€‚ä¼šè­°ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã™ã‚‹ã¨ã€è¦ç´„ãƒ»è­°é¡Œãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã‚’è‡ªå‹•æŠ½å‡ºã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p>

                <div class="highlight-box" style="background: #1a2634; border-left-color: var(--accent-cyan);">
                    <div class="highlight-title" style="color: var(--accent-cyan);">ğŸ¯ ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ä½œã‚‹ã‚‚ã®</div>
                    <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                        <li><strong>å…¥åŠ›</strong>: ä¼šè­°ã®ãƒ†ã‚­ã‚¹ãƒˆï¼ˆZoomã®æ–‡å­—èµ·ã“ã—ã€æ‰‹æ›¸ããƒ¡ãƒ¢ãªã©ï¼‰</li>
                        <li><strong>å‡¦ç†</strong>: è¦ç´„ç”Ÿæˆ â†’ é•·ã•åˆ¤å®š â†’ è­°é¡ŒæŠ½å‡º â†’ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ æŠ½å‡º</li>
                        <li><strong>å‡ºåŠ›</strong>: æ§‹é€ åŒ–ã•ã‚ŒãŸè­°äº‹éŒ²ï¼ˆMarkdownå½¢å¼ï¼‰</li>
                    </ul>
                </div>

                <div class="code-block">
                    <div class="code-header">Terminal - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span></div>
                        <div class="code-content">
<pre><span class="cm"># ============================================</span>
<span class="cm"># 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ</span>
<span class="cm">#    â†’ å°‚ç”¨ãƒ•ã‚©ãƒ«ãƒ€ã§ä¾å­˜é–¢ä¿‚ã‚’ç®¡ç†</span>
<span class="cm"># ============================================</span>
mkdir meeting_summarizer
cd meeting_summarizer

<span class="cm"># ============================================</span>
<span class="cm"># 2. å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span>
<span class="cm">#    langgraph: ã‚°ãƒ©ãƒ•æ§‹ç¯‰ã®æœ¬ä½“</span>
<span class="cm">#    langchain-google-vertexai: Gemini APIã¸ã®æ¥ç¶š</span>
<span class="cm"># ============================================</span>
pip install langgraph langchain-google-vertexai</pre>
                        </div>
                    </div>
                </div>

                <div class="code-block">
                    <div class="code-header">Terminal - Google Cloudèªè¨¼</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span></div>
                        <div class="code-content">
<pre><span class="cm"># ============================================</span>
<span class="cm"># 3. Google Cloudèªè¨¼</span>
<span class="cm">#    ãªãœå¿…è¦ï¼Ÿ â†’ Vertex AIï¼ˆGeminiï¼‰ã¯GCPã®ã‚µãƒ¼ãƒ“ã‚¹ãªã®ã§èªè¨¼ãŒå¿…è¦</span>
<span class="cm">#    äº‹å‰æº–å‚™: gcloud CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠã</span>
<span class="cm"># ============================================</span>

<span class="cm"># ãƒ–ãƒ©ã‚¦ã‚¶ãŒé–‹ã„ã¦Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³</span>
gcloud auth application-default login

<span class="cm"># ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã‚’è¨­å®šï¼ˆGCPã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¢ºèªï¼‰</span>
gcloud config set project YOUR_PROJECT_ID</pre>
                        </div>
                    </div>
                </div>

                <div class="highlight-box warning">
                    <div class="highlight-title">âš ï¸ Vertex AI APIã®æœ‰åŠ¹åŒ–ï¼ˆåˆå›ã®ã¿ï¼‰</div>
                    <p>1. <a href="https://console.cloud.google.com/" target="_blank" style="color: var(--accent-cyan);">Google Cloud Console</a>ã«ã‚¢ã‚¯ã‚»ã‚¹<br>
                    2. ã€ŒAPIã¨ã‚µãƒ¼ãƒ“ã‚¹ã€â†’ã€Œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ã§ã€ŒVertex AI APIã€ã‚’æ¤œç´¢<br>
                    3. ã€Œæœ‰åŠ¹ã«ã™ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯<br>
                    <strong>â€» ç„¡æ–™æ ã‚ã‚Š</strong>: Gemini 1.5 Flashã¯æœˆ100ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³ã¾ã§ç„¡æ–™</p>
                </div>
            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—2 -->
            <div class="card" id="tut-step2">
                <div class="card-header">
                    <div class="card-icon emerald">ğŸ“¦</div>
                    <h3 class="card-title">Step 2: Stateã‚’å®šç¾©ã™ã‚‹</h3>
                    <span class="tag emerald" style="margin-left: auto;">æœ€é‡è¦</span>
                </div>

                <div class="highlight-box" style="background: #1a2634; border-left-color: var(--accent-purple);">
                    <div class="highlight-title" style="color: var(--accent-purple);">ğŸ¤” ãªãœStateãŒå¿…è¦ï¼Ÿ</div>
                    <p>LangGraphã§ã¯ã€<strong>Nodeã®é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘æ¸¡ã™</strong>ãŸã‚ã«ã€ŒStateã€ã‚’ä½¿ã„ã¾ã™ã€‚<br>
                    ã€Œä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã€ã‹ã‚‰å§‹ã¾ã‚Šã€ã€Œè¦ç´„ã€â†’ã€Œè­°é¡Œã€â†’ã€Œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã€ã¨åŠ å·¥ã•ã‚Œã¦ã„ããƒ‡ãƒ¼ã‚¿ã®<strong>ç®±</strong>ã§ã™ã€‚</p>
                </div>

                <div class="code-block">
                    <div class="code-header">Python - state.pyï¼ˆã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼‰</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span><span>46</span><span>47</span></div>
                        <div class="code-content">
<pre><span class="st">"""
Stateå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«

ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²ã€‘
LangGraphã§å‡¦ç†ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®ã€Œå‹ã€ã‚’å®šç¾©ã—ã¾ã™ã€‚
TypedDictã‚’ä½¿ã†ã¨ã€IDEã®è£œå®ŒãŒåŠ¹ã„ã¦é–‹ç™ºãŒæ¥½ã«ãªã‚Šã¾ã™ã€‚
"""</span>

<span class="kw">from</span> typing <span class="kw">import</span> TypedDict, Literal, Annotated, List
<span class="kw">from</span> operator <span class="kw">import</span> add  <span class="cm"># ãƒªã‚¹ãƒˆã‚’ã€Œè¿½åŠ ã€ã™ã‚‹ãŸã‚ã®reducer</span>


<span class="kw">class</span> <span class="cl">MeetingState</span>(TypedDict):
    <span class="st">"""
    è­°äº‹éŒ²è¦ç´„AIã®çŠ¶æ…‹ï¼ˆStateï¼‰

    ã€è¨­è¨ˆã®ãƒã‚¤ãƒ³ãƒˆã€‘
    1. å…¥åŠ›: æœ€åˆã«ä¸ãˆã‚‹ãƒ‡ãƒ¼ã‚¿ï¼ˆraw_textï¼‰
    2. ä¸­é–“: å‡¦ç†é€”ä¸­ã§åŸ‹ã¾ã‚‹ãƒ‡ãƒ¼ã‚¿ï¼ˆsummary, is_longï¼‰
    3. å‡ºåŠ›: æœ€çµ‚çš„ã«å–ã‚Šå‡ºã™ãƒ‡ãƒ¼ã‚¿ï¼ˆtopics, action_items, final_docï¼‰
    """</span>

    <span class="cm"># ============================</span>
    <span class="cm"># å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¸ãˆã‚‹ï¼‰</span>
    <span class="cm"># ============================</span>
    raw_text: <span class="cl">str</span>  <span class="cm"># ä¼šè­°ã®ç”Ÿãƒ†ã‚­ã‚¹ãƒˆï¼ˆZoomæ–‡å­—èµ·ã“ã—ç­‰ï¼‰</span>

    <span class="cm"># ============================</span>
    <span class="cm"># ä¸­é–“ãƒ‡ãƒ¼ã‚¿ï¼ˆNodeãŒåŸ‹ã‚ã¦ã„ãï¼‰</span>
    <span class="cm"># ============================</span>
    summary: <span class="cl">str</span>              <span class="cm"># è¦ç´„çµæœï¼ˆ300æ–‡å­—ç¨‹åº¦ï¼‰</span>
    is_long: <span class="cl">bool</span>             <span class="cm"># é•·ã„ä¼šè­°ã‹ï¼Ÿï¼ˆæ¡ä»¶åˆ†å²ã«ä½¿ç”¨ï¼‰</span>
    topics: List[<span class="cl">str</span>]        <span class="cm"># è­°é¡Œãƒªã‚¹ãƒˆï¼ˆä¾‹: ["äºˆç®—", "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«"]ï¼‰</span>
    action_items: List[<span class="cl">str</span>]  <span class="cm"># ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ï¼ˆä¾‹: ["ç”°ä¸­: è¦‹ç©ä½œæˆ"]ï¼‰</span>

    <span class="cm"># ============================</span>
    <span class="cm"># å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ï¼ˆæœ€çµ‚æˆæœç‰©ï¼‰</span>
    <span class="cm"># ============================</span>
    final_doc: <span class="cl">str</span>  <span class="cm"># æ•´å½¢ã•ã‚ŒãŸè­°äº‹éŒ²ï¼ˆMarkdownå½¢å¼ï¼‰</span>

    <span class="cm"># ============================</span>
    <span class="cm"># å‡¦ç†ãƒ­ã‚°ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰</span>
    <span class="cm"># Annotated[List, add] = æ–°ã—ã„å€¤ãŒã€Œè¿½åŠ ã€ã•ã‚Œã‚‹</span>
    <span class="cm"># â†’ å„NodeãŒ ["[è¦ç´„å®Œäº†]", "[è­°é¡ŒæŠ½å‡ºå®Œäº†]"] ã¨è¿½åŠ ã—ã¦ã„ã</span>
    <span class="cm"># ============================</span>
    logs: Annotated[List[<span class="cl">str</span>], add]</pre>
                        </div>
                    </div>
                </div>

                <div class="highlight-box success">
                    <div class="highlight-title">ğŸ’¡ å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®èª¬æ˜</div>
                    <table style="width: 100%; margin-top: 0.5rem;">
                        <tr>
                            <th style="width: 25%; padding: 0.5rem; background: rgba(34, 197, 94, 0.1);">ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</th>
                            <th style="width: 35%; padding: 0.5rem; background: rgba(34, 197, 94, 0.1);">å½¹å‰²</th>
                            <th style="width: 40%; padding: 0.5rem; background: rgba(34, 197, 94, 0.1);">èª°ãŒè¨­å®šï¼Ÿ</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;"><code>raw_text</code></td>
                            <td style="padding: 0.5rem;">ç”Ÿã®ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆ</td>
                            <td style="padding: 0.5rem;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆæœ€åˆã«æ¸¡ã™ï¼‰</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;"><code>summary</code></td>
                            <td style="padding: 0.5rem;">è¦ç´„ãƒ†ã‚­ã‚¹ãƒˆ</td>
                            <td style="padding: 0.5rem;">summarize_node</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;"><code>is_long</code></td>
                            <td style="padding: 0.5rem;">é•·ã„ä¼šè­°ãƒ•ãƒ©ã‚°</td>
                            <td style="padding: 0.5rem;">check_length_node</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;"><code>topics</code></td>
                            <td style="padding: 0.5rem;">è­°é¡Œãƒªã‚¹ãƒˆ</td>
                            <td style="padding: 0.5rem;">extract_topics_node</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;"><code>action_items</code></td>
                            <td style="padding: 0.5rem;">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§</td>
                            <td style="padding: 0.5rem;">extract_actions_node</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;"><code>final_doc</code></td>
                            <td style="padding: 0.5rem;">æœ€çµ‚è­°äº‹éŒ²</td>
                            <td style="padding: 0.5rem;">format_doc_node</td>
                        </tr>
                    </table>
                </div>

                <div class="highlight-box" style="background: #1a2634; border-left-color: var(--accent-cyan);">
                    <div class="highlight-title" style="color: var(--accent-cyan);">ğŸ§‘â€ğŸ’» AIã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢è¦–ç‚¹</div>
                    <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                        <li><strong>Stateè¨­è¨ˆã¯æœ€åˆã«ã—ã£ã‹ã‚Šè€ƒãˆã‚‹ï¼</strong> å¾Œã‹ã‚‰è¿½åŠ ã¯ç°¡å˜ã ãŒã€å‰Šé™¤ã¯æ—¢å­˜Nodeã«å½±éŸ¿</li>
                        <li><code>logs</code>ã®ã‚ˆã†ãª<strong>Annotated[List, add]</strong>ã¯ã€å„NodeãŒãƒ­ã‚°ã‚’ã€Œè¿½è¨˜ã€ã§ãã¦ä¾¿åˆ©</li>
                        <li>å®Ÿå‹™ã§ã¯<code>error_message</code>ã‚„<code>retry_count</code>ã‚‚å…¥ã‚Œã¦ãŠãã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ã‚„ã™ã„</li>
                    </ul>
                </div>
            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—3 -->
            <div class="card" id="tut-step3">
                <div class="card-header">
                    <div class="card-icon blue">âš™ï¸</div>
                    <h3 class="card-title">Step 3: Nodeã‚’å®šç¾©ã™ã‚‹</h3>
                    <span class="tag blue" style="margin-left: auto;">å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯</span>
                </div>

                <div class="highlight-box" style="background: #1a2634; border-left-color: var(--accent-purple);">
                    <div class="highlight-title" style="color: var(--accent-purple);">ğŸ¤” Nodeã¨ã¯ï¼Ÿ</div>
                    <p>Nodeã¯<strong>ã€ŒStateã‚’å—ã‘å–ã£ã¦ã€æ›´æ–°å†…å®¹ã‚’è¿”ã™é–¢æ•°ã€</strong>ã§ã™ã€‚<br>
                    è­°äº‹éŒ²AIã§ã¯ã€Œè¦ç´„ã™ã‚‹ã€ã€Œè­°é¡Œã‚’æŠ½å‡ºã™ã‚‹ã€ã€Œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æŠ½å‡ºã™ã‚‹ã€ãªã©ã€ãã‚Œãã‚ŒãŒNodeã«ãªã‚Šã¾ã™ã€‚</p>
                </div>

                <h4 style="margin: 1.5rem 0 1rem; color: var(--accent-green);">3-1. è¦ç´„ãƒãƒ¼ãƒ‰ï¼ˆsummarize_nodeï¼‰</h4>
                <p style="margin-bottom: 1rem; color: var(--text-secondary);">ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã‚’300æ–‡å­—ç¨‹åº¦ã«è¦ç´„ã—ã¾ã™ã€‚LLMã‚’ä½¿ã†å…¸å‹çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚</p>

                <div class="code-block">
                    <div class="code-header">Python - nodes.pyï¼ˆãã®1: è¦ç´„ï¼‰</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span><span>46</span><span>47</span><span>48</span><span>49</span><span>50</span><span>51</span><span>52</span></div>
                        <div class="code-content">
<pre><span class="st">"""
Nodeå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«

ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²ã€‘
å„å‡¦ç†ï¼ˆè¦ç´„ã€è­°é¡ŒæŠ½å‡ºãªã©ï¼‰ã‚’å€‹åˆ¥ã®é–¢æ•°ã¨ã—ã¦å®šç¾©ã—ã¾ã™ã€‚
é–¢æ•°ã¯å¿…ãšã€ŒStateã‚’å—ã‘å–ã‚Šã€æ›´æ–°ã™ã‚‹éƒ¨åˆ†ã ã‘ã‚’dictã§è¿”ã™ã€å½¢å¼ã§ã™ã€‚
"""</span>

<span class="kw">from</span> langchain_google_vertexai <span class="kw">import</span> ChatVertexAI
<span class="kw">from</span> langchain_core.prompts <span class="kw">import</span> ChatPromptTemplate
<span class="kw">from</span> state <span class="kw">import</span> MeetingState  <span class="cm"># Step 2ã§ä½œã£ãŸStateã‚’import</span>

<span class="cm"># ============================================</span>
<span class="cm"># LLMã®åˆæœŸåŒ–ï¼ˆå…¨Nodeã§å…±æœ‰ï¼‰</span>
<span class="cm"># temperature=0: å‡ºåŠ›ã‚’å®‰å®šã•ã›ã‚‹ï¼ˆæ¯å›åŒã˜çµæœï¼‰</span>
<span class="cm"># ============================================</span>
llm = ChatVertexAI(
    model=<span class="st">"gemini-1.5-flash"</span>,  <span class="cm"># é«˜é€Ÿãƒ»ä½ã‚³ã‚¹ãƒˆ</span>
    temperature=<span class="cl">0</span>              <span class="cm"># å‰µé€ æ€§ã‚’æŠ‘ãˆã¦å®‰å®šã—ãŸå‡ºåŠ›</span>
)


<span class="kw">def</span> <span class="fn">summarize_node</span>(state: MeetingState) -> <span class="cl">dict</span>:
    <span class="st">"""
    ã€è¦ç´„ãƒãƒ¼ãƒ‰ã€‘
    ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆ â†’ 300æ–‡å­—ç¨‹åº¦ã®è¦ç´„

    ãªãœè¦ç´„ã‹ã‚‰å§‹ã‚ã‚‹ï¼Ÿ
    â†’ é•·ã„ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã‚’ãã®ã¾ã¾å¾Œç¶šå‡¦ç†ã«æ¸¡ã™ã¨ã€
      ãƒˆãƒ¼ã‚¯ãƒ³æ•°ãŒå¢—ãˆã¦ã‚³ã‚¹ãƒˆãŒä¸ŠãŒã‚‹ï¼†ç²¾åº¦ãŒä¸‹ãŒã‚‹
    """</span>

    <span class="cm"># ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å®šç¾©ï¼ˆsystemã¨humanã®2ã¤ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰</span>
    prompt = ChatPromptTemplate.from_messages([
        (<span class="st">"system"</span>, <span class="st">"""ã‚ãªãŸã¯è­°äº‹éŒ²ä½œæˆã®ãƒ—ãƒ­ã§ã™ã€‚
ä»¥ä¸‹ã®ä¼šè­°å†…å®¹ã‚’300æ–‡å­—ç¨‹åº¦ã§è¦ç´„ã—ã¦ãã ã•ã„ã€‚
- é‡è¦ãªæ±ºå®šäº‹é …ã‚’å„ªå…ˆ
- å…·ä½“çš„ãªæ•°å­—ã‚„æœŸæ—¥ã¯å¿…ãšå«ã‚ã‚‹
- ç®‡æ¡æ›¸ãã§ã¯ãªãæ–‡ç« ã§"""</span>),
        (<span class="st">"human"</span>, <span class="st">"{text}"</span>)  <span class="cm"># {text}ã«å®Ÿéš›ã®ãƒ†ã‚­ã‚¹ãƒˆãŒå…¥ã‚‹</span>
    ])

    <span class="cm"># LangChainå¼: prompt | llm ã§ã€Œãƒã‚§ãƒ¼ãƒ³ã€ã‚’ä½œæˆ</span>
    chain = prompt | llm

    <span class="cm"># Stateã‹ã‚‰ç”Ÿãƒ†ã‚­ã‚¹ãƒˆã‚’å–ã‚Šå‡ºã—ã¦LLMã«æ¸¡ã™</span>
    result = chain.invoke({<span class="st">"text"</span>: state[<span class="st">"raw_text"</span>]})

    <span class="cm"># æ›´æ–°ã—ãŸã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã ã‘ã‚’dictã§è¿”ã™</span>
    <span class="cm"># â†’ LangGraphãŒè‡ªå‹•ã§Stateã«ãƒãƒ¼ã‚¸ã—ã¦ãã‚Œã‚‹</span>
    <span class="kw">return</span> {
        <span class="st">"summary"</span>: result.content,
        <span class="st">"logs"</span>: [<span class="st">"[summarize] è¦ç´„å®Œäº†"</span>]
    }</pre>
                        </div>
                    </div>
                </div>

                <h4 style="margin: 1.5rem 0 1rem; color: var(--accent-green);">3-2. é•·ã•ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ãƒ‰ï¼ˆcheck_length_nodeï¼‰</h4>
                <p style="margin-bottom: 1rem; color: var(--text-secondary);">LLMã‚’ä½¿ã‚ãªã„å‡¦ç†ã‚‚Nodeã«ã§ãã¾ã™ã€‚æ¡ä»¶åˆ†å²ã«ä½¿ã†ãƒ•ãƒ©ã‚°ã‚’è¨­å®šã—ã¾ã™ã€‚</p>

                <div class="code-block">
                    <div class="code-header">Python - nodes.pyï¼ˆãã®2: é•·ã•ãƒã‚§ãƒƒã‚¯ï¼‰</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span></div>
                        <div class="code-content">
<pre><span class="kw">def</span> <span class="fn">check_length_node</span>(state: MeetingState) -> <span class="cl">dict</span>:
    <span class="st">"""
    ã€é•·ã•ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ãƒ‰ã€‘
    ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã®é•·ã•ã§ã€Œè©³ç´°ãƒ¢ãƒ¼ãƒ‰ or ç°¡æ˜“ãƒ¢ãƒ¼ãƒ‰ã€ã‚’åˆ¤å®š

    ãªãœåˆ†å²ãŒå¿…è¦ï¼Ÿ
    â†’ é•·ã„ä¼šè­°: è­°é¡Œãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡ºã‚’ã—ã£ã‹ã‚Š
    â†’ çŸ­ã„ä¼šè­°: ã‚·ãƒ³ãƒ—ãƒ«ã«è¦ç´„ã ã‘ã§OK
    """</span>

    <span class="cm"># 2000æ–‡å­—ä»¥ä¸Šãªã‚‰ã€Œé•·ã„ä¼šè­°ã€ã¨åˆ¤å®š</span>
    text_length = <span class="bi">len</span>(state[<span class="st">"raw_text"</span>])
    is_long = text_length > <span class="cl">2000</span>

    <span class="bi">print</span>(<span class="st">f"[check_length] ãƒ†ã‚­ã‚¹ãƒˆé•·: {text_length}æ–‡å­— â†’ {'è©³ç´°ãƒ¢ãƒ¼ãƒ‰' if is_long else 'ç°¡æ˜“ãƒ¢ãƒ¼ãƒ‰'}"</span>)

    <span class="kw">return</span> {
        <span class="st">"is_long"</span>: is_long,
        <span class="st">"logs"</span>: [<span class="st">f"[check_length] {text_length}æ–‡å­—"</span>]
    }</pre>
                        </div>
                    </div>
                </div>

                <h4 style="margin: 1.5rem 0 1rem; color: var(--accent-green);">3-3. è­°é¡ŒæŠ½å‡ºãƒãƒ¼ãƒ‰ / ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡ºãƒãƒ¼ãƒ‰</h4>
                <p style="margin-bottom: 1rem; color: var(--text-secondary);">åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã§è¤‡æ•°ã®Nodeã‚’ä½œã‚Šã¾ã™ã€‚æŠ½å‡ºçµæœã¯ãƒªã‚¹ãƒˆã§è¿”ã—ã¾ã™ã€‚</p>

                <div class="code-block">
                    <div class="code-header">Python - nodes.pyï¼ˆãã®3: æŠ½å‡ºç³»ï¼‰</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span><span>46</span><span>47</span><span>48</span><span>49</span><span>50</span><span>51</span><span>52</span><span>53</span><span>54</span><span>55</span></div>
                        <div class="code-content">
<pre><span class="kw">def</span> <span class="fn">extract_topics_node</span>(state: MeetingState) -> <span class="cl">dict</span>:
    <span class="st">"""
    ã€è­°é¡ŒæŠ½å‡ºãƒãƒ¼ãƒ‰ã€‘
    è¦ç´„ã‹ã‚‰ä¸»è¦ãªè­°é¡Œã‚’æŠ½å‡ºï¼ˆãƒªã‚¹ãƒˆå½¢å¼ï¼‰

    ãƒã‚¤ãƒ³ãƒˆ: LLMã®å‡ºåŠ›ã‚’ã€Œæ”¹è¡ŒåŒºåˆ‡ã‚Šã€ã«ã—ã¦split()ã§åˆ†å‰²
    â†’ JSONå½¢å¼ã‚ˆã‚Šç¢ºå®Ÿã«å‹•ä½œã™ã‚‹
    """</span>

    prompt = ChatPromptTemplate.from_messages([
        (<span class="st">"system"</span>, <span class="st">"""ä»¥ä¸‹ã®ä¼šè­°è¦ç´„ã‹ã‚‰ã€è­°é¡Œã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚
- 1è¡Œã«1è­°é¡Œ
- è­°é¡Œã®ã¿ã‚’å‡ºåŠ›ï¼ˆç•ªå·ã‚„è¨˜å·ãªã—ï¼‰
- æœ€å¤§5å€‹ã¾ã§"""</span>),
        (<span class="st">"human"</span>, <span class="st">"{summary}"</span>)
    ])

    chain = prompt | llm
    result = chain.invoke({<span class="st">"summary"</span>: state[<span class="st">"summary"</span>]})

    <span class="cm"># æ”¹è¡Œã§åˆ†å‰²ã—ã¦ãƒªã‚¹ãƒˆåŒ–</span>
    topics = [
        line.strip()
        <span class="kw">for</span> line <span class="kw">in</span> result.content.split(<span class="st">"\n"</span>)
        <span class="kw">if</span> line.strip()  <span class="cm"># ç©ºè¡Œã‚’é™¤å¤–</span>
    ]

    <span class="kw">return</span> {
        <span class="st">"topics"</span>: topics,
        <span class="st">"logs"</span>: [<span class="st">f"[topics] {len(topics)}ä»¶æŠ½å‡º"</span>]
    }


<span class="kw">def</span> <span class="fn">extract_actions_node</span>(state: MeetingState) -> <span class="cl">dict</span>:
    <span class="st">"""
    ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ æŠ½å‡ºãƒãƒ¼ãƒ‰ã€‘
    ã€Œèª°ãŒã€ã€Œä½•ã‚’ã€ã€Œã„ã¤ã¾ã§ã«ã€ã‚’æŠ½å‡º
    """</span>

    prompt = ChatPromptTemplate.from_messages([
        (<span class="st">"system"</span>, <span class="st">"""ä»¥ä¸‹ã®ä¼šè­°è¦ç´„ã‹ã‚‰ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚
å½¢å¼: æ‹…å½“è€…: ã‚¿ã‚¹ã‚¯å†…å®¹ï¼ˆæœŸé™ãŒã‚ã‚Œã°è¨˜è¼‰ï¼‰
- 1è¡Œã«1ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- å…·ä½“çš„ãªã‚¿ã‚¹ã‚¯ã®ã¿æŠ½å‡º"""</span>),
        (<span class="st">"human"</span>, <span class="st">"{summary}"</span>)
    ])

    chain = prompt | llm
    result = chain.invoke({<span class="st">"summary"</span>: state[<span class="st">"summary"</span>]})

    actions = [line.strip() <span class="kw">for</span> line <span class="kw">in</span> result.content.split(<span class="st">"\n"</span>) <span class="kw">if</span> line.strip()]

    <span class="kw">return</span> {
        <span class="st">"action_items"</span>: actions,
        <span class="st">"logs"</span>: [<span class="st">f"[actions] {len(actions)}ä»¶æŠ½å‡º"</span>]
    }</pre>
                        </div>
                    </div>
                </div>

                <h4 style="margin: 1.5rem 0 1rem; color: var(--accent-green);">3-4. æ•´å½¢ãƒãƒ¼ãƒ‰ï¼ˆformat_doc_nodeï¼‰</h4>
                <p style="margin-bottom: 1rem; color: var(--text-secondary);">æœ€å¾Œã«ã€ã™ã¹ã¦ã®æƒ…å ±ã‚’Markdownå½¢å¼ã«æ•´å½¢ã—ã¾ã™ã€‚</p>

                <div class="code-block">
                    <div class="code-header">Python - nodes.pyï¼ˆãã®4: æ•´å½¢ï¼‰</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span></div>
                        <div class="code-content">
<pre><span class="kw">from</span> datetime <span class="kw">import</span> datetime

<span class="kw">def</span> <span class="fn">format_doc_node</span>(state: MeetingState) -> <span class="cl">dict</span>:
    <span class="st">"""
    ã€æ•´å½¢ãƒãƒ¼ãƒ‰ã€‘
    å…¨ã¦ã®æƒ…å ±ã‚’Markdownå½¢å¼ã®è­°äº‹éŒ²ã«æ•´å½¢

    LLMã‚’ä½¿ã‚ãªã„å‡¦ç†: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«å€¤ã‚’åŸ‹ã‚è¾¼ã‚€ã ã‘
    â†’ ã‚³ã‚¹ãƒˆå‰Šæ¸›ï¼†é«˜é€ŸåŒ–
    """</span>

    <span class="cm"># è­°é¡Œã‚’Markdownãƒªã‚¹ãƒˆã«å¤‰æ›</span>
    topics_md = <span class="st">"\n"</span>.join([<span class="st">f"- {t}"</span> <span class="kw">for</span> t <span class="kw">in</span> state.get(<span class="st">"topics"</span>, [])])

    <span class="cm"># ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã‚’Markdownãƒªã‚¹ãƒˆã«å¤‰æ›</span>
    actions_md = <span class="st">"\n"</span>.join([<span class="st">f"- [ ] {a}"</span> <span class="kw">for</span> a <span class="kw">in</span> state.get(<span class="st">"action_items"</span>, [])])

    <span class="cm"># Markdownå½¢å¼ã§è­°äº‹éŒ²ã‚’ç”Ÿæˆ</span>
    doc = <span class="st">f"""# è­°äº‹éŒ²
**ä½œæˆæ—¥æ™‚**: {datetime.now().strftime('%Y-%m-%d %H:%M')}

## è¦ç´„
{state.get('summary', '(è¦ç´„ãªã—)')}

## è­°é¡Œ
{topics_md or '(è­°é¡Œãªã—)'}

## ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ 
{actions_md or '(ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãªã—)'}
"""</span>

    <span class="kw">return</span> {
        <span class="st">"final_doc"</span>: doc,
        <span class="st">"logs"</span>: [<span class="st">"[format] è­°äº‹éŒ²ç”Ÿæˆå®Œäº†"</span>]
    }</pre>
                        </div>
                    </div>
                </div>

                <div class="highlight-box" style="background: #1a2634; border-left-color: var(--accent-cyan);">
                    <div class="highlight-title" style="color: var(--accent-cyan);">ğŸ§‘â€ğŸ’» AIã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢è¦–ç‚¹</div>
                    <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                        <li><strong>1 Node = 1è²¬å‹™</strong>: è¦ç´„ã¨è­°é¡ŒæŠ½å‡ºã‚’åˆ†ã‘ã‚‹ã¨ã€ãƒ†ã‚¹ãƒˆã‚„å·®ã—æ›¿ãˆãŒå®¹æ˜“</li>
                        <li><strong>LLMå‘¼ã³å‡ºã—ã¯æœ€å°é™ã«</strong>: format_doc_nodeã¯LLMä¸è¦ â†’ ã‚³ã‚¹ãƒˆå‰Šæ¸›</li>
                        <li><strong>print()ã§ãƒ‡ãƒãƒƒã‚°</strong>: å‡¦ç†ã®æµã‚Œã‚’è¿½ã„ã‚„ã™ããªã‚‹</li>
                        <li><strong>state.get("key", default)</strong>: ã‚­ãƒ¼ãŒãªã„å ´åˆã®ã‚¨ãƒ©ãƒ¼å›é¿</li>
                    </ul>
                </div>
            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—4 -->
            <div class="card" id="tut-step4">
                <div class="card-header">
                    <div class="card-icon purple">ğŸ”€</div>
                    <h3 class="card-title">Step 4: æ¡ä»¶åˆ†å²ã‚’å®šç¾©ã™ã‚‹</h3>
                    <span class="tag purple" style="margin-left: auto;">ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</span>
                </div>

                <div class="highlight-box" style="background: #1a2634; border-left-color: var(--accent-purple);">
                    <div class="highlight-title" style="color: var(--accent-purple);">ğŸ¤” ãªãœæ¡ä»¶åˆ†å²ãŒå¿…è¦ï¼Ÿ</div>
                    <p>è­°äº‹éŒ²AIã§ã¯ã€<strong>é•·ã„ä¼šè­°ã¨çŸ­ã„ä¼šè­°ã§å‡¦ç†ã‚’å¤‰ãˆãŸã„</strong>ã§ã™ã€‚<br>
                    - é•·ã„ä¼šè­° â†’ è­°é¡ŒæŠ½å‡ºãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡ºã‚‚ã‚„ã‚‹ï¼ˆè©³ç´°ãƒ¢ãƒ¼ãƒ‰ï¼‰<br>
                    - çŸ­ã„ä¼šè­° â†’ è¦ç´„ã ã‘ã§ååˆ†ï¼ˆç°¡æ˜“ãƒ¢ãƒ¼ãƒ‰ï¼‰</p>
                </div>

                <div class="code-block">
                    <div class="code-header">Python - routing.pyï¼ˆæ¡ä»¶åˆ†å²é–¢æ•°ï¼‰</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span></div>
                        <div class="code-content">
<pre><span class="st">"""
ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°é–¢æ•°

ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²ã€‘
æ¡ä»¶åˆ†å²ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®šç¾©ã—ã¾ã™ã€‚
Stateã®å€¤ã‚’è¦‹ã¦ã€Œæ¬¡ã«ã©ã®Nodeã«é€²ã‚€ã‹ã€ã‚’è¿”ã—ã¾ã™ã€‚

é‡è¦: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°é–¢æ•°ã¯Stateã‚’ã€Œèª­ã‚€ã ã‘ã€ã§ã€Œæ›´æ–°ã—ãªã„ã€
â†’ æˆ»ã‚Šå€¤ã¯æ–‡å­—åˆ—ï¼ˆæ¬¡ã®Nodeã®åå‰ï¼‰
"""</span>

<span class="kw">from</span> typing <span class="kw">import</span> Literal
<span class="kw">from</span> state <span class="kw">import</span> MeetingState


<span class="kw">def</span> <span class="fn">route_by_length</span>(state: MeetingState) -> Literal[<span class="st">"detailed"</span>, <span class="st">"simple"</span>]:
    <span class="st">"""
    ã€é•·ã•ã«ã‚ˆã‚‹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€‘

    Stateã®`is_long`ãƒ•ãƒ©ã‚°ã‚’è¦‹ã¦ã€æ¬¡ã®å‡¦ç†ã‚’æ±ºå®šã™ã‚‹

    æˆ»ã‚Šå€¤ã®å‹ãƒ’ãƒ³ãƒˆ Literal["detailed", "simple"] ã¯
    ã€Œã“ã®2ã¤ã®æ–‡å­—åˆ—ã—ã‹è¿”ã•ãªã„ã€ã“ã¨ã‚’ç¤ºã™
    â†’ ã‚¿ã‚¤ãƒé˜²æ­¢ï¼†IDEã®è£œå®ŒãŒåŠ¹ã
    """</span>

    <span class="cm"># check_length_nodeã§è¨­å®šã•ã‚ŒãŸãƒ•ãƒ©ã‚°ã‚’å‚ç…§</span>
    is_long = state.get(<span class="st">"is_long"</span>, <span class="cl">False</span>)

    <span class="kw">if</span> is_long:
        <span class="cm"># é•·ã„ä¼šè­° â†’ è©³ç´°ãªè­°é¡ŒæŠ½å‡ºã¸</span>
        <span class="bi">print</span>(<span class="st">"[routing] è©³ç´°ãƒ¢ãƒ¼ãƒ‰ã¸åˆ†å²"</span>)
        <span class="kw">return</span> <span class="st">"detailed"</span>
    <span class="kw">else</span>:
        <span class="cm"># çŸ­ã„ä¼šè­° â†’ ã‚·ãƒ³ãƒ—ãƒ«ãªæ•´å½¢ã¸</span>
        <span class="bi">print</span>(<span class="st">"[routing] ç°¡æ˜“ãƒ¢ãƒ¼ãƒ‰ã¸åˆ†å²"</span>)
        <span class="kw">return</span> <span class="st">"simple"</span></pre>
                        </div>
                    </div>
                </div>

                <div class="highlight-box success">
                    <div class="highlight-title">ğŸ’¡ æ¡ä»¶åˆ†å²ã®ãƒã‚¤ãƒ³ãƒˆ</div>
                    <ul style="margin: 0.5rem 0 0 1rem;">
                        <li><strong>Stateã‚’èª­ã‚€ã ã‘</strong>: æ¡ä»¶åˆ†å²é–¢æ•°ã¯Stateã‚’æ›´æ–°ã—ãªã„</li>
                        <li><strong>æˆ»ã‚Šå€¤ã¯æ–‡å­—åˆ—</strong>: æ¬¡ã«é€²ã‚€Nodeã®åå‰ã‚’è¿”ã™</li>
                        <li><strong>Literalå‹ã§å®‰å…¨ã«</strong>: è¿”ã›ã‚‹å€¤ã‚’é™å®šã—ã¦ã‚¿ã‚¤ãƒã‚’é˜²ã</li>
                    </ul>
                </div>

                <div class="diagram-container" style="margin-top: 1.5rem;">
                    <div class="diagram-title">æ¡ä»¶åˆ†å²ã®ã‚¤ãƒ¡ãƒ¼ã‚¸</div>
                    <svg viewBox="0 0 500 150" style="max-width: 500px; margin: 0 auto; display: block;">
                        <defs>
                            <marker id="routeArr" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#667eea"/>
                            </marker>
                        </defs>
                        <!-- check_length -->
                        <rect x="30" y="50" width="100" height="50" rx="8" fill="#1a2634" stroke="#667eea" stroke-width="2"/>
                        <text x="80" y="80" text-anchor="middle" fill="#86efac" font-size="11">check_length</text>
                        <!-- Diamond -->
                        <polygon points="200,75 230,45 260,75 230,105" fill="#8b5cf6" fill-opacity="0.3" stroke="#8b5cf6" stroke-width="2"/>
                        <text x="230" y="78" text-anchor="middle" fill="#8b5cf6" font-size="10">is_long?</text>
                        <!-- Arrows from check to diamond -->
                        <line x1="130" y1="75" x2="195" y2="75" stroke="#667eea" stroke-width="2" marker-end="url(#routeArr)"/>
                        <!-- detailed path -->
                        <rect x="320" y="20" width="100" height="40" rx="8" fill="#1a2634" stroke="#22c55e" stroke-width="2"/>
                        <text x="370" y="45" text-anchor="middle" fill="#22c55e" font-size="10">extract_topics</text>
                        <line x1="260" y1="65" x2="315" y2="40" stroke="#22c55e" stroke-width="2" marker-end="url(#routeArr)"/>
                        <text x="280" y="40" fill="#22c55e" font-size="9">True</text>
                        <!-- simple path -->
                        <rect x="320" y="90" width="100" height="40" rx="8" fill="#1a2634" stroke="#f97316" stroke-width="2"/>
                        <text x="370" y="115" text-anchor="middle" fill="#f97316" font-size="10">format_doc</text>
                        <line x1="260" y1="85" x2="315" y2="110" stroke="#f97316" stroke-width="2" marker-end="url(#routeArr)"/>
                        <text x="280" y="115" fill="#f97316" font-size="9">False</text>
                    </svg>
                </div>
            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—5 -->
            <div class="card" id="tut-step5">
                <div class="card-header">
                    <div class="card-icon orange">ğŸ”—</div>
                    <h3 class="card-title">Step 5: ã‚°ãƒ©ãƒ•ã‚’çµ„ã¿ç«‹ã¦ã‚‹</h3>
                    <span class="tag orange" style="margin-left: auto;">çµ„ã¿ç«‹ã¦</span>
                </div>

                <div class="highlight-box" style="background: #1a2634; border-left-color: var(--accent-purple);">
                    <div class="highlight-title" style="color: var(--accent-purple);">ğŸ¤” ã‚°ãƒ©ãƒ•çµ„ã¿ç«‹ã¦ã®æµã‚Œ</div>
                    <p>1. <code>StateGraph(Stateå‹)</code> ã§ã‚°ãƒ©ãƒ•ä½œæˆ<br>
                    2. <code>add_node("åå‰", é–¢æ•°)</code> ã§Nodeã‚’ç™»éŒ²<br>
                    3. <code>add_edge("A", "B")</code> ã§Aâ†’Bã®æ¥ç¶š<br>
                    4. <code>add_conditional_edges()</code> ã§æ¡ä»¶åˆ†å²<br>
                    5. <code>compile()</code> ã§å®Ÿè¡Œå¯èƒ½ãªã‚°ãƒ©ãƒ•ã«å¤‰æ›</p>
                </div>

                <div class="code-block">
                    <div class="code-header">Python - main.pyï¼ˆã‚°ãƒ©ãƒ•çµ„ã¿ç«‹ã¦ï¼‰</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span><span>46</span><span>47</span><span>48</span><span>49</span><span>50</span><span>51</span><span>52</span><span>53</span><span>54</span><span>55</span><span>56</span><span>57</span><span>58</span><span>59</span><span>60</span><span>61</span><span>62</span><span>63</span><span>64</span><span>65</span><span>66</span><span>67</span><span>68</span><span>69</span><span>70</span><span>71</span><span>72</span><span>73</span><span>74</span><span>75</span></div>
                        <div class="code-content">
<pre><span class="st">"""
ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ« - ã‚°ãƒ©ãƒ•ã®çµ„ã¿ç«‹ã¦ã¨å®Ÿè¡Œ

ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²ã€‘
1. å„ãƒ‘ãƒ¼ãƒ„ï¼ˆState, Node, Routingï¼‰ã‚’import
2. ã‚°ãƒ©ãƒ•ã‚’çµ„ã¿ç«‹ã¦ã‚‹
3. å®Ÿè¡Œã™ã‚‹
"""</span>

<span class="kw">from</span> langgraph.graph <span class="kw">import</span> StateGraph, START, END

<span class="cm"># è‡ªä½œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’import</span>
<span class="kw">from</span> state <span class="kw">import</span> MeetingState
<span class="kw">from</span> nodes <span class="kw">import</span> (
    summarize_node,
    check_length_node,
    extract_topics_node,
    extract_actions_node,
    format_doc_node,
)
<span class="kw">from</span> routing <span class="kw">import</span> route_by_length


<span class="kw">def</span> <span class="fn">create_meeting_graph</span>():
    <span class="st">"""
    è­°äº‹éŒ²è¦ç´„ã‚°ãƒ©ãƒ•ã‚’æ§‹ç¯‰ã™ã‚‹

    ã€ã‚°ãƒ©ãƒ•ã®æµã‚Œã€‘
    START â†’ summarize â†’ check_length â†’ [åˆ†å²]
        â†’ (é•·ã„) extract_topics â†’ extract_actions â†’ format_doc â†’ END
        â†’ (çŸ­ã„) format_doc â†’ END
    """</span>

    <span class="cm"># ============================================</span>
    <span class="cm"># 1. ã‚°ãƒ©ãƒ•ã‚’ä½œæˆï¼ˆStateã®å‹ã‚’æŒ‡å®šï¼‰</span>
    <span class="cm">#    â†’ ã“ã®å‹ã«å¾“ã£ã¦ãƒ‡ãƒ¼ã‚¿ãŒæµã‚Œã‚‹</span>
    <span class="cm"># ============================================</span>
    workflow = StateGraph(MeetingState)

    <span class="cm"># ============================================</span>
    <span class="cm"># 2. ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ </span>
    <span class="cm">#    add_node("è¡¨ç¤ºå", é–¢æ•°)</span>
    <span class="cm">#    è¡¨ç¤ºåã¯ã‚¨ãƒƒã‚¸æ¥ç¶šæ™‚ã«ä½¿ã†</span>
    <span class="cm"># ============================================</span>
    workflow.add_node(<span class="st">"summarize"</span>, summarize_node)
    workflow.add_node(<span class="st">"check_length"</span>, check_length_node)
    workflow.add_node(<span class="st">"extract_topics"</span>, extract_topics_node)
    workflow.add_node(<span class="st">"extract_actions"</span>, extract_actions_node)
    workflow.add_node(<span class="st">"format_doc"</span>, format_doc_node)

    <span class="cm"># ============================================</span>
    <span class="cm"># 3. ã‚¨ãƒƒã‚¸ã‚’è¿½åŠ ï¼ˆå›ºå®šã®æ¥ç¶šï¼‰</span>
    <span class="cm">#    START: å‡¦ç†ã®é–‹å§‹ç‚¹ï¼ˆç‰¹æ®ŠãªNodeï¼‰</span>
    <span class="cm">#    END: å‡¦ç†ã®çµ‚äº†ç‚¹ï¼ˆç‰¹æ®ŠãªNodeï¼‰</span>
    <span class="cm"># ============================================</span>
    workflow.add_edge(START, <span class="st">"summarize"</span>)        <span class="cm"># é–‹å§‹ â†’ è¦ç´„</span>
    workflow.add_edge(<span class="st">"summarize"</span>, <span class="st">"check_length"</span>)  <span class="cm"># è¦ç´„ â†’ é•·ã•ãƒã‚§ãƒƒã‚¯</span>

    <span class="cm"># ============================================</span>
    <span class="cm"># 4. æ¡ä»¶åˆ†å²ã‚’è¿½åŠ </span>
    <span class="cm">#    add_conditional_edges(åˆ†å²å…ƒ, æ¡ä»¶é–¢æ•°, ãƒãƒƒãƒ”ãƒ³ã‚°)</span>
    <span class="cm"># ============================================</span>
    workflow.add_conditional_edges(
        <span class="st">"check_length"</span>,     <span class="cm"># ã©ã®Nodeã‹ã‚‰åˆ†å²ã™ã‚‹ã‹</span>
        route_by_length,    <span class="cm"># æ¡ä»¶ã‚’åˆ¤å®šã™ã‚‹é–¢æ•°</span>
        {
            <span class="cm"># æ¡ä»¶é–¢æ•°ã®æˆ»ã‚Šå€¤ â†’ æ¬¡ã«é€²ã‚€Node</span>
            <span class="st">"detailed"</span>: <span class="st">"extract_topics"</span>,  <span class="cm"># é•·ã„ â†’ è­°é¡ŒæŠ½å‡ºã¸</span>
            <span class="st">"simple"</span>: <span class="st">"format_doc"</span>,       <span class="cm"># çŸ­ã„ â†’ æ•´å½¢ã¸ç›´è¡Œ</span>
        }
    )

    <span class="cm"># è©³ç´°ãƒ¢ãƒ¼ãƒ‰ã®ç¶šã: è­°é¡Œ â†’ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ â†’ æ•´å½¢</span>
    workflow.add_edge(<span class="st">"extract_topics"</span>, <span class="st">"extract_actions"</span>)
    workflow.add_edge(<span class="st">"extract_actions"</span>, <span class="st">"format_doc"</span>)

    <span class="cm"># æœ€å¾Œã¯å…¨ã¦ENDã¸</span>
    workflow.add_edge(<span class="st">"format_doc"</span>, END)

    <span class="cm"># ============================================</span>
    <span class="cm"># 5. compile()ã§å®Ÿè¡Œå¯èƒ½ãªã‚°ãƒ©ãƒ•ã«å¤‰æ›</span>
    <span class="cm"># ============================================</span>
    <span class="kw">return</span> workflow.compile()</pre>
                        </div>
                    </div>
                </div>

                <div class="highlight-box" style="background: #1a2634; border-left-color: var(--accent-cyan);">
                    <div class="highlight-title" style="color: var(--accent-cyan);">ğŸ§‘â€ğŸ’» AIã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢è¦–ç‚¹</div>
                    <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                        <li><strong>add_nodeã¯é †ç•ªä¸å•</strong>: ç™»éŒ²é †ã¯é–¢ä¿‚ãªãã€ã‚¨ãƒƒã‚¸ã§æ¥ç¶šé †ãŒæ±ºã¾ã‚‹</li>
                        <li><strong>compile()ã¯æœ€å¾Œã«1å›</strong>: å¤‰æ›´ã™ã‚‹ãŸã³ã«å†compileå¿…è¦</li>
                        <li><strong>ã‚°ãƒ©ãƒ•ã®å¯è¦–åŒ–</strong>: <code>graph.get_graph().draw_mermaid()</code>ã§å›³ã‚’å‡ºåŠ›å¯èƒ½</li>
                    </ul>
                </div>
            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—6 -->
            <div class="card" id="tut-step6">
                <div class="card-header">
                    <div class="card-icon green">â–¶ï¸</div>
                    <h3 class="card-title">Step 6: å®Ÿè¡Œã—ã¦ã¿ã‚‹</h3>
                    <span class="tag green" style="margin-left: auto;">å®Œæˆï¼</span>
                </div>

                <p>ã„ã‚ˆã„ã‚ˆå®Ÿè¡Œã§ã™ï¼ã‚µãƒ³ãƒ—ãƒ«ã®ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã§å‹•ä½œç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p>

                <div class="code-block">
                    <div class="code-header">Python - main.pyï¼ˆå®Ÿè¡Œéƒ¨åˆ†ã‚’è¿½åŠ ï¼‰</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span><span>46</span><span>47</span><span>48</span><span>49</span><span>50</span><span>51</span><span>52</span><span>53</span><span>54</span><span>55</span><span>56</span></div>
                        <div class="code-content">
<pre><span class="cm"># main.pyã®æœ«å°¾ã«è¿½åŠ </span>

<span class="kw">if</span> __name__ == <span class="st">"__main__"</span>:
    <span class="cm"># ============================================</span>
    <span class="cm"># ã‚µãƒ³ãƒ—ãƒ«ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆï¼ˆé•·ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰</span>
    <span class="cm"># å®Ÿéš›ã«ã¯Zoomã®æ–‡å­—èµ·ã“ã—ã‚„è­°äº‹ãƒ¡ãƒ¢ã‚’å…¥ã‚Œã‚‹</span>
    <span class="cm"># ============================================</span>
    sample_meeting = <span class="st">"""
    ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—ä¼šè­°ã€‘2024å¹´1æœˆ15æ—¥

    ç”°ä¸­: ä»Šé€±ã®é€²æ—ã‚’å ±å‘Šã—ã¾ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®UIæ”¹ä¿®ã¯80%å®Œäº†ã€‚
    æ®‹ã‚Šã¯ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã§ã™ã€‚æ¥é€±æ°´æ›œã¾ã§ã«å®Œäº†äºˆå®šã€‚

    éˆ´æœ¨: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®APIæ”¹ä¿®ã¯äºˆå®šã‚ˆã‚Šé…ã‚Œã¦ã„ã¾ã™ã€‚
    èªè¨¼å‘¨ã‚Šã§å•é¡ŒãŒç™ºç”Ÿã—ã€è§£æ±ºã«2æ—¥ã‹ã‹ã‚Šã¾ã—ãŸã€‚
    æ¥é€±é‡‘æ›œã¾ã§ã«ã¯å®Œäº†ã§ãã‚‹è¦‹è¾¼ã¿ã§ã™ã€‚

    å±±ç”°: QAãƒ†ã‚¹ãƒˆã®æº–å‚™ã¯å®Œäº†ã—ã¦ã„ã¾ã™ã€‚
    æ¥é€±æœˆæ›œã‹ã‚‰ãƒ†ã‚¹ãƒˆé–‹å§‹ã§ãã¾ã™ã€‚
    ãƒ†ã‚¹ãƒˆé …ç›®ã¯150ä»¶ã€3æ—¥é–“ã§å®Ÿæ–½äºˆå®šã§ã™ã€‚

    ç”°ä¸­: äºˆç®—ã«ã¤ã„ã¦ç¢ºèªã§ã™ã€‚è¿½åŠ ã§10ä¸‡å††å¿…è¦ã«ãªã‚Šãã†ã§ã™ã€‚
    ç†ç”±ã¯ã‚µãƒ¼ãƒãƒ¼å¢—å¼·ã®ãŸã‚ã€‚

    éˆ´æœ¨: æ‰¿èªã—ã¾ã™ã€‚çµŒç†ã«é€£çµ¡ã—ã¦ãŠãã¾ã™ã€‚

    æ¬¡å›ã®ä¼šè­°ã¯æ¥é€±æœˆæ›œ10æ™‚ã‹ã‚‰ã€‚
    """</span>

    <span class="cm"># ============================================</span>
    <span class="cm"># ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã—ã¦å®Ÿè¡Œ</span>
    <span class="cm"># ============================================</span>
    graph = create_meeting_graph()

    <span class="cm"># invoke()ã§å®Ÿè¡Œï¼ˆå…¥åŠ›ã¯dictã§æ¸¡ã™ï¼‰</span>
    result = graph.invoke({
        <span class="st">"raw_text"</span>: sample_meeting,  <span class="cm"># å¿…é ˆ: ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆ</span>
        <span class="st">"logs"</span>: []                    <span class="cm"># å¿…é ˆ: ç©ºãƒªã‚¹ãƒˆã§åˆæœŸåŒ–</span>
    })

    <span class="cm"># ============================================</span>
    <span class="cm"># çµæœã‚’è¡¨ç¤º</span>
    <span class="cm"># ============================================</span>
    <span class="bi">print</span>(<span class="st">"="</span> * <span class="cl">50</span>)
    <span class="bi">print</span>(<span class="st">"ã€ç”Ÿæˆã•ã‚ŒãŸè­°äº‹éŒ²ã€‘"</span>)
    <span class="bi">print</span>(<span class="st">"="</span> * <span class="cl">50</span>)
    <span class="bi">print</span>(result[<span class="st">"final_doc"</span>])

    <span class="bi">print</span>(<span class="st">"\nã€å‡¦ç†ãƒ­ã‚°ã€‘"</span>)
    <span class="kw">for</span> log <span class="kw">in</span> result[<span class="st">"logs"</span>]:
        <span class="bi">print</span>(<span class="st">f"  {log}"</span>)

    <span class="cm"># ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ãŸã„å ´åˆ</span>
    <span class="kw">with</span> <span class="bi">open</span>(<span class="st">"meeting_notes.md"</span>, <span class="st">"w"</span>) <span class="kw">as</span> f:
        f.write(result[<span class="st">"final_doc"</span>])
    <span class="bi">print</span>(<span class="st">"\nâœ… meeting_notes.md ã«ä¿å­˜ã—ã¾ã—ãŸ"</span>)</pre>
                        </div>
                    </div>
                </div>

                <div class="highlight-box success">
                    <div class="highlight-title">ğŸ“¤ å®Ÿè¡Œçµæœã®ä¾‹</div>
                    <div class="code-block" style="margin-top: 0.5rem; border-left: none;">
                        <div class="code-body" style="background: #0d1117;">
                            <div class="code-content">
<pre style="color: #e6edf3;"># è­°äº‹éŒ²
**ä½œæˆæ—¥æ™‚**: 2024-01-15 15:30

## è¦ç´„
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—ä¼šè­°ã§ã¯ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰UIæ”¹ä¿®ãŒ80%å®Œäº†ã—
æ¥é€±æ°´æ›œå®Œäº†äºˆå®šã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯èªè¨¼å•é¡Œã§é…å»¶ã€æ¥é€±é‡‘æ›œå®Œäº†è¦‹è¾¼ã¿ã€‚
QAãƒ†ã‚¹ãƒˆã¯æ¥é€±æœˆæ›œã‹ã‚‰3æ—¥é–“ã§150ä»¶å®Ÿæ–½äºˆå®šã€‚
ã‚µãƒ¼ãƒãƒ¼å¢—å¼·ã®ãŸã‚è¿½åŠ äºˆç®—10ä¸‡å††ãŒæ‰¿èªã•ã‚ŒãŸã€‚

## è­°é¡Œ
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰UIæ”¹ä¿®ã®é€²æ—
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIæ”¹ä¿®ã®é…å»¶
- QAãƒ†ã‚¹ãƒˆã®æº–å‚™çŠ¶æ³
- è¿½åŠ äºˆç®—ã®æ‰¿èª

## ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ 
- [ ] ç”°ä¸­: ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã‚’æ¥é€±æ°´æ›œã¾ã§ã«å®Œäº†
- [ ] éˆ´æœ¨: APIæ”¹ä¿®ã‚’æ¥é€±é‡‘æ›œã¾ã§ã«å®Œäº†
- [ ] éˆ´æœ¨: çµŒç†ã«è¿½åŠ äºˆç®—10ä¸‡å††ã‚’é€£çµ¡
- [ ] å±±ç”°: æ¥é€±æœˆæ›œã‹ã‚‰QAãƒ†ã‚¹ãƒˆé–‹å§‹</pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="highlight-box" style="background: #1a2634; border-left-color: var(--accent-cyan);">
                    <div class="highlight-title" style="color: var(--accent-cyan);">ğŸ§‘â€ğŸ’» æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</div>
                    <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                        <li><strong>Streamlitã§ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªåŒ–</strong>: ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›â†’è­°äº‹éŒ²ç”Ÿæˆã®UIã‚’ä½œã‚‹</li>
                        <li><strong>SlackãƒœãƒƒãƒˆåŒ–</strong>: ãƒãƒ£ãƒ³ãƒãƒ«ã®ä¼šè©±ã‚’è‡ªå‹•ã§è­°äº‹éŒ²åŒ–</li>
                        <li><strong>éŸ³å£°å…¥åŠ›å¯¾å¿œ</strong>: Whisper APIã§æ–‡å­—èµ·ã“ã—â†’è­°äº‹éŒ²åŒ–</li>
                        <li><strong>PDFã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</strong>: markdownã‹ã‚‰PDFã‚’ç”Ÿæˆã—ã¦é…å¸ƒ</li>
                    </ul>
                </div>

                <div class="highlight-box success" style="margin-top: 1.5rem;">
                    <div class="highlight-title">ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</div>
                    <p style="margin-bottom: 1rem;">LangGraphã‚’ä½¿ã£ãŸ<strong>è­°äº‹éŒ²è¦ç´„AI</strong>ãŒå®Œæˆã—ã¾ã—ãŸï¼</p>
                    <p style="color: var(--text-secondary);">å­¦ã‚“ã ã“ã¨:</p>
                    <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                        <li>State: Nodeé–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘æ¸¡ã™ç®±</li>
                        <li>Node: Stateã‚’å—ã‘å–ã‚Šã€æ›´æ–°ã‚’è¿”ã™é–¢æ•°</li>
                        <li>Edge: Nodeã®æ¥ç¶šï¼ˆå›ºå®š/æ¡ä»¶åˆ†å²ï¼‰</li>
                        <li>ã‚°ãƒ©ãƒ•: Node + Edge ã‚’çµ„ã¿åˆã‚ã›ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼</li>
                    </ul>
                </div>
            </div>

                </div><!-- /.tutorial-content -->

                <!-- å³å´: ã‚¹ãƒ†ã‚£ãƒƒã‚­ãƒ¼ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
                <div class="tutorial-sidebar">
                    <div class="tutorial-sidebar-title">ğŸ“ ç¾åœ¨ã®ä½ç½®</div>
                    <svg viewBox="0 0 280 400" class="sidebar-architecture-svg">
                        <defs>
                            <marker id="sidebarArr" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
                                <polygon points="0 0, 8 3, 0 6" fill="#667eea"/>
                            </marker>
                            <filter id="glowFilter" x="-50%" y="-50%" width="200%" height="200%">
                                <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                <feMerge>
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>

                        <!-- Step 1: ç’°å¢ƒæº–å‚™ï¼ˆä¸Šéƒ¨ï¼‰ -->
                        <g id="sidebar-step1" class="sidebar-step" data-step="1">
                            <rect x="90" y="15" width="100" height="40" rx="8" fill="#1a2634" stroke="#22543d" stroke-width="2"/>
                            <text x="140" y="40" text-anchor="middle" fill="#86efac" font-size="11">ç’°å¢ƒæº–å‚™</text>
                        </g>

                        <!-- çŸ¢å° -->
                        <line x1="140" y1="55" x2="140" y2="75" stroke="#667eea" stroke-width="2" marker-end="url(#sidebarArr)"/>

                        <!-- Step 2: State -->
                        <g id="sidebar-step2" class="sidebar-step" data-step="2">
                            <rect x="70" y="80" width="140" height="45" rx="8" fill="#1a2634" stroke="#22543d" stroke-width="2"/>
                            <text x="140" y="100" text-anchor="middle" fill="#86efac" font-size="11">State</text>
                            <text x="140" y="115" text-anchor="middle" fill="#4ade80" font-size="9">(å…±æœ‰ãƒ‡ãƒ¼ã‚¿æ§‹é€ )</text>
                        </g>

                        <!-- çŸ¢å° -->
                        <line x1="140" y1="125" x2="140" y2="145" stroke="#667eea" stroke-width="2" marker-end="url(#sidebarArr)"/>

                        <!-- Step 3: Nodeï¼ˆè¤‡æ•°ï¼‰ -->
                        <g id="sidebar-step3" class="sidebar-step" data-step="3">
                            <circle cx="70" cy="175" r="28" fill="#1a2634" stroke="#22543d" stroke-width="2"/>
                            <text x="70" y="172" text-anchor="middle" fill="#86efac" font-size="9">classifier</text>
                            <text x="70" y="184" text-anchor="middle" fill="#86efac" font-size="9">_node</text>

                            <circle cx="140" cy="175" r="28" fill="#1a2634" stroke="#22543d" stroke-width="2"/>
                            <text x="140" y="172" text-anchor="middle" fill="#86efac" font-size="9">responder</text>
                            <text x="140" y="184" text-anchor="middle" fill="#86efac" font-size="9">_node</text>

                            <circle cx="210" cy="175" r="28" fill="#1a2634" stroke="#22543d" stroke-width="2"/>
                            <text x="210" y="172" text-anchor="middle" fill="#86efac" font-size="9">handler</text>
                            <text x="210" y="184" text-anchor="middle" fill="#86efac" font-size="9">_nodes</text>
                        </g>

                        <!-- çŸ¢å° -->
                        <line x1="140" y1="205" x2="140" y2="225" stroke="#667eea" stroke-width="2" marker-end="url(#sidebarArr)"/>

                        <!-- Step 4: æ¡ä»¶åˆ†å² -->
                        <g id="sidebar-step4" class="sidebar-step" data-step="4">
                            <polygon points="140,230 175,260 140,290 105,260" fill="#1a2634" stroke="#22543d" stroke-width="2"/>
                            <text x="140" y="257" text-anchor="middle" fill="#86efac" font-size="9">æ¡ä»¶</text>
                            <text x="140" y="269" text-anchor="middle" fill="#86efac" font-size="9">åˆ†å²</text>
                        </g>

                        <!-- çŸ¢å° -->
                        <line x1="140" y1="290" x2="140" y2="310" stroke="#667eea" stroke-width="2" marker-end="url(#sidebarArr)"/>

                        <!-- Step 5: ã‚°ãƒ©ãƒ•çµ„ç«‹ -->
                        <g id="sidebar-step5" class="sidebar-step" data-step="5">
                            <rect x="60" y="315" width="160" height="40" rx="8" fill="#1a2634" stroke="#22543d" stroke-width="2"/>
                            <text x="140" y="340" text-anchor="middle" fill="#86efac" font-size="11">ã‚°ãƒ©ãƒ•çµ„ç«‹ (compile)</text>
                        </g>

                        <!-- çŸ¢å° -->
                        <line x1="140" y1="355" x2="140" y2="370" stroke="#667eea" stroke-width="2" marker-end="url(#sidebarArr)"/>

                        <!-- Step 6: å®Ÿè¡Œ -->
                        <g id="sidebar-step6" class="sidebar-step" data-step="6">
                            <rect x="80" y="375" width="120" height="35" rx="8" fill="#1a2634" stroke="#22543d" stroke-width="2"/>
                            <text x="140" y="397" text-anchor="middle" fill="#86efac" font-size="11">â–¶ å®Ÿè¡Œ</text>
                        </g>
                    </svg>
                    <div class="current-step-label" id="sidebarStepLabel">Step 1: ç’°å¢ƒæº–å‚™</div>
                </div>
            </div><!-- /.tutorial-layout -->

            <div class="highlight-box success" style="margin-top: 2rem;">
                <div class="highlight-title">ğŸ“ ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§å­¦ã‚“ã ã“ã¨</div>
                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <div class="step-title">State = å…±æœ‰ãƒ‡ãƒ¼ã‚¿</div>
                            <p>å…¨Nodeé–“ã§å…±æœ‰ã€‚TypedDictã§å‹å®šç¾©ã€‚Annotatedã§è‡ªå‹•ãƒãƒ¼ã‚¸ã€‚</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <div class="step-title">Node = å‡¦ç†å˜ä½</div>
                            <p>Stateã‚’å—ã‘å–ã‚Šã€éƒ¨åˆ†æ›´æ–°ã‚’è¿”ã™é–¢æ•°ã€‚</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <div class="step-title">æ¡ä»¶åˆ†å² = ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</div>
                            <p>Stateã®å€¤ã‚’è¦‹ã¦ã€æ¬¡ã®Nodeã‚’æ±ºå®šã€‚</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <div class="step-title">ã‚°ãƒ©ãƒ•æ§‹ç¯‰ = çµ„ã¿ç«‹ã¦</div>
                            <p>add_node â†’ add_edge â†’ add_conditional_edges â†’ compile</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ–
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                document.getElementById(tab.dataset.section).classList.add('active');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        });
        document.addEventListener('keydown', (e) => {
            const tabs = document.querySelectorAll('.nav-tab');
            const i = Array.from(tabs).findIndex(t => t.classList.contains('active'));
            if (e.key === 'ArrowRight' && i < tabs.length - 1) tabs[i + 1].click();
            if (e.key === 'ArrowLeft' && i > 0) tabs[i - 1].click();
        });

        // ãƒ•ãƒ­ãƒ¼å›³ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
        let currentFlowStep = 0;
        const maxFlowStep = 3;
        let autoPlayInterval = null;

        // ãƒãƒ¼ãƒ‰ã®è‰²è¨­å®š
        const nodeColors = {
            0: '#10b981', // START - green
            1: '#22c55e', // process - bright green
            2: '#8b5cf6', // output - purple
            3: '#ec4899'  // END - pink
        };

        function updateFlowDiagram() {
            // ãƒãƒ¼ãƒ‰ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            document.querySelectorAll('#flowSvg .flow-step').forEach(g => {
                const step = parseInt(g.dataset.step);
                const circle = g.querySelector('.node-circle');
                const color = nodeColors[step];

                if (step === currentFlowStep) {
                    // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒãƒ¼ãƒ‰ï¼šå…‰ã‚‰ã›ã‚‹
                    circle.classList.add('node-active');
                    circle.style.filter = `drop-shadow(0 0 15px ${color}) drop-shadow(0 0 30px ${color})`;
                    circle.style.fillOpacity = '0.8';
                    circle.style.strokeWidth = '4';
                } else if (step < currentFlowStep) {
                    // å®Œäº†ã—ãŸãƒãƒ¼ãƒ‰
                    circle.classList.remove('node-active');
                    circle.style.filter = 'none';
                    circle.style.fillOpacity = '0.6';
                    circle.style.strokeWidth = '3';
                } else {
                    // æœªå‡¦ç†ãƒãƒ¼ãƒ‰
                    circle.classList.remove('node-active');
                    circle.style.filter = 'none';
                    circle.style.fillOpacity = '0.2';
                    circle.style.strokeWidth = '2';
                }
            });

            // èª¬æ˜ãƒœãƒƒã‚¯ã‚¹ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('#flowSvg .state-box').forEach(g => {
                const step = parseInt(g.dataset.step);
                g.style.opacity = step === currentFlowStep ? '1' : '0';
                g.style.transition = 'opacity 0.5s ease';
            });

            // ã‚¹ãƒ†ãƒƒãƒ—è¡¨ç¤º
            const indicator = document.getElementById('flowStepIndicator');
            if (indicator) {
                indicator.textContent = `Step ${currentFlowStep} / ${maxFlowStep}`;
            }
        }

        document.getElementById('flowPrevBtn')?.addEventListener('click', () => {
            if (currentFlowStep > 0) {
                currentFlowStep--;
                updateFlowDiagram();
            }
        });

        document.getElementById('flowNextBtn')?.addEventListener('click', () => {
            if (currentFlowStep < maxFlowStep) {
                currentFlowStep++;
                updateFlowDiagram();
            }
        });

        document.getElementById('flowAutoBtn')?.addEventListener('click', function() {
            if (autoPlayInterval) {
                clearInterval(autoPlayInterval);
                autoPlayInterval = null;
                this.textContent = 'â–¶ è‡ªå‹•å†ç”Ÿ';
                this.style.background = 'linear-gradient(135deg, #06b6d4, #0891b2)';
            } else {
                currentFlowStep = 0;
                updateFlowDiagram();
                this.textContent = 'â¸ åœæ­¢';
                this.style.background = 'linear-gradient(135deg, #f97316, #ea580c)';
                autoPlayInterval = setInterval(() => {
                    if (currentFlowStep < maxFlowStep) {
                        currentFlowStep++;
                        updateFlowDiagram();
                    } else {
                        clearInterval(autoPlayInterval);
                        autoPlayInterval = null;
                        document.getElementById('flowAutoBtn').textContent = 'â–¶ è‡ªå‹•å†ç”Ÿ';
                        document.getElementById('flowAutoBtn').style.background = 'linear-gradient(135deg, #06b6d4, #0891b2)';
                    }
                }, 2000);
            }
        });

        // åˆæœŸè¡¨ç¤º
        updateFlowDiagram();

        // ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é€²è¡Œã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
        const tutorialSteps = {
            1: { icon: 'ğŸ“', name: 'ç’°å¢ƒæº–å‚™', desc: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«' },
            2: { icon: 'ğŸ“¦', name: 'Stateå®šç¾©', desc: 'å…±æœ‰ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’è¨­è¨ˆã™ã‚‹' },
            3: { icon: 'âš™ï¸', name: 'Nodeå®šç¾©', desc: 'å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã™ã‚‹' },
            4: { icon: 'ğŸ”€', name: 'æ¡ä»¶åˆ†å²', desc: 'ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½œã‚‹' },
            5: { icon: 'ğŸ”—', name: 'ã‚°ãƒ©ãƒ•çµ„ç«‹', desc: 'ã™ã¹ã¦ã‚’æ¥ç¶šã—ã¦ã‚°ãƒ©ãƒ•å®Œæˆ' },
            6: { icon: 'â–¶ï¸', name: 'å®Ÿè¡Œãƒ†ã‚¹ãƒˆ', desc: 'å‹•ä½œç¢ºèªã—ã¦å®Œæˆï¼' }
        };

        // ã‚µã‚¤ãƒ‰ãƒãƒ¼SVGã®æ›´æ–°é–¢æ•°
        function updateSidebarSVG(currentStep) {
            document.querySelectorAll('.sidebar-step').forEach(stepEl => {
                const stepNum = parseInt(stepEl.dataset.step);
                stepEl.classList.remove('active', 'completed');

                if (stepNum === currentStep) {
                    stepEl.classList.add('active');
                } else if (stepNum < currentStep) {
                    stepEl.classList.add('completed');
                }
            });

            // ãƒ©ãƒ™ãƒ«æ›´æ–°
            const label = document.getElementById('sidebarStepLabel');
            if (label && tutorialSteps[currentStep]) {
                label.textContent = `Step ${currentStep}: ${tutorialSteps[currentStep].name}`;
            }
        }

        // åˆæœŸåŒ–: ã‚µã‚¤ãƒ‰ãƒãƒ¼SVGã®Step 1ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
        updateSidebarSVG(1);

        document.querySelectorAll('.tut-step-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const step = parseInt(this.dataset.step);

                // ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«æ›´æ–°
                document.querySelectorAll('.tut-step-btn').forEach(b => {
                    b.style.border = '2px solid var(--border-color)';
                    b.style.background = 'transparent';
                    b.style.color = 'var(--text-secondary)';
                });
                this.style.border = '2px solid var(--accent-green)';
                this.style.background = 'rgba(34, 197, 94, 0.2)';
                this.style.color = 'var(--accent-green)';

                // æƒ…å ±æ›´æ–°
                document.getElementById('tutorialProgress').textContent = `Step ${step} / 6`;
                document.getElementById('tutorialIcon').textContent = tutorialSteps[step].icon;
                document.getElementById('tutorialStepName').textContent = tutorialSteps[step].name;
                document.getElementById('tutorialStepDesc').textContent = tutorialSteps[step].desc;

                // è©²å½“ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                const targetId = `tut-step${step}`;
                const target = document.getElementById(targetId);
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    target.style.animation = 'none';
                    setTimeout(() => {
                        target.style.animation = 'fadeIn 0.5s ease';
                    }, 10);
                }

                // ã‚µã‚¤ãƒ‰ãƒãƒ¼SVGã‚‚æ›´æ–°
                updateSidebarSVG(step);
            });
        });

        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§è‡ªå‹•æ›´æ–°
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const stepMatch = entry.target.id.match(/tut-step(\d)/);
                    if (stepMatch) {
                        const step = parseInt(stepMatch[1]);
                        document.querySelectorAll('.tut-step-btn').forEach(b => {
                            const btnStep = parseInt(b.dataset.step);
                            if (btnStep === step) {
                                b.style.border = '2px solid var(--accent-green)';
                                b.style.background = 'rgba(34, 197, 94, 0.2)';
                                b.style.color = 'var(--accent-green)';
                            } else {
                                b.style.border = '2px solid var(--border-color)';
                                b.style.background = 'transparent';
                                b.style.color = 'var(--text-secondary)';
                            }
                        });
                        document.getElementById('tutorialProgress').textContent = `Step ${step} / 6`;
                        document.getElementById('tutorialIcon').textContent = tutorialSteps[step].icon;
                        document.getElementById('tutorialStepName').textContent = tutorialSteps[step].name;
                        document.getElementById('tutorialStepDesc').textContent = tutorialSteps[step].desc;

                        // ã‚µã‚¤ãƒ‰ãƒãƒ¼SVGã‚‚æ›´æ–°
                        updateSidebarSVG(step);
                    }
                }
            });
        }, { threshold: 0.3 });

        document.querySelectorAll('[id^="tut-step"]').forEach(el => observer.observe(el));
    </script>
</body>
</html>
