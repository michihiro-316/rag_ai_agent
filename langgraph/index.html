

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LangGraph å®Œå…¨å­¦ç¿’ã‚¬ã‚¤ãƒ‰</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Qiitaé¢¨ã®æ˜ã‚‹ã„ãƒ†ãƒ¼ãƒ */
            --bg-dark: #f6f6f6;
            --bg-card: #ffffff;
            --bg-card-hover: #f8f9fa;
            --accent-green: #55c500;
            --accent-emerald: #10b981;
            --accent-teal: #14b8a6;
            --accent-cyan: #0ea5e9;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-orange: #f97316;
            --accent-pink: #ec4899;
            --text-primary: #333333;
            --text-secondary: #666666;
            --text-muted: #999999;
            --border-color: #e0e0e0;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.8;
            min-height: 100vh;
        }
        .header {
            background: #ffffff;
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }
        .logo { display: flex; align-items: center; gap: 1rem; }
        .logo-icon {
            width: 40px; height: 40px;
            background: var(--accent-green);
            border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.25rem;
        }
        .logo-text h1 {
            font-size: 1.25rem;
            color: var(--accent-green);
            font-weight: 700;
        }
        .logo-text span { font-size: 0.7rem; color: var(--text-muted); letter-spacing: 0.1em; }
        .nav-tabs { display: flex; gap: 0.25rem; flex-wrap: wrap; }
        .nav-tab {
            padding: 0.5rem 1rem;
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            border-radius: 0;
            color: var(--text-secondary);
            cursor: pointer;
            font-family: inherit;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        .nav-tab:hover {
            color: var(--accent-green);
            border-bottom-color: var(--accent-green);
        }
        .nav-tab.active {
            background: transparent;
            color: var(--accent-green);
            font-weight: 700;
            border-bottom: 2px solid var(--accent-green);
        }
        .main { max-width: 1400px; margin: 0 auto; padding: 2rem; }
        .section { display: none; animation: fadeIn 0.4s ease; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .section-header { margin-bottom: 3rem; text-align: center; }
        .section-number {
            display: inline-block; width: 48px; height: 48px;
            background: var(--accent-green);
            border-radius: 50%; line-height: 48px;
            font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem;
            color: #ffffff;
        }
        .section-title {
            font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem;
            color: var(--text-primary);
        }
        .section-subtitle { color: var(--text-secondary); font-size: 1rem; }
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            transition: all 0.2s ease;
        }
        .card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .card-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem; }
        .card-icon {
            width: 48px; height: 48px; border-radius: 12px;
            display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
        }
        .card-icon.green { background: rgba(34, 197, 94, 0.2); }
        .card-icon.emerald { background: rgba(16, 185, 129, 0.2); }
        .card-icon.blue { background: rgba(59, 130, 246, 0.2); }
        .card-icon.purple { background: rgba(139, 92, 246, 0.2); }
        .card-icon.orange { background: rgba(249, 115, 22, 0.2); }
        .card-title { font-size: 1.5rem; font-weight: 700; }
        .code-block {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 12px;
            margin: 1.5rem 0;
            overflow: hidden;
        }
        .code-header {
            background: #161b22;
            padding: 0.6rem 1rem;
            border-bottom: 1px solid #30363d;
            font-size: 0.75rem;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
        }
        .code-body { display: flex; }
        .line-nums {
            padding: 1rem 0;
            background: #0d1117;
            border-right: 1px solid #30363d;
            text-align: right;
            user-select: none;
            color: #484f58;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
        }
        .line-nums span { display: block; padding: 0 0.75rem; }
        .code-content {
            flex: 1;
            padding: 1rem 1.25rem;
            overflow-x: auto;
        }
        .code-content pre {
            margin: 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            color: #e6edf3;
            white-space: pre;
        }
        .cm { color: #8b949e; }
        .kw { color: #ff7b72; }
        .st { color: #a5d6ff; }
        .fn { color: #d2a8ff; }
        .cl { color: #79c0ff; }
        .bi { color: #ffa657; }
        .diagram-container {
            background: #ffffff;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
        }
        .diagram-title {
            text-align: center;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }
        .svg-diagram { width: 100%; max-width: 900px; margin: 0 auto; display: block; }

        /* SVGã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes nodeGlow {
            0%, 100% { filter: drop-shadow(0 0 8px #22c55e); }
            50% { filter: drop-shadow(0 0 25px #22c55e) drop-shadow(0 0 50px #22c55e); }
        }
        @keyframes nodePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }
        @keyframes flowDash {
            to { stroke-dashoffset: -30; }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes borderPulse {
            0%, 100% { stroke-width: 2; }
            50% { stroke-width: 4; }
        }
        .svg-node-animated {
            animation: nodePulse 2s ease-in-out infinite;
            transform-origin: center;
        }
        .svg-flow-animated {
            stroke-dasharray: 15 8;
            animation: flowDash 0.8s linear infinite;
        }
        .svg-glow {
            animation: nodeGlow 1.5s ease-in-out infinite;
        }
        .node-circle {
            transition: all 0.5s ease;
        }
        .node-active {
            animation: nodeGlow 1.5s ease-in-out infinite, nodePulse 2s ease-in-out infinite;
        }
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; }
        .concept-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }
        .concept-icon { font-size: 3rem; margin-bottom: 1rem; }
        .concept-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; }
        .concept-desc { color: var(--text-secondary); font-size: 0.9rem; }
        .tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .tag.green { background: rgba(34, 197, 94, 0.2); color: var(--accent-green); }
        .tag.emerald { background: rgba(16, 185, 129, 0.2); color: var(--accent-emerald); }
        .tag.blue { background: rgba(59, 130, 246, 0.2); color: var(--accent-blue); }
        .tag.purple { background: rgba(139, 92, 246, 0.2); color: var(--accent-purple); }
        .tag.orange { background: rgba(249, 115, 22, 0.2); color: var(--accent-orange); }
        .highlight-box {
            background: #f8f9fa;
            border: 1px solid var(--border-color);
            border-left: 4px solid var(--accent-green);
            border-radius: 0 8px 8px 0;
            padding: 1.25rem;
            margin: 1rem 0;
        }
        .highlight-box.warning { border-left-color: var(--accent-orange); background: #fff8f5; }
        .highlight-box.success { border-left-color: var(--accent-green); background: #f5fff8; }
        .highlight-title { font-weight: 700; color: var(--accent-green); margin-bottom: 0.5rem; }
        table { width: 100%; border-collapse: collapse; font-size: 0.9rem; margin: 1rem 0; }
        th, td { padding: 1rem; text-align: left; border-bottom: 1px solid var(--border-color); }
        th { background: rgba(34, 197, 94, 0.2); font-weight: 600; color: var(--accent-green); }
        code:not(pre code) {
            background: rgba(34, 197, 94, 0.2);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85em;
            color: var(--accent-green);
        }
        .steps { display: flex; flex-direction: column; gap: 1.5rem; }
        .step { display: flex; gap: 1.5rem; align-items: flex-start; }
        .step-number {
            width: 40px; height: 40px;
            background: linear-gradient(135deg, #22c55e, #10b981);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: 700; flex-shrink: 0;
            color: #ffffff;
            box-shadow: 0 4px 10px rgba(34, 197, 94, 0.4);
        }
        .step-title { font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); }

        /* å®Ÿè·µã‚»ã‚¯ã‚·ãƒ§ãƒ³2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
        .tutorial-layout {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 2rem;
            align-items: start;
        }
        .tutorial-content {
            min-width: 0;
        }
        .tutorial-sidebar {
            position: sticky;
            top: 100px;
            background: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 1rem;
            max-height: calc(100vh - 120px);
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        .tutorial-sidebar-title {
            color: #22c55e;
            font-weight: 700;
            margin-bottom: 1rem;
            font-size: 0.85rem;
            text-align: center;
        }
        .tutorial-sidebar svg {
            width: 100%;
            height: auto;
        }
        .tutorial-sidebar .current-step-label {
            text-align: center;
            margin-top: 1rem;
            padding: 0.75rem;
            background: rgba(34, 197, 94, 0.2);
            border-radius: 8px;
            color: var(--accent-green);
            font-weight: 700;
            font-size: 0.85rem;
        }
        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼SVGã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .sidebar-step rect,
        .sidebar-step circle,
        .sidebar-step polygon,
        .sidebar-step line {
            transition: all 0.4s ease;
        }
        .sidebar-step.active rect,
        .sidebar-step.active circle,
        .sidebar-step.active polygon {
            fill: rgba(34, 197, 94, 0.3) !important;
            stroke: #22c55e !important;
            stroke-width: 3 !important;
            filter: drop-shadow(0 0 8px #22c55e) drop-shadow(0 0 16px #22c55e);
        }
        .sidebar-step.active line {
            stroke: #22c55e !important;
            filter: drop-shadow(0 0 4px #22c55e);
        }
        .sidebar-step.active text {
            fill: #22c55e !important;
            font-weight: bold;
        }
        .sidebar-step.completed rect,
        .sidebar-step.completed circle,
        .sidebar-step.completed polygon {
            fill: rgba(16, 185, 129, 0.2) !important;
            stroke: #10b981 !important;
        }
        .sidebar-step.completed line {
            stroke: #10b981 !important;
        }
        .sidebar-step.completed text {
            fill: #10b981 !important;
        }
        @keyframes sidebarPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        .sidebar-step.active {
            animation: sidebarPulse 1.5s ease-in-out infinite;
            transform-origin: center;
        }
        /* Step 3 å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ */
        .step3-rect {
            fill: #f8f9fa;
            stroke: #667eea;
            stroke-width: 2;
        }
        .step3-text {
            fill: #333333;
        }
        .step3-title {
            fill: #333333;
        }
        .step3-line {
            stroke: #667eea;
            stroke-width: 1.5;
        }
        /* Step 3 ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ™‚ */
        .sidebar-step.active .step3-rect {
            fill: rgba(34, 197, 94, 0.3) !important;
            stroke: #22c55e !important;
            stroke-width: 3 !important;
            filter: drop-shadow(0 0 8px #22c55e) drop-shadow(0 0 16px #22c55e);
        }
        .sidebar-step.active .step3-text,
        .sidebar-step.active .step3-title {
            fill: #22c55e !important;
            font-weight: bold;
        }
        .sidebar-step.active .step3-line {
            stroke: #22c55e !important;
            stroke-width: 2 !important;
            filter: drop-shadow(0 0 4px #22c55e);
        }
        /* Step 3 å®Œäº†æ™‚ */
        .sidebar-step.completed .step3-rect {
            fill: rgba(16, 185, 129, 0.2) !important;
            stroke: #10b981 !important;
        }
        .sidebar-step.completed .step3-text,
        .sidebar-step.completed .step3-title {
            fill: #10b981 !important;
        }
        .sidebar-step.completed .step3-line {
            stroke: #10b981 !important;
        }

        /* Step 3 ã‚µãƒ–ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆå€‹åˆ¥ãƒãƒ¼ãƒ‰ï¼‰ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ */
        .substep-node.substep-active .step3-rect {
            fill: rgba(34, 197, 94, 0.3) !important;
            stroke: #22c55e !important;
            stroke-width: 3 !important;
            filter: drop-shadow(0 0 8px #22c55e) drop-shadow(0 0 16px #22c55e);
        }
        .substep-node.substep-active .step3-text {
            fill: #22c55e !important;
            font-weight: bold;
        }
        /* Step 3 ã‚µãƒ–ã‚¹ãƒ†ãƒƒãƒ—ã®å®Œäº†çŠ¶æ…‹ */
        .substep-node.substep-completed .step3-rect {
            fill: rgba(16, 185, 129, 0.2) !important;
            stroke: #10b981 !important;
            stroke-width: 2 !important;
            filter: none !important;
        }
        .substep-node.substep-completed .step3-text {
            fill: #10b981 !important;
            font-weight: normal !important;
        }

        @media (max-width: 1024px) {
            .tutorial-layout {
                grid-template-columns: 1fr;
            }
            .tutorial-sidebar {
                position: relative;
                top: 0;
                max-height: none;
                order: -1;
                margin-bottom: 2rem;
            }
        }
        @media (max-width: 768px) {
            .header-content { flex-direction: column; }
            .section-title { font-size: 1.75rem; }

            /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ– */
            .nav-tabs {
                flex-wrap: wrap;
                gap: 0.5rem;
                justify-content: center;
            }
            .nav-tab {
                font-size: 0.75rem;
                padding: 0.5rem 0.75rem;
            }

            /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
            .main {
                padding: 1rem;
            }

            /* ã‚«ãƒ¼ãƒ‰ */
            .card {
                padding: 1.25rem;
            }
            .card-title {
                font-size: 1.1rem;
            }

            /* ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ - æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œ */
            .code-block {
                margin: 1rem -1.25rem;
                border-radius: 0;
            }
            .code-body {
                font-size: 0.75rem;
            }
            .code-content pre {
                white-space: pre;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            .line-nums {
                font-size: 0.7rem;
                padding: 1rem 0.5rem;
            }

            /* ãƒã‚¤ãƒ©ã‚¤ãƒˆãƒœãƒƒã‚¯ã‚¹ */
            .highlight-box {
                padding: 1rem;
            }

            /* SVGå›³ */
            .svg-diagram {
                max-width: 100%;
            }
            .diagram-container {
                padding: 1rem;
                overflow-x: auto;
            }
        }

        /* ã‚¹ãƒãƒ›å‘ã‘è¿½åŠ ã‚¹ã‚¿ã‚¤ãƒ« (480pxä»¥ä¸‹) */
        @media (max-width: 480px) {
            /* ãƒ˜ãƒƒãƒ€ãƒ¼ - ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã« */
            .header {
                padding: 0.5rem 1rem;
            }
            .logo-text h1 {
                font-size: 1rem;
            }
            .logo-text span {
                font-size: 0.55rem;
            }
            .logo-icon {
                font-size: 1.5rem;
                padding: 0.4rem;
            }
            .logo {
                gap: 0.5rem;
            }

            /* ãƒŠãƒ“ã‚¿ãƒ– - æŠ˜ã‚ŠãŸãŸã¿å¼ */
            .nav-tabs {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--bg-card);
                border-top: 1px solid var(--border-color);
                padding: 0.75rem;
                flex-direction: column;
                gap: 0.5rem;
                z-index: 1000;
                box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            }
            .nav-tabs.mobile-open {
                display: flex;
            }
            .nav-tab {
                font-size: 0.8rem;
                padding: 0.6rem 1rem;
                text-align: left;
                width: 100%;
            }
            .header-content {
                position: relative;
            }

            /* ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ */
            .mobile-menu-btn {
                display: flex !important;
            }

            /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ - ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆ */
            .section-header {
                padding: 1rem 0.75rem;
            }
            .section-number {
                font-size: 2rem;
            }
            .section-title {
                font-size: 1.1rem;
            }
            .section-subtitle {
                font-size: 0.75rem;
            }

            /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
            .main {
                padding: 0.5rem;
            }

            /* ã‚«ãƒ¼ãƒ‰ - ã‚ˆã‚Šã‚³ãƒ³ãƒ‘ã‚¯ãƒˆ */
            .card {
                padding: 0.75rem;
                margin-bottom: 0.75rem;
            }
            .card-header {
                gap: 0.5rem;
                margin-bottom: 0.5rem;
            }
            .card-icon {
                width: 32px;
                height: 32px;
                font-size: 1rem;
            }
            .card-title {
                font-size: 0.95rem;
            }

            /* æœ¬æ–‡ãƒ†ã‚­ã‚¹ãƒˆ */
            .card p, .highlight-box p {
                font-size: 0.8rem;
                line-height: 1.5;
            }

            /* ãƒã‚¤ãƒ©ã‚¤ãƒˆãƒœãƒƒã‚¯ã‚¹ */
            .highlight-box {
                padding: 0.75rem;
                margin: 0.5rem 0;
            }
            .highlight-title {
                font-size: 0.85rem;
                margin-bottom: 0.3rem;
            }

            /* ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚¹ãƒ†ãƒƒãƒ—ãƒœã‚¿ãƒ³ - 2è¡Œã« */
            .tut-step-buttons {
                display: grid !important;
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 0.3rem !important;
            }
            .tut-step-btn {
                min-width: unset !important;
                font-size: 0.6rem !important;
                padding: 0.3rem !important;
            }

            /* ä¼šç¤¾ã®ä¾‹ãˆ - ç¸¦ä¸¦ã³ */
            [style*="grid-template-columns: 1fr 60px 1fr"] {
                grid-template-columns: 1fr !important;
                gap: 0.5rem !important;
            }
            [style*="text-align: center; color: var(--accent-green); font-size: 1.5rem"] {
                transform: rotate(90deg);
                margin: 0.25rem 0;
                font-size: 1rem !important;
            }

            /* ã‚«ãƒ¼ãƒ‰å†…ã®ã‚°ãƒªãƒƒãƒ‰ */
            [style*="grid-template-columns: repeat(auto-fit"] {
                grid-template-columns: 1fr !important;
            }

            /* ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ - æ¥µå° */
            .code-block {
                margin: 0.5rem -0.75rem;
            }
            .code-header {
                font-size: 0.65rem;
                padding: 0.4rem 0.75rem;
            }
            .code-body {
                font-size: 0.55rem;
            }
            .line-nums {
                display: none;
            }
            .code-content {
                padding: 0.5rem 0.75rem;
            }
            .code-content pre {
                line-height: 1.4;
            }

            /* ã‚¿ã‚° */
            .tag {
                font-size: 0.55rem;
                padding: 0.15rem 0.4rem;
            }

            /* SVGå›³ */
            .diagram-container {
                padding: 0.5rem;
            }
            .diagram-title {
                font-size: 0.8rem;
            }

            /* é€²è¡ŒçŠ¶æ³ã‚«ãƒ¼ãƒ‰ */
            #tutorialProgress {
                font-size: 0.7rem !important;
            }
            #tutorialIcon {
                font-size: 1.5rem !important;
            }
            #tutorialStepName {
                font-size: 0.85rem !important;
            }
            #tutorialStepDesc {
                font-size: 0.7rem !important;
            }
        }

        /* ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆéè¡¨ç¤ºï¼‰ */
        .mobile-menu-btn {
            display: none;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            background: transparent;
            border: 2px solid var(--accent-green);
            border-radius: 8px;
            cursor: pointer;
            color: var(--accent-green);
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">ğŸ”—</div>
                <div class="logo-text">
                    <h1>LangGraph å®Œå…¨å­¦ç¿’ã‚¬ã‚¤ãƒ‰</h1>
                    <span>FOR AI AGENT DEVELOPMENT</span>
                </div>
            </div>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼">â˜°</button>
            <nav class="nav-tabs" id="navTabs">
                <button class="nav-tab active" data-section="intro">æ¦‚è¦</button>
                <button class="nav-tab" data-section="basics">åŸºç¤æ¦‚å¿µ</button>
                <button class="nav-tab" data-section="minimal">æœ€å°æ§‹æˆ</button>
                <button class="nav-tab" data-section="branch">æ¡ä»¶åˆ†å²</button>
                <button class="nav-tab" data-section="state">Stateç®¡ç†</button>
                <button class="nav-tab" data-section="project">å®Ÿè·µ</button>
                <button class="nav-tab" data-section="deploy">ãƒ‡ãƒ—ãƒ­ã‚¤</button>
                <button class="nav-tab" data-section="design">è¨­è¨ˆç›¸è«‡</button>
            </nav>
        </div>
    </header>

    <main class="main">
        <!-- æ¦‚è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section active" id="intro">
            <div class="section-header">
                <div class="section-number">1</div>
                <h2 class="section-title">LangGraphã¨ã¯ä½•ã‹</h2>
                <p class="section-subtitle">LangChainå­¦ç¿’æ¸ˆã¿ã®æ–¹å‘ã‘ã«è§£èª¬</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon blue">ğŸ¤”</div>
                    <h3 class="card-title">ãªãœLangGraphã‚’å­¦ã¶ã®ã‹ï¼Ÿ</h3>
                </div>
                <p>AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œã‚‹ã¨ãã€ã“ã‚“ãªçµŒé¨“ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ</p>
                <div class="highlight-box warning" style="margin: 1rem 0;">
                    <p>ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã«ã‚ˆã£ã¦ã€é•ã†å‡¦ç†ã‚’ã—ãŸã„...ã€</p>
                    <p>ã€Œè¤‡æ•°ã®AIã‚’é€£æºã•ã›ã¦ã€ã‚‚ã£ã¨è³¢ã„ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½œã‚ŠãŸã„...ã€</p>
                    <p>ã€Œã‚¨ãƒ©ãƒ¼ãŒèµ·ããŸã‚‰ã€ãƒªãƒˆãƒ©ã‚¤ã—ãŸã„...ã€</p>
                </div>
                <p><strong>LangGraph</strong>ã¯ã€ã“ã‚Œã‚‰ã™ã¹ã¦ã‚’<strong>ã‚·ãƒ³ãƒ—ãƒ«ãªã‚³ãƒ¼ãƒ‰</strong>ã§å®Ÿç¾ã§ãã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon orange">âš ï¸</div>
                    <h3 class="card-title">LangChainã ã‘ã§ã¯é™ç•ŒãŒã‚ã‚‹</h3>
                </div>
                <p>LangChainã®LCELã¯<strong>ç›´ç·šçš„ãªå‡¦ç†</strong>ã«å¼·ã„ã§ã™ï¼š</p>
                <div class="code-block">
                    <div class="code-header">Python - LangChainã®åŸºæœ¬ï¼ˆLCELï¼‰</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span></div>
                        <div class="code-content">
<pre><span class="cm"># LCEL: ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆç›´ç·šçš„ãªæµã‚Œï¼‰</span>
<span class="cm"># å…¥åŠ› â†’ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ â†’ LLM â†’ ãƒ‘ãƒ¼ã‚µãƒ¼ â†’ å‡ºåŠ›</span>
chain = prompt | llm | output_parser

<span class="cm"># å®Ÿè¡Œï¼ˆã‚·ãƒ³ãƒ—ãƒ«ï¼ï¼‰</span>
result = chain.invoke({<span class="st">"question"</span>: <span class="st">"ä»Šæ—¥ã®å¤©æ°—ã¯ï¼Ÿ"</span>})</pre>
                        </div>
                    </div>
                </div>
                <p style="margin-top: 1rem;">ã“ã®ã€Œãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã€ã¯ç°¡å˜ã§åˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ãŒ...</p>
                <div class="highlight-box" style="margin: 1rem 0;">
                    <div class="highlight-title">ğŸ˜° LCELã ã‘ã§ã¯é›£ã—ã„ã“ã¨</div>
                    <ul style="margin: 0.5rem 0 0 1.5rem;">
                        <li><strong>æ¡ä»¶åˆ†å²</strong>ï¼šã€Œå¤©æ°—ã®è³ªå•ã€ã¨ã€Œãƒ‹ãƒ¥ãƒ¼ã‚¹ã®è³ªå•ã€ã§é•ã†å‡¦ç†ã‚’ã—ãŸã„</li>
                        <li><strong>ãƒ«ãƒ¼ãƒ—</strong>ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæº€è¶³ã™ã‚‹ã¾ã§ç¹°ã‚Šè¿”ã—ãŸã„</li>
                        <li><strong>ä¸¦åˆ—å‡¦ç†</strong>ï¼šè¤‡æ•°ã®APIã‚’åŒæ™‚ã«å‘¼ã³ãŸã„</li>
                        <li><strong>çŠ¶æ…‹ç®¡ç†</strong>ï¼šä¼šè©±å±¥æ­´ã‚’æŒã¡å›ã‚ŠãŸã„</li>
                    </ul>
                </div>
                <p><strong>â†’ ã“ã‚Œã‚‰ã‚’è§£æ±ºã™ã‚‹ã®ãŒLangGraphã§ã™ï¼</strong></p>
            </div>

            <!-- LangGraphã®3è¦ç´  -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">ğŸ¯</div>
                    <h3 class="card-title">LangGraphã®3è¦ç´ ï¼šStateãƒ»Nodeãƒ»Edge</h3>
                </div>
                <div class="diagram-container">
                    <div class="diagram-title">Stateã‚’æŒã¡é‹ã³ãªãŒã‚‰Nodeã‚’é †ç•ªã«å®Ÿè¡Œã™ã‚‹</div>
                    <svg class="svg-diagram" viewBox="0 0 800 350">
                        <defs>
                            <marker id="arr1" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
                            </marker>
                        </defs>

                        <!-- å·¦å´ï¼šãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å›³ -->
                        <text x="180" y="25" text-anchor="middle" fill="#667eea" font-size="16" font-weight="700">ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®æµã‚Œ</text>

                        <!-- Stateï¼ˆã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ï¼‰- ä¸­å¤®ã«å¤§ãã -->
                        <rect x="110" y="50" width="140" height="80" rx="12" fill="#10b981" fill-opacity="0.15" stroke="#10b981" stroke-width="3"/>
                        <text x="180" y="80" text-anchor="middle" fill="#10b981" font-size="14" font-weight="700">Stateï¼ˆçŠ¶æ…‹ï¼‰</text>
                        <text x="180" y="100" text-anchor="middle" fill="#333333" font-size="11">ãƒ‡ãƒ¼ã‚¿ã‚’æŒã¡é‹ã¶ç®±</text>
                        <text x="180" y="118" text-anchor="middle" fill="#333333" font-size="10">{ message, result, ... }</text>

                        <!-- Node A -->
                        <circle cx="80" cy="220" r="40" fill="#667eea" fill-opacity="0.2" stroke="#667eea" stroke-width="3"/>
                        <text x="80" y="215" text-anchor="middle" fill="#333333" font-size="11" font-weight="600">Node A</text>
                        <text x="80" y="232" text-anchor="middle" fill="#a5b4fc" font-size="9">è¦ç´„ã™ã‚‹</text>

                        <!-- Node B -->
                        <circle cx="180" cy="300" r="40" fill="#f97316" fill-opacity="0.2" stroke="#f97316" stroke-width="3"/>
                        <text x="180" y="295" text-anchor="middle" fill="#333333" font-size="11" font-weight="600">Node B</text>
                        <text x="180" y="312" text-anchor="middle" fill="#fdba74" font-size="9">åˆ†é¡ã™ã‚‹</text>

                        <!-- Node C -->
                        <circle cx="280" cy="220" r="40" fill="#ec4899" fill-opacity="0.2" stroke="#ec4899" stroke-width="3"/>
                        <text x="280" y="215" text-anchor="middle" fill="#333333" font-size="11" font-weight="600">Node C</text>
                        <text x="280" y="232" text-anchor="middle" fill="#f9a8d4" font-size="9">æ•´å½¢ã™ã‚‹</text>

                        <!-- Edgeï¼ˆçŸ¢å°ï¼‰-->
                        <line x1="115" y1="200" x2="150" y2="265" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arr1)"/>
                        <line x1="210" y1="270" x2="250" y2="240" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arr1)"/>

                        <!-- Stateã‹ã‚‰Nodeã¸ã®ç‚¹ç·šï¼ˆStateãŒå…¨ä½“ã‚’åŒ…ã‚“ã§ã„ã‚‹ã“ã¨ã‚’ç¤ºã™ï¼‰ -->
                        <line x1="180" y1="130" x2="80" y2="175" stroke="#10b981" stroke-width="2" stroke-dasharray="4,4"/>
                        <line x1="180" y1="130" x2="280" y2="175" stroke="#10b981" stroke-width="2" stroke-dasharray="4,4"/>

                        <!-- Edgeãƒ©ãƒ™ãƒ« -->
                        <text x="120" y="235" fill="#8b5cf6" font-size="10" font-weight="600">Edge</text>
                        <text x="235" y="265" fill="#8b5cf6" font-size="10" font-weight="600">Edge</text>

                        <!-- å³å´ï¼šèª¬æ˜ -->
                        <line x1="380" y1="50" x2="380" y2="320" stroke="#e5e7eb" stroke-width="2" stroke-dasharray="5,5"/>
                        <text x="590" y="25" text-anchor="middle" fill="#667eea" font-size="16" font-weight="700">ãã‚Œãã‚Œã®å½¹å‰²</text>

                        <!-- Stateèª¬æ˜ -->
                        <rect x="420" y="50" width="340" height="70" rx="10" fill="#10b981" fill-opacity="0.1" stroke="#10b981" stroke-width="2"/>
                        <rect x="440" y="70" width="35" height="30" rx="4" fill="#10b981" fill-opacity="0.3" stroke="#10b981" stroke-width="2"/>
                        <text x="458" y="90" text-anchor="middle" fill="#10b981" font-size="12">{ }</text>
                        <text x="495" y="80" fill="#10b981" font-size="14" font-weight="700">Stateï¼ˆçŠ¶æ…‹ï¼‰</text>
                        <text x="495" y="100" fill="#6b7280" font-size="12">= å…¨Nodeã§å…±æœ‰ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®ç®±</text>

                        <!-- Nodeèª¬æ˜ -->
                        <rect x="420" y="135" width="340" height="70" rx="10" fill="white" stroke="#667eea" stroke-width="2"/>
                        <circle cx="458" cy="170" r="18" fill="#667eea" fill-opacity="0.2" stroke="#667eea" stroke-width="2"/>
                        <text x="495" y="162" fill="#667eea" font-size="14" font-weight="700">Nodeï¼ˆãƒãƒ¼ãƒ‰ï¼‰</text>
                        <text x="495" y="182" fill="#6b7280" font-size="12">= å‡¦ç†ã‚’è¡Œã†é–¢æ•°ï¼ˆè¦ç´„ã€åˆ†é¡ãªã©ï¼‰</text>

                        <!-- Edgeèª¬æ˜ -->
                        <rect x="420" y="220" width="340" height="70" rx="10" fill="white" stroke="#8b5cf6" stroke-width="2"/>
                        <line x1="438" y1="255" x2="478" y2="255" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arr1)"/>
                        <text x="495" y="247" fill="#8b5cf6" font-size="14" font-weight="700">Edgeï¼ˆã‚¨ãƒƒã‚¸ï¼‰</text>
                        <text x="495" y="267" fill="#6b7280" font-size="12">= Nodeé–“ã®æ¥ç¶šï¼ˆæ¬¡ã«ã©ã“ã¸è¡Œãã‹ï¼‰</text>

                        <!-- ã¾ã¨ã‚ -->
                        <rect x="420" y="305" width="340" height="35" rx="6" fill="#f8f9fa" stroke="#22c55e" stroke-width="1"/>
                        <text x="590" y="327" text-anchor="middle" fill="#333333" font-size="11">Stateã‚’æŒã£ã¦ã€Edgeã«æ²¿ã£ã¦ã€Nodeã‚’é †ç•ªã«å®Ÿè¡Œ</text>
                    </svg>
                </div>
            </div>
        </section>

        <!-- åŸºç¤æ¦‚å¿µã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="basics">
            <div class="section-header">
                <div class="section-number">2</div>
                <h2 class="section-title">åŸºç¤æ¦‚å¿µã®æ·±å €ã‚Š</h2>
                <p class="section-subtitle">State, Node, Edgeã‚’è©³ã—ãç†è§£ã™ã‚‹</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">ğŸ“¦</div>
                    <h3 class="card-title">Stateï¼ˆçŠ¶æ…‹ï¼‰ã¨ã¯ï¼Ÿ</h3>
                </div>
                <p>Stateã¯<strong>å…¨é ‚ç‚¹ï¼ˆNodeï¼‰ã§å…±æœ‰ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ </strong>ã§ã™ã€‚</p>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span></div>
                        <div class="code-content">
<pre><span class="kw">from</span> typing <span class="kw">import</span> TypedDict

<span class="kw">class</span> <span class="cl">ChatState</span>(TypedDict):
    <span class="st">"""å…¨é ‚ç‚¹ã§å…±æœ‰ã•ã‚Œã‚‹çŠ¶æ…‹"""</span>
    user_message: <span class="cl">str</span>      <span class="cm"># ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•</span>
    intent: <span class="cl">str</span>            <span class="cm"># æ„å›³åˆ†é¡çµæœ</span>
    response: <span class="cl">str</span>          <span class="cm"># æœ€çµ‚å›ç­”</span></pre>
                        </div>
                    </div>
                </div>
                <div class="highlight-box success">
                    <div class="highlight-title">ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ</div>
                    <p>Stateã¯<strong>ã€Œä¼šç¤¾ã‚’å›è¦§ã™ã‚‹ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã€</strong>ã®ã‚ˆã†ãªã‚‚ã®ã€‚<br>
                    å„ç¤¾å“¡ï¼ˆNodeï¼‰ãŒé †ç•ªã«è‡ªåˆ†ã®æ‹…å½“æ¬„ã‚’åŸ‹ã‚ã¦ã€æ¬¡ã®äººã«å›ã—ã¦ã„ãã¾ã™ã€‚<br>
                    æœ€å¾Œã«ã¯å…¨æ¬„ãŒåŸ‹ã¾ã£ãŸå®Œæˆç‰ˆã«ãªã‚Šã¾ã™ã€‚</p>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon emerald">âš™ï¸</div>
                    <h3 class="card-title">Nodeï¼ˆé ‚ç‚¹ï¼‰ã¨ã¯ï¼Ÿ</h3>
                </div>
                <p>Nodeã¯<strong>Stateã‚’å—ã‘å–ã‚Šã€æ›´æ–°å†…å®¹ã‚’è¿”ã™é–¢æ•°</strong>ã§ã™ã€‚</p>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span></div>
                        <div class="code-content">
<pre><span class="kw">def</span> <span class="fn">router_node</span>(state: <span class="cl">ChatState</span>) -> <span class="cl">dict</span>:
    <span class="st">"""ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ã‚’åˆ†é¡ã™ã‚‹é ‚ç‚¹"""</span>
    msg = state[<span class="st">"user_message"</span>]

    <span class="cm"># æ„å›³ã‚’åˆ¤å®š</span>
    <span class="kw">if</span> <span class="st">"ãƒ‡ãƒ¼ã‚¿"</span> <span class="kw">in</span> msg:
        intent = <span class="st">"data_query"</span>
    <span class="kw">else</span>:
        intent = <span class="st">"general"</span>

    <span class="cm"># intentã ã‘ã‚’è¿”ã™ï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰</span>
    <span class="kw">return</span> {<span class="st">"intent"</span>: intent}</pre>
                        </div>
                    </div>
                </div>
                <div class="highlight-box warning">
                    <div class="highlight-title">âš ï¸ é‡è¦</div>
                    <p><strong>æˆ»ã‚Šå€¤ã¯ã€Œéƒ¨åˆ†æ›´æ–°ã€</strong>ã€‚æ›´æ–°ã—ãŸã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã ã‘è¿”ã›ã°OKï¼</p>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon purple">ğŸ”—</div>
                    <h3 class="card-title">Edgeï¼ˆè¾ºï¼‰ã¨ã¯ï¼Ÿ</h3>
                </div>
                <p>Edgeã¯<strong>é ‚ç‚¹é–“ã®æ¥ç¶š</strong>ã‚’å®šç¾©ã—ã¾ã™ã€‚</p>
                <div class="diagram-container">
                    <div class="diagram-title">ğŸ”€ 2ç¨®é¡ã®è¾ºï¼ˆEdgeï¼‰</div>
                    <svg class="svg-diagram" viewBox="0 0 800 180">
                        <defs>
                            <marker id="arr2" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
                            </marker>
                            <marker id="arr3" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
                            </marker>
                        </defs>
                        <!-- å·¦ï¼šé€šå¸¸ã®è¾º -->
                        <text x="150" y="25" text-anchor="middle" fill="#22c55e" font-size="14" font-weight="700">é€šå¸¸ã®è¾ºï¼ˆadd_edgeï¼‰</text>
                        <circle cx="80" cy="90" r="30" fill="#22c55e" fill-opacity="0.3" stroke="#22c55e" stroke-width="2"/>
                        <text x="80" y="95" text-anchor="middle" fill="#333333" font-size="12">A</text>
                        <line x1="115" y1="90" x2="175" y2="90" stroke="#22c55e" stroke-width="3" marker-end="url(#arr2)"/>
                        <circle cx="220" cy="90" r="30" fill="#22c55e" fill-opacity="0.3" stroke="#22c55e" stroke-width="2"/>
                        <text x="220" y="95" text-anchor="middle" fill="#333333" font-size="12">B</text>
                        <text x="150" y="150" text-anchor="middle" fill="#333333" font-size="12">å¸¸ã« A â†’ B ã¸</text>
                        <!-- åŒºåˆ‡ã‚Š -->
                        <line x1="350" y1="20" x2="350" y2="170" stroke="#30363d" stroke-width="2" stroke-dasharray="5,5"/>
                        <!-- å³ï¼šæ¡ä»¶åˆ†å² -->
                        <text x="580" y="25" text-anchor="middle" fill="#8b5cf6" font-size="14" font-weight="700">æ¡ä»¶åˆ†å²ã®è¾ºï¼ˆadd_conditional_edgesï¼‰</text>
                        <circle cx="420" cy="90" r="30" fill="#8b5cf6" fill-opacity="0.3" stroke="#8b5cf6" stroke-width="2"/>
                        <text x="420" y="95" text-anchor="middle" fill="#333333" font-size="12">A</text>
                        <line x1="455" y1="75" x2="530" y2="50" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr3)"/>
                        <line x1="455" y1="90" x2="530" y2="90" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr3)"/>
                        <line x1="455" y1="105" x2="530" y2="130" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr3)"/>
                        <circle cx="565" cy="45" r="22" fill="#10b981" fill-opacity="0.3" stroke="#10b981" stroke-width="2"/>
                        <text x="565" y="50" text-anchor="middle" fill="#333333" font-size="11">B</text>
                        <circle cx="565" cy="90" r="22" fill="#06b6d4" fill-opacity="0.3" stroke="#06b6d4" stroke-width="2"/>
                        <text x="565" y="95" text-anchor="middle" fill="#333333" font-size="11">C</text>
                        <circle cx="565" cy="135" r="22" fill="#f97316" fill-opacity="0.3" stroke="#f97316" stroke-width="2"/>
                        <text x="565" y="140" text-anchor="middle" fill="#333333" font-size="11">D</text>
                        <text x="680" y="50" fill="#10b981" font-size="10">æ¡ä»¶1</text>
                        <text x="680" y="95" fill="#06b6d4" font-size="10">æ¡ä»¶2</text>
                        <text x="680" y="140" fill="#f97316" font-size="10">ãã®ä»–</text>
                        <text x="580" y="170" text-anchor="middle" fill="#333333" font-size="12">æ¡ä»¶ã§è¡Œãå…ˆãŒå¤‰ã‚ã‚‹</text>
                    </svg>
                </div>
                <table>
                    <thead><tr><th>ç¨®é¡</th><th>ç”¨é€”</th><th>ã‚³ãƒ¼ãƒ‰</th></tr></thead>
                    <tbody>
                        <tr><td><span class="tag green">é€šå¸¸ã®è¾º</span></td><td>å¸¸ã«åŒã˜é ‚ç‚¹ã¸</td><td><code>add_edge("A", "B")</code></td></tr>
                        <tr><td><span class="tag purple">æ¡ä»¶åˆ†å²ã®è¾º</span></td><td>æ¡ä»¶ã§åˆ†å²</td><td><code>add_conditional_edges(...)</code></td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- æœ€å°æ§‹æˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="minimal">
            <div class="section-header">
                <div class="section-number">3</div>
                <h2 class="section-title">æœ€å°æ§‹æˆã§ç†è§£ã™ã‚‹</h2>
                <p class="section-subtitle">2é ‚ç‚¹ã ã‘ã®æœ€å°æ§‹æˆ</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">ğŸš€</div>
                    <h3 class="card-title">æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªLangGraph</h3>
                </div>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span><span>46</span><span>47</span><span>48</span><span>49</span><span>50</span></div>
                        <div class="code-content">
<pre><span class="cm"># ==========================================</span>
<span class="cm"># ğŸ¢ æœ€å°æ§‹æˆã®LangGraphï¼ˆ2äººã®ç¤¾å“¡ãŒã„ã‚‹ä¼šç¤¾ï¼‰</span>
<span class="cm"># ==========================================</span>

<span class="kw">from</span> typing <span class="kw">import</span> TypedDict
<span class="kw">from</span> langgraph.graph <span class="kw">import</span> StateGraph, START, END

<span class="cm"># ==========================================</span>
<span class="cm"># ğŸ“‹ Step 1: å›è¦§ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆStateï¼‰ã‚’ä½œã‚‹</span>
<span class="cm"># â†’ ç¤¾å“¡é–“ã§å…±æœ‰ã™ã‚‹ã€Œã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã€ã®é …ç›®ã‚’å®šç¾©</span>
<span class="cm"># ==========================================</span>
<span class="kw">class</span> <span class="cl">SimpleState</span>(TypedDict):
    message: <span class="cl">str</span>      <span class="cm"># ğŸ“¥ æœ€åˆã«æ›¸ã„ã¦ã‚ã‚‹æƒ…å ±ï¼ˆå…¥åŠ›ï¼‰</span>
    result: <span class="cl">str</span>       <span class="cm"># ğŸ“ ç¤¾å“¡ãŒè¨˜å…¥ã™ã‚‹æ¬„ï¼ˆå‡ºåŠ›ï¼‰</span>

<span class="cm"># ==========================================</span>
<span class="cm"># ğŸ‘¤ Step 2: ç¤¾å“¡ï¼ˆNodeï¼‰ã‚’å®šç¾©ã™ã‚‹</span>
<span class="cm"># â†’ å›è¦§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å—ã‘å–ã‚Šã€è‡ªåˆ†ã®æ‹…å½“æ¬„ã‚’åŸ‹ã‚ã¦è¿”ã™</span>
<span class="cm"># ==========================================</span>
<span class="kw">def</span> <span class="fn">process_node</span>(state: <span class="cl">SimpleState</span>) -> <span class="cl">dict</span>:
    <span class="st">"""
    ğŸ‘¤ 1äººç›®ã®ç¤¾å“¡ï¼šåŠ å·¥æ‹…å½“ã®ç”°ä¸­ã•ã‚“
    å›è¦§ãƒ•ã‚¡ã‚¤ãƒ«ã®ã€Œmessageã€ã‚’èª­ã‚“ã§ã€ã€Œresultã€æ¬„ã«è¨˜å…¥ã™ã‚‹
    """</span>
    msg = state[<span class="st">"message"</span>]         <span class="cm"># ğŸ“‹ å›è¦§ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰èª­ã‚€</span>
    processed = <span class="st">f"å‡¦ç†æ¸ˆã¿: {msg}"</span>  <span class="cm"># ğŸ”§ è‡ªåˆ†ã®ä»•äº‹ã‚’ã™ã‚‹</span>
    <span class="kw">return</span> {<span class="st">"result"</span>: processed}    <span class="cm"># ğŸ“ resultæ¬„ã«è¨˜å…¥ã—ã¦è¿”ã™</span>

<span class="kw">def</span> <span class="fn">output_node</span>(state: <span class="cl">SimpleState</span>) -> <span class="cl">dict</span>:
    <span class="st">"""
    ğŸ‘¤ 2äººç›®ã®ç¤¾å“¡ï¼šå ±å‘Šæ‹…å½“ã®éˆ´æœ¨ã•ã‚“
    å›è¦§ãƒ•ã‚¡ã‚¤ãƒ«ã®ã€Œresultã€ã‚’è¦‹ã¦ã€æœ€çµ‚å ±å‘Šã™ã‚‹
    """</span>
    <span class="bi">print</span>(<span class="st">f"æœ€çµ‚çµæœ: {state['result']}"</span>)  <span class="cm"># ğŸ“¢ å ±å‘Šã™ã‚‹</span>
    <span class="kw">return</span> {}  <span class="cm"># è¨˜å…¥ã™ã‚‹æ¬„ãŒãªã„ã®ã§ç©ºã§è¿”ã™</span>

<span class="cm"># ==========================================</span>
<span class="cm"># ğŸ¢ Step 3: ä¼šç¤¾ï¼ˆGraphï¼‰ã‚’çµ„ã¿ç«‹ã¦ã‚‹</span>
<span class="cm"># â†’ ç¤¾å“¡ã‚’ç™»éŒ²ã—ã€å›è¦§ãƒ«ãƒ¼ãƒˆã‚’æ±ºã‚ã‚‹</span>
<span class="cm"># ==========================================</span>
workflow = StateGraph(<span class="cl">SimpleState</span>)  <span class="cm"># ğŸ¢ ä¼šç¤¾ã‚’ä½œã‚‹ï¼ˆå›è¦§ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼ã‚’æŒ‡å®šï¼‰</span>

<span class="cm"># ğŸ‘¤ ç¤¾å“¡ã‚’ç™»éŒ²</span>
workflow.add_node(<span class="st">"process"</span>, process_node)   <span class="cm"># ç”°ä¸­ã•ã‚“ã‚’ã€Œprocessã€ã¨ã„ã†åå‰ã§ç™»éŒ²</span>
workflow.add_node(<span class="st">"output"</span>, output_node)     <span class="cm"># éˆ´æœ¨ã•ã‚“ã‚’ã€Œoutputã€ã¨ã„ã†åå‰ã§ç™»éŒ²</span>

<span class="cm"># ğŸ”€ å›è¦§ãƒ«ãƒ¼ãƒˆã‚’è¨­å®šï¼ˆæ¥­å‹™ãƒ•ãƒ­ãƒ¼ï¼‰</span>
workflow.add_edge(START, <span class="st">"process"</span>)          <span class="cm"># é–‹å§‹ â†’ ç”°ä¸­ã•ã‚“</span>
workflow.add_edge(<span class="st">"process"</span>, <span class="st">"output"</span>)       <span class="cm"># ç”°ä¸­ã•ã‚“ â†’ éˆ´æœ¨ã•ã‚“</span>
workflow.add_edge(<span class="st">"output"</span>, END)              <span class="cm"># éˆ´æœ¨ã•ã‚“ â†’ çµ‚äº†</span>

graph = workflow.compile()  <span class="cm"># ğŸš€ ä¼šç¤¾ã‚’ç¨¼åƒé–‹å§‹ï¼</span></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pythonå‘½åè¦å‰‡ï¼ˆPEP8ï¼‰ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon blue">ğŸ“</div>
                    <h3 class="card-title">Pythonå‘½åè¦å‰‡ï¼ˆPEP8ï¼‰- ãƒãƒ¼ãƒ ã§çµ±ä¸€ã—ã‚ˆã†</h3>
                </div>
                <div class="card-body">
                    <p class="mb-4">ä¸Šè¨˜ã‚³ãƒ¼ãƒ‰ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹å‘½åè¦å‰‡ã¯ã€Pythonã®æ¨™æº–ã‚¹ã‚¿ã‚¤ãƒ«ã€Œ<strong>PEP8</strong>ã€ã«å¾“ã£ã¦ã„ã¾ã™ã€‚ãƒãƒ¼ãƒ é–‹ç™ºã§ã¯å¿…ãšçµ±ä¸€ã—ã¾ã—ã‚‡ã†ã€‚</p>

                    <table class="naming-table" style="width: 100%; border-collapse: collapse; margin-bottom: 1rem;">
                        <thead>
                            <tr style="background: rgba(34, 197, 94, 0.1);">
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #22c55e;">ç¨®é¡</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #22c55e;">å‘½åè¦å‰‡</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #22c55e;">ä¾‹</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><strong>é–¢æ•°ï¼ˆdefï¼‰</strong></td>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px; color: #22c55e;">snake_case</code><br>å°æ–‡å­— + ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢</td>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px;">process_node</code>, <code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px;">get_user_input</code></td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><strong>ã‚¯ãƒ©ã‚¹ï¼ˆclassï¼‰</strong></td>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px; color: #f59e0b;">PascalCase</code><br>å„å˜èªã®å…ˆé ­ã‚’å¤§æ–‡å­—</td>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px;">SimpleState</code>, <code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px;">UserProfile</code></td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><strong>å¤‰æ•°</strong></td>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px; color: #22c55e;">snake_case</code><br>é–¢æ•°ã¨åŒã˜</td>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px;">user_input</code>, <code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px;">workflow</code></td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><strong>å®šæ•°</strong></td>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px; color: #ec4899;">UPPER_SNAKE_CASE</code><br>å…¨ã¦å¤§æ–‡å­— + ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢</td>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px;">MAX_RETRIES</code>, <code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px;">API_KEY</code></td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><strong>ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ</strong></td>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px; color: #8b5cf6;">_prefix</code><br>å…ˆé ­ã«ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢1ã¤</td>
                                <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;"><code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px;">_internal_func</code>, <code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px;">_private_var</code></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box" style="background: rgba(34, 197, 94, 0.1); border-left: 4px solid #22c55e; padding: 16px; border-radius: 8px;">
                        <p style="margin: 0; color: #d1d5db;"><strong>ğŸ’¡ è¦šãˆæ–¹ã®ã‚³ãƒ„ï¼š</strong></p>
                        <ul style="margin: 8px 0 0 0; padding-left: 20px; color: #666666;">
                            <li><strong>é–¢æ•°ãƒ»å¤‰æ•°</strong>ã¯ã€Œå‹•è©ã£ã½ã„ã€â†’ <code>snake_case</code>ï¼ˆå°æ–‡å­—ã§ã¤ãªãï¼‰</li>
                            <li><strong>ã‚¯ãƒ©ã‚¹</strong>ã¯ã€Œåè©ã£ã½ã„ã€â†’ <code>PascalCase</code>ï¼ˆé ­æ–‡å­—å¤§æ–‡å­—ï¼‰</li>
                            <li><strong>å®šæ•°</strong>ã¯ã€Œå¤‰ã‚ã‚‰ãªã„ï¼å¼·èª¿ã€â†’ <code>UPPER_CASE</code>ï¼ˆå…¨éƒ¨å¤§æ–‡å­—ï¼‰</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">ğŸ”„ å®Ÿè¡Œãƒ•ãƒ­ãƒ¼ï¼ˆã‚°ãƒ©ãƒ•æ§‹é€ ï¼‰- ã‚¯ãƒªãƒƒã‚¯ã§ã‚¹ãƒ†ãƒƒãƒ—ã‚’é€²ã‚€</div>
                <svg class="svg-diagram" viewBox="0 0 700 450" id="flowSvg">
                    <defs>
                        <marker id="arr4" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
                        </marker>
                        <filter id="glow">
                            <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                            <feMerge>
                                <feMergeNode in="coloredBlur"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                    </defs>
                    <!-- START -->
                    <g class="flow-step" data-step="0">
                        <circle cx="150" cy="50" r="35" fill="#10b981" fill-opacity="0.3" stroke="#10b981" stroke-width="3" class="node-circle"/>
                        <text x="150" y="55" text-anchor="middle" fill="#10b981" font-size="12" font-weight="600">START</text>
                    </g>
                    <line x1="150" y1="85" x2="150" y2="115" stroke="#22c55e" stroke-width="3" class="flow-line svg-flow-animated"/>
                    <!-- process_node -->
                    <g class="flow-step" data-step="1">
                        <circle cx="150" cy="160" r="45" fill="#22c55e" fill-opacity="0.3" stroke="#22c55e" stroke-width="3" class="node-circle"/>
                        <text x="150" y="155" text-anchor="middle" fill="#22c55e" font-size="11" font-weight="600">process</text>
                        <text x="150" y="170" text-anchor="middle" fill="#22c55e" font-size="11" font-weight="600">_node</text>
                    </g>
                    <line x1="150" y1="205" x2="150" y2="235" stroke="#22c55e" stroke-width="3" class="flow-line svg-flow-animated"/>
                    <!-- output_node -->
                    <g class="flow-step" data-step="2">
                        <circle cx="150" cy="280" r="45" fill="#8b5cf6" fill-opacity="0.3" stroke="#8b5cf6" stroke-width="3" class="node-circle"/>
                        <text x="150" y="275" text-anchor="middle" fill="#8b5cf6" font-size="11" font-weight="600">output</text>
                        <text x="150" y="290" text-anchor="middle" fill="#8b5cf6" font-size="11" font-weight="600">_node</text>
                    </g>
                    <line x1="150" y1="325" x2="150" y2="355" stroke="#22c55e" stroke-width="3" class="flow-line svg-flow-animated"/>
                    <!-- END -->
                    <g class="flow-step" data-step="3">
                        <circle cx="150" cy="390" r="35" fill="#ec4899" fill-opacity="0.3" stroke="#ec4899" stroke-width="3" class="node-circle"/>
                        <text x="150" y="395" text-anchor="middle" fill="#ec4899" font-size="12" font-weight="600">END</text>
                    </g>
                    <!-- å³å´ï¼šèª¬æ˜ï¼ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ï¼‰ -->
                    <g class="state-box" data-step="0" opacity="1">
                        <rect x="280" y="30" width="380" height="90" rx="12" fill="white" stroke="#10b981" stroke-width="3">
                            <animate attributeName="stroke-width" values="3;5;3" dur="1.5s" repeatCount="indefinite"/>
                        </rect>
                        <text x="300" y="55" fill="#10b981" font-size="14" font-weight="700">ğŸ“ Step 0: åˆæœŸçŠ¶æ…‹</text>
                        <text x="300" y="80" fill="#4b5563" font-size="12">StateãŒåˆæœŸåŒ–ã•ã‚Œã¾ã™</text>
                        <text x="300" y="105" fill="#10b981" font-family="JetBrains Mono" font-size="11">{message: "ã“ã‚“ã«ã¡ã¯", result: ""}</text>
                        <line x1="200" y1="50" x2="275" y2="65" stroke="#10b981" stroke-width="2" stroke-dasharray="6"/>
                    </g>
                    <g class="state-box" data-step="1" opacity="0">
                        <rect x="280" y="130" width="380" height="100" rx="12" fill="white" stroke="#22c55e" stroke-width="3">
                            <animate attributeName="stroke-width" values="3;5;3" dur="1.5s" repeatCount="indefinite"/>
                        </rect>
                        <text x="300" y="155" fill="#22c55e" font-size="14" font-weight="700">âš™ï¸ Step 1: process_node å®Ÿè¡Œä¸­</text>
                        <text x="300" y="180" fill="#4b5563" font-size="12">messageã‚’å‡¦ç†ã—ã¦resultã‚’æ›´æ–°</text>
                        <text x="300" y="205" fill="#22c55e" font-family="JetBrains Mono" font-size="11">return {"result": "å‡¦ç†æ¸ˆã¿: ã“ã‚“ã«ã¡ã¯"}</text>
                        <text x="300" y="225" fill="#6b7280" font-size="10">â€» messageã¯å¤‰æ›´ãªã— â†’ è‡ªå‹•ã§å¼•ãç¶™ã</text>
                        <line x1="200" y1="160" x2="275" y2="170" stroke="#22c55e" stroke-width="2" stroke-dasharray="6"/>
                    </g>
                    <g class="state-box" data-step="2" opacity="0">
                        <rect x="280" y="250" width="380" height="100" rx="12" fill="white" stroke="#8b5cf6" stroke-width="3">
                            <animate attributeName="stroke-width" values="3;5;3" dur="1.5s" repeatCount="indefinite"/>
                        </rect>
                        <text x="300" y="275" fill="#8b5cf6" font-size="14" font-weight="700">ğŸ“¤ Step 2: output_node å®Ÿè¡Œä¸­</text>
                        <text x="300" y="300" fill="#4b5563" font-size="12">æ›´æ–°ã•ã‚ŒãŸresultã‚’å‚ç…§ã—ã¦å‡ºåŠ›</text>
                        <text x="300" y="325" fill="#8b5cf6" font-family="JetBrains Mono" font-size="11">print("æœ€çµ‚çµæœ: å‡¦ç†æ¸ˆã¿: ã“ã‚“ã«ã¡ã¯")</text>
                        <text x="300" y="345" fill="#6b7280" font-size="10">return {} â†’ æ›´æ–°ãªã—ã§ã‚‚OK!</text>
                        <line x1="200" y1="280" x2="275" y2="290" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="6"/>
                    </g>
                    <g class="state-box" data-step="3" opacity="0">
                        <rect x="280" y="370" width="380" height="70" rx="12" fill="white" stroke="#ec4899" stroke-width="3">
                            <animate attributeName="stroke-width" values="3;5;3" dur="1.5s" repeatCount="indefinite"/>
                        </rect>
                        <text x="300" y="395" fill="#ec4899" font-size="14" font-weight="700">âœ… Step 3: å®Œäº†!</text>
                        <text x="300" y="420" fill="#4b5563" font-size="12">æœ€çµ‚State: {message: "ã“ã‚“ã«ã¡ã¯", result: "å‡¦ç†æ¸ˆã¿: ã“ã‚“ã«ã¡ã¯"}</text>
                        <line x1="200" y1="390" x2="275" y2="400" stroke="#ec4899" stroke-width="2" stroke-dasharray="6"/>
                    </g>
                </svg>
                <div style="text-align: center; margin-top: 1rem;">
                    <button id="flowPrevBtn" style="padding: 0.75rem 2rem; margin: 0.25rem; background: linear-gradient(135deg, #22c55e, #10b981); color: #ffffff; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; transition: all 0.3s ease;">â—€ å‰ã¸</button>
                    <span id="flowStepIndicator" style="padding: 0.5rem 1rem; color: #22c55e; font-weight: 700;">Step 0 / 3</span>
                    <button id="flowNextBtn" style="padding: 0.75rem 2rem; margin: 0.25rem; background: linear-gradient(135deg, #22c55e, #10b981); color: #ffffff; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; transition: all 0.3s ease;">æ¬¡ã¸ â–¶</button>
                    <button id="flowAutoBtn" style="padding: 0.75rem 2rem; margin: 0.25rem; background: linear-gradient(135deg, #06b6d4, #0891b2); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; transition: all 0.3s ease;">â–¶ è‡ªå‹•å†ç”Ÿ</button>
                </div>
            </div>

            <div class="highlight-box success">
                <div class="highlight-title">ğŸ’¡ éƒ¨åˆ†æ›´æ–°ã®ãƒã‚¤ãƒ³ãƒˆ</div>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span></div>
                        <div class="code-content">
<pre><span class="cm"># OK: æ›´æ–°ã—ãŸã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã ã‘è¿”ã™</span>
<span class="kw">return</span> {<span class="st">"result"</span>: processed}

<span class="cm"># NG: å…¨éƒ¨è¿”ã™å¿…è¦ã¯ãªã„</span>
<span class="cm"># return {"message": state["message"], "result": processed}</span>
<span class="cm"># messageã¯è‡ªå‹•çš„ã«å¼•ãç¶™ãŒã‚Œã‚‹ï¼</span></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- æ¡ä»¶åˆ†å²ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="branch">
            <div class="section-header">
                <div class="section-number">4</div>
                <h2 class="section-title">æ¡ä»¶åˆ†å²ã‚’è¿½åŠ ã™ã‚‹</h2>
                <p class="section-subtitle">æ¡ä»¶ã«ã‚ˆã£ã¦å‡¦ç†ã‚’åˆ†ã‘ã‚‹</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon purple">ğŸ”€</div>
                    <h3 class="card-title">æ¡ä»¶åˆ†å²ã®å®Ÿè£…</h3>
                </div>
                <div class="code-block">
                    <div class="code-header">Python</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span></div>
                        <div class="code-content">
<pre><span class="kw">from</span> typing <span class="kw">import</span> Literal

<span class="cm"># --- æ¡ä»¶åˆ†å²ã®é–¢æ•° ---</span>
<span class="kw">def</span> <span class="fn">route_by_intent</span>(state: <span class="cl">ChatState</span>) -> Literal[<span class="st">"weather"</span>, <span class="st">"time"</span>, <span class="st">"general"</span>]:
    <span class="st">"""intentã«åŸºã¥ã„ã¦æ¬¡ã®é ‚ç‚¹ã‚’æ±ºå®š"""</span>
    intent = state[<span class="st">"intent"</span>]
    <span class="kw">if</span> intent == <span class="st">"weather"</span>:
        <span class="kw">return</span> <span class="st">"weather"</span>
    <span class="kw">elif</span> intent == <span class="st">"time"</span>:
        <span class="kw">return</span> <span class="st">"time"</span>
    <span class="kw">else</span>:
        <span class="kw">return</span> <span class="st">"general"</span>

<span class="cm"># --- æ¡ä»¶åˆ†å²ã®è¾ºã‚’è¿½åŠ  ---</span>
workflow.add_conditional_edges(
    <span class="st">"classifier"</span>,        <span class="cm"># åˆ†å²å…ƒã®é ‚ç‚¹</span>
    route_by_intent,     <span class="cm"># æ¡ä»¶é–¢æ•°</span>
    {                    <span class="cm"># æˆ»ã‚Šå€¤ â†’ è¡Œãå…ˆã®é ‚ç‚¹</span>
        <span class="st">"weather"</span>: <span class="st">"weather"</span>,
        <span class="st">"time"</span>: <span class="st">"time"</span>,
        <span class="st">"general"</span>: <span class="st">"general"</span>,
    }
)</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">ğŸ”€ æ¡ä»¶åˆ†å²ã®ã‚°ãƒ©ãƒ•æ§‹é€ </div>
                <svg class="svg-diagram" viewBox="0 0 700 500">
                    <defs>
                        <marker id="arr5" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
                        </marker>
                    </defs>
                    <!-- START -->
                    <circle cx="350" cy="40" r="30" fill="#10b981" fill-opacity="0.3" stroke="#10b981" stroke-width="3"/>
                    <text x="350" y="45" text-anchor="middle" fill="#333333" font-size="12">START</text>
                    <line x1="350" y1="70" x2="350" y2="100" stroke="#22c55e" stroke-width="2" marker-end="url(#arr5)"/>
                    <!-- classifier -->
                    <circle cx="350" cy="140" r="45" fill="#22c55e" fill-opacity="0.3" stroke="#22c55e" stroke-width="3"/>
                    <text x="350" y="135" text-anchor="middle" fill="#333333" font-size="11">classifier</text>
                    <text x="350" y="150" text-anchor="middle" fill="#333333" font-size="11">_node</text>
                    <!-- æ¡ä»¶åˆ†å² -->
                    <polygon points="350,195 390,230 350,265 310,230" fill="#8b5cf6" fill-opacity="0.3" stroke="#8b5cf6" stroke-width="2"/>
                    <text x="350" y="235" text-anchor="middle" fill="#8b5cf6" font-size="10">åˆ†å²</text>
                    <!-- åˆ†å²ç·š -->
                    <line x1="310" y1="230" x2="150" y2="300" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <line x1="350" y1="265" x2="350" y2="300" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <line x1="390" y1="230" x2="550" y2="300" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <!-- ãƒ©ãƒ™ãƒ« -->
                    <text x="200" y="265" fill="#06b6d4" font-size="10">"weather"</text>
                    <text x="330" y="290" fill="#f97316" font-size="10">"time"</text>
                    <text x="480" y="265" fill="#ec4899" font-size="10">"general"</text>
                    <!-- åˆ†å²å…ˆ -->
                    <circle cx="150" cy="340" r="40" fill="#06b6d4" fill-opacity="0.3" stroke="#06b6d4" stroke-width="3"/>
                    <text x="150" y="335" text-anchor="middle" fill="#333333" font-size="10">weather</text>
                    <text x="150" y="350" text-anchor="middle" fill="#333333" font-size="10">_node</text>
                    <circle cx="350" cy="340" r="40" fill="#f97316" fill-opacity="0.3" stroke="#f97316" stroke-width="3"/>
                    <text x="350" y="335" text-anchor="middle" fill="#333333" font-size="10">time</text>
                    <text x="350" y="350" text-anchor="middle" fill="#333333" font-size="10">_node</text>
                    <circle cx="550" cy="340" r="40" fill="#ec4899" fill-opacity="0.3" stroke="#ec4899" stroke-width="3"/>
                    <text x="550" y="335" text-anchor="middle" fill="#333333" font-size="10">general</text>
                    <text x="550" y="350" text-anchor="middle" fill="#333333" font-size="10">_node</text>
                    <!-- END ã¸ã®åˆæµ -->
                    <line x1="150" y1="380" x2="330" y2="440" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <line x1="350" y1="380" x2="350" y2="430" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <line x1="550" y1="380" x2="370" y2="440" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arr5)"/>
                    <circle cx="350" cy="460" r="30" fill="#ec4899" fill-opacity="0.3" stroke="#ec4899" stroke-width="3"/>
                    <text x="350" y="465" text-anchor="middle" fill="#333333" font-size="12">END</text>
                </svg>
            </div>
        </section>

        <!-- Stateç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="state">
            <div class="section-header">
                <div class="section-number">5</div>
                <h2 class="section-title">Stateç®¡ç†ã®å¿œç”¨</h2>
                <p class="section-subtitle">ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã‚ˆã†</p>
            </div>

            <!-- ã¾ãšStateã¨ã¯ä½•ã‹ã‚’å¾©ç¿’ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">ğŸ“‹</div>
                    <h3 class="card-title">ã¾ãšå¾©ç¿’ï¼šStateã£ã¦ä½•ã ã£ã‘ï¼Ÿ</h3>
                </div>
                <div class="card-body">
                    <p>Stateã¯<strong>ã€Œç¤¾å“¡é–“ã§å›ã™å›è¦§ãƒ•ã‚¡ã‚¤ãƒ«ã€</strong>ã§ã—ãŸã­ã€‚å„Nodeï¼ˆç¤¾å“¡ï¼‰ãŒã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿æ›¸ãã—ã¦æƒ…å ±ã‚’å…±æœ‰ã—ã¾ã™ã€‚</p>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1.5rem 0;">
                        <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid #22c55e;">
                            <p style="color: #22c55e; font-weight: 700; margin-bottom: 0.5rem;">âœ… ä¼šç¤¾ã®ãŸã¨ãˆ</p>
                            <ul style="margin: 0; padding-left: 1.2rem; color: #666666; font-size: 0.9rem;">
                                <li>å›è¦§ãƒ•ã‚¡ã‚¤ãƒ« = <strong>State</strong></li>
                                <li>ãƒ•ã‚¡ã‚¤ãƒ«ã®é …ç›® = <strong>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</strong></li>
                                <li>ç¤¾å“¡ãŒè¨˜å…¥ = <strong>Nodeã®æˆ»ã‚Šå€¤</strong></li>
                            </ul>
                        </div>
                        <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid #3b82f6;">
                            <p style="color: #3b82f6; font-weight: 700; margin-bottom: 0.5rem;">ğŸ’» ã‚³ãƒ¼ãƒ‰ã®ãŸã¨ãˆ</p>
                            <ul style="margin: 0; padding-left: 1.2rem; color: #666666; font-size: 0.9rem;">
                                <li>State = <strong>TypedDict</strong></li>
                                <li>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ = <strong>key: å‹</strong></li>
                                <li>æˆ»ã‚Šå€¤ = <strong>return {"key": å€¤}</strong></li>
                            </ul>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">Python - åŸºæœ¬ã®Stateï¼ˆå¾©ç¿’ï¼‰</div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span></div>
                            <div class="code-content">
<pre><span class="kw">from</span> typing <span class="kw">import</span> TypedDict

<span class="cm"># ğŸ“‹ å›è¦§ãƒ•ã‚¡ã‚¤ãƒ«ã®é …ç›®ã‚’å®šç¾©</span>
<span class="kw">class</span> <span class="cl">SimpleState</span>(TypedDict):
    user_input: <span class="cl">str</span>   <span class="cm"># ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è³ªå•</span>
    response: <span class="cl">str</span>     <span class="cm"># AIã®å›ç­”</span>

<span class="cm"># ğŸ‘¤ ç¤¾å“¡ï¼ˆNodeï¼‰ãŒå›è¦§ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜å…¥</span>
<span class="kw">def</span> <span class="fn">answer_node</span>(state: <span class="cl">SimpleState</span>) -> <span class="cl">dict</span>:
    question = state[<span class="st">"user_input"</span>]  <span class="cm"># èª­ã‚€</span>
    answer = <span class="st">f"{question}ã¸ã®å›ç­”ã§ã™"</span>
    <span class="kw">return</span> {<span class="st">"response"</span>: answer}       <span class="cm"># æ›¸ãï¼ˆresponseã‚’æ›´æ–°ï¼‰</span>
    <span class="cm"># â†‘ user_inputã¯æ›¸ã‹ãªã„ â†’ è‡ªå‹•ã§å¼•ãç¶™ãŒã‚Œã‚‹</span></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å•é¡Œæèµ·ï¼šä¸Šæ›¸ãå•é¡Œ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon orange">âš ï¸</div>
                    <h3 class="card-title">å›°ã£ãŸï¼ä¼šè©±å±¥æ­´ãŒæ¶ˆãˆã¦ã—ã¾ã†å•é¡Œ</h3>
                </div>
                <div class="card-body">
                    <p>ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã‚’ä½œã‚‹ã¨ãã€<strong>ä¼šè©±å±¥æ­´ã‚’ä¿æŒã—ãŸã„</strong>ã§ã™ã‚ˆã­ã€‚ã§ã‚‚æ™®é€šã«æ›¸ãã¨...</p>

                    <div class="code-block">
                        <div class="code-header">Python - âŒ å¤±æ•—ä¾‹ï¼šå±¥æ­´ãŒæ¶ˆãˆã‚‹</div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span></div>
                            <div class="code-content">
<pre><span class="kw">class</span> <span class="cl">ChatState</span>(TypedDict):
    user_input: <span class="cl">str</span>
    history: <span class="cl">list</span>      <span class="cm"># ä¼šè©±å±¥æ­´</span>
    response: <span class="cl">str</span>

<span class="kw">def</span> <span class="fn">chat_node</span>(state: <span class="cl">ChatState</span>) -> <span class="cl">dict</span>:
    new_message = {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: state[<span class="st">"user_input"</span>]}
    <span class="cm"># âŒ ã“ã‚Œã ã¨å¤ã„å±¥æ­´ãŒæ¶ˆãˆã‚‹ï¼</span>
    <span class="kw">return</span> {
        <span class="st">"history"</span>: [new_message],  <span class="cm"># æ–°ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã ã‘ã«ãªã‚‹</span>
        <span class="st">"response"</span>: <span class="st">"å›ç­”..."</span>
    }

<span class="cm"># å®Ÿè¡Œã™ã‚‹ã¨ã“ã†ãªã‚‹...</span>
<span class="cm"># 1å›ç›®: history = [{"role": "user", "content": "ã“ã‚“ã«ã¡ã¯"}] â† OK</span>
<span class="cm"># 2å›ç›®: history = [{"role": "user", "content": "å…ƒæ°—ï¼Ÿ"}]   â† 1å›ç›®ãŒæ¶ˆãˆãŸï¼</span>
<span class="cm"># 3å›ç›®: history = [{"role": "user", "content": "å¤©æ°—ã¯ï¼Ÿ"}] â† 2å›ç›®ã‚‚æ¶ˆãˆãŸï¼</span>

<span class="cm"># æœ¬å½“ã¯æ¬²ã—ã„çµæœï¼š</span>
<span class="cm"># history = [1å›ç›®, 2å›ç›®, 3å›ç›®] â† å…¨éƒ¨æ®‹ã—ãŸã„ï¼</span></pre>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(239, 68, 68, 0.1); border-left: 4px solid #ef4444; padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                        <p style="margin: 0; color: #f87171;"><strong>ğŸ˜± ãªãœæ¶ˆãˆã‚‹ï¼Ÿ</strong></p>
                        <p style="margin: 0.5rem 0 0 0; color: #666666;">LangGraphã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œã¯ã€Œ<strong>ä¸Šæ›¸ã</strong>ã€ã§ã™ã€‚return ã§è¿”ã—ãŸå€¤ãŒãã®ã¾ã¾Stateã«å…¥ã‚Šã€å¤ã„å€¤ã¯æ¶ˆãˆã¾ã™ã€‚</p>
                    </div>
                </div>
            </div>

            <!-- è§£æ±ºç­–ï¼šAnnotatedã¨reducer -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon emerald">âœ…</div>
                    <h3 class="card-title">è§£æ±ºç­–ï¼šAnnotated + reducer ã§ã€Œè¿½åŠ ãƒ¢ãƒ¼ãƒ‰ã€ã«ã™ã‚‹</h3>
                </div>
                <div class="card-body">
                    <p>ã€Œ<strong>ä¸Šæ›¸ã</strong>ã€ã§ã¯ãªãã€Œ<strong>è¿½åŠ </strong>ã€ã—ãŸã„å ´åˆã¯ã€<code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px;">Annotated</code>ã‚’ä½¿ã„ã¾ã™ã€‚</p>

                    <div style="background: rgba(34, 197, 94, 0.1); border-left: 4px solid #22c55e; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <p style="margin: 0; color: #22c55e; font-weight: 700;">ğŸ’¡ è¦šãˆæ–¹</p>
                        <p style="margin: 0.5rem 0 0 0; color: #d1d5db;">
                            <code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px;">Annotated[å‹, ã©ã†å‡¦ç†ã™ã‚‹ã‹]</code><br>
                            ã€Œã“ã®é …ç›®ã¯â—‹â—‹ã—ã¦å‡¦ç†ã—ã¦ã­ã€ã¨ã„ã†<strong>æŒ‡ç¤ºæ›¸ã</strong>ã‚’ã¤ã‘ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸
                        </p>
                    </div>

                    <div class="code-block">
                        <div class="code-header">Python - âœ… æˆåŠŸä¾‹ï¼šå±¥æ­´ãŒè¿½åŠ ã•ã‚Œã‚‹</div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span></div>
                            <div class="code-content">
<pre><span class="kw">from</span> typing <span class="kw">import</span> TypedDict, Annotated
<span class="kw">from</span> operator <span class="kw">import</span> add  <span class="cm"># ãƒªã‚¹ãƒˆã‚’çµåˆã™ã‚‹é–¢æ•°</span>

<span class="kw">class</span> <span class="cl">ChatState</span>(TypedDict):
    user_input: <span class="cl">str</span>
    <span class="cm"># â†“ ã“ã“ãŒãƒã‚¤ãƒ³ãƒˆï¼ã€Œlistå‹ã§ã€addã§å‡¦ç†ã—ã¦ã­ã€</span>
    history: Annotated[<span class="cl">list</span>, add]
    response: <span class="cl">str</span>

<span class="kw">def</span> <span class="fn">chat_node</span>(state: <span class="cl">ChatState</span>) -> <span class="cl">dict</span>:
    new_message = {<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: state[<span class="st">"user_input"</span>]}
    <span class="cm"># âœ… ã“ã‚Œã§æ—¢å­˜å±¥æ­´ + æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ãªã‚‹ï¼</span>
    <span class="kw">return</span> {
        <span class="st">"history"</span>: [new_message],  <span class="cm"># è¿½åŠ ã—ãŸã„ã‚‚ã®ã ã‘è¿”ã›ã°OK</span>
        <span class="st">"response"</span>: <span class="st">"å›ç­”..."</span>
    }

<span class="cm"># å®Ÿè¡Œçµæœï¼š</span>
<span class="cm"># 1å›ç›®: history = [1å›ç›®ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]</span>
<span class="cm"># 2å›ç›®: history = [1å›ç›®, 2å›ç›®]  â† è¿½åŠ ã•ã‚ŒãŸï¼</span>
<span class="cm"># 3å›ç›®: history = [1å›ç›®, 2å›ç›®, 3å›ç›®] â† å…¨éƒ¨æ®‹ã£ã¦ã‚‹ï¼</span></pre>
                            </div>
                        </div>
                    </div>

                    <!-- å›³è§£ -->
                    <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 12px; margin: 1.5rem 0;">
                        <p style="color: #22c55e; font-weight: 700; margin-bottom: 1rem;">ğŸ“Š å‹•ä½œã®é•ã„ã‚’å›³è§£</p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                            <div style="text-align: center;">
                                <p style="color: #ef4444; font-weight: 600; margin-bottom: 0.5rem;">âŒ æ™®é€šã® listï¼ˆä¸Šæ›¸ãï¼‰</p>
                                <div style="background: #f0f2f5; padding: 1rem; border-radius: 8px; font-family: monospace; font-size: 0.85rem; color: #666666;">
                                    æ—¢å­˜: [A, B]<br>
                                    â†“ return {"history": [C]}<br>
                                    çµæœ: <span style="color: #ef4444;">[C]</span> â† A,BãŒæ¶ˆãˆãŸ
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <p style="color: #22c55e; font-weight: 600; margin-bottom: 0.5rem;">âœ… Annotated[list, add]ï¼ˆè¿½åŠ ï¼‰</p>
                                <div style="background: #f0f2f5; padding: 1rem; border-radius: 8px; font-family: monospace; font-size: 0.85rem; color: #666666;">
                                    æ—¢å­˜: [A, B]<br>
                                    â†“ return {"history": [C]}<br>
                                    çµæœ: <span style="color: #22c55e;">[A, B, C]</span> â† è¿½åŠ ã•ã‚ŒãŸ
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ã‚ˆãä½¿ã†ãƒ‘ã‚¿ãƒ¼ãƒ³ä¸€è¦§ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon blue">ğŸ“š</div>
                    <h3 class="card-title">ã‚ˆãä½¿ã†Stateãƒ‘ã‚¿ãƒ¼ãƒ³ä¸€è¦§ï¼ˆã‚³ãƒ”ãƒšç”¨ï¼‰</h3>
                </div>
                <div class="card-body">
                    <p>å®Ÿå‹™ã§ã‚ˆãä½¿ã†ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚å¿…è¦ã«å¿œã˜ã¦ã‚³ãƒ”ãƒšã—ã¦ãã ã•ã„ã€‚</p>

                    <div class="code-block">
                        <div class="code-header">Python - ãƒ‘ã‚¿ãƒ¼ãƒ³é›†ï¼ˆãã®ã¾ã¾ä½¿ãˆã¾ã™ï¼‰</div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span><span>46</span><span>47</span><span>48</span><span>49</span><span>50</span><span>51</span><span>52</span><span>53</span></div>
                            <div class="code-content">
<pre><span class="kw">from</span> typing <span class="kw">import</span> TypedDict, Annotated, Literal
<span class="kw">from</span> operator <span class="kw">import</span> add

<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># ãƒ‘ã‚¿ãƒ¼ãƒ³â‘ ï¼šã‚·ãƒ³ãƒ—ãƒ«ãªQ&Aï¼ˆå±¥æ­´ãªã—ï¼‰</span>
<span class="cm"># â†’ 1å›ã®è³ªå•ã«1å›ç­”ãˆã‚‹ã ã‘ã®ã‚·ãƒ³ãƒ—ãƒ«ãªã‚‚ã®</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="kw">class</span> <span class="cl">SimpleQAState</span>(TypedDict):
    question: <span class="cl">str</span>      <span class="cm"># ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•</span>
    answer: <span class="cl">str</span>        <span class="cm"># AIã®å›ç­”</span>

<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¡ï¼šãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆï¼ˆå±¥æ­´ã‚ã‚Šï¼‰</span>
<span class="cm"># â†’ ä¼šè©±ã®æµã‚Œã‚’è¦šãˆã¦ãŠããŸã„å ´åˆ</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="kw">class</span> <span class="cl">ChatbotState</span>(TypedDict):
    user_input: <span class="cl">str</span>                         <span class="cm"># ä»Šå›ã®å…¥åŠ›</span>
    messages: Annotated[<span class="cl">list</span>, add]          <span class="cm"># ä¼šè©±å±¥æ­´ï¼ˆè¿½åŠ ã•ã‚Œã‚‹ï¼‰</span>
    response: <span class="cl">str</span>                            <span class="cm"># ä»Šå›ã®å›ç­”</span>

<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¢ï¼šåˆ†é¡ãƒ»æŒ¯ã‚Šåˆ†ã‘</span>
<span class="cm"># â†’ è³ªå•ã®ç¨®é¡ã«ã‚ˆã£ã¦å‡¦ç†ã‚’å¤‰ãˆãŸã„å ´åˆ</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="kw">class</span> <span class="cl">RouterState</span>(TypedDict):
    user_input: <span class="cl">str</span>
    <span class="cm"># Literalã§é¸æŠè‚¢ã‚’é™å®šï¼ˆã‚¿ã‚¤ãƒé˜²æ­¢ï¼‰</span>
    category: Literal[<span class="st">"è³ªå•"</span>, <span class="st">"é›‘è«‡"</span>, <span class="st">"ã‚¯ãƒ¬ãƒ¼ãƒ "</span>]
    response: <span class="cl">str</span>

<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># ãƒ‘ã‚¿ãƒ¼ãƒ³â‘£ï¼šRAGï¼ˆæ¤œç´¢æ‹¡å¼µç”Ÿæˆï¼‰</span>
<span class="cm"># â†’ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ¤œç´¢ã—ã¦ã‹ã‚‰å›ç­”ã™ã‚‹å ´åˆ</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="kw">class</span> <span class="cl">RAGState</span>(TypedDict):
    query: <span class="cl">str</span>             <span class="cm"># ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•</span>
    retrieved_docs: <span class="cl">list</span>   <span class="cm"># æ¤œç´¢ã§è¦‹ã¤ã‘ãŸæ–‡æ›¸</span>
    context: <span class="cl">str</span>           <span class="cm"># æ–‡æ›¸ã‚’æ•´å½¢ã—ãŸã‚‚ã®</span>
    answer: <span class="cl">str</span>            <span class="cm"># æœ€çµ‚å›ç­”</span>
    sources: <span class="cl">list</span>          <span class="cm"># å‚ç…§å…ƒï¼ˆå‡ºå…¸ï¼‰</span>

<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¤ï¼šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆãƒ„ãƒ¼ãƒ«ä½¿ç”¨ï¼‰</span>
<span class="cm"># â†’ å¿…è¦ã«å¿œã˜ã¦ãƒ„ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã™å ´åˆ</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="kw">class</span> <span class="cl">AgentState</span>(TypedDict):
    user_input: <span class="cl">str</span>
    messages: Annotated[<span class="cl">list</span>, add]          <span class="cm"># ä¼šè©±å±¥æ­´</span>
    tool_calls: <span class="cl">list</span>                         <span class="cm"># å‘¼ã³å‡ºã™ãƒ„ãƒ¼ãƒ«</span>
    tool_results: Annotated[<span class="cl">list</span>, add]      <span class="cm"># ãƒ„ãƒ¼ãƒ«ã®çµæœï¼ˆè¿½åŠ ï¼‰</span>
    final_response: <span class="cl">str</span>                     <span class="cm"># æœ€çµ‚å›ç­”</span>
    iteration_count: <span class="cl">int</span>                    <span class="cm"># ãƒ«ãƒ¼ãƒ—å›æ•°</span>
    max_iterations: <span class="cl">int</span>                     <span class="cm"># æœ€å¤§ãƒ«ãƒ¼ãƒ—å›æ•°</span></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ã‚«ã‚¹ã‚¿ãƒ reducer -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon purple">âœ¨</div>
                    <h3 class="card-title">å¿œç”¨ï¼šã‚«ã‚¹ã‚¿ãƒ reducerï¼ˆå±¥æ­´ã‚’åˆ¶é™ã™ã‚‹ï¼‰</h3>
                </div>
                <div class="card-body">
                    <p><code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px;">add</code>ã ã¨å±¥æ­´ãŒç„¡é™ã«å¢—ãˆã¦ã—ã¾ã„ã¾ã™ã€‚<strong>ç›´è¿‘15ä»¶ã ã‘</strong>æ®‹ã—ãŸã„å ´åˆã¯ã€è‡ªåˆ†ã§å‡¦ç†ã‚’æ›¸ãã¾ã™ã€‚</p>

                    <div class="code-block">
                        <div class="code-header">Python - å±¥æ­´ã‚’15ä»¶ã«åˆ¶é™</div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span></div>
                            <div class="code-content">
<pre><span class="cm"># è‡ªåˆ†ã§ã€Œã©ã†å‡¦ç†ã™ã‚‹ã‹ã€ã‚’é–¢æ•°ã§å®šç¾©</span>
<span class="kw">def</span> <span class="fn">keep_recent_15</span>(existing: <span class="cl">list</span>, new: <span class="cl">list</span>) -> <span class="cl">list</span>:
    <span class="st">"""æ—¢å­˜ + æ–°è¦ã‚’çµåˆã—ã€ç›´è¿‘15ä»¶ã ã‘æ®‹ã™"""</span>
    combined = (existing <span class="kw">or</span> []) + (new <span class="kw">or</span> [])
    <span class="kw">return</span> combined[<span class="cl">-15</span>:]  <span class="cm"># å¾Œã‚ã‹ã‚‰15ä»¶</span>

<span class="cm"># ä½¿ã„æ–¹ï¼šaddã®ä»£ã‚ã‚Šã«è‡ªåˆ†ã®é–¢æ•°ã‚’æŒ‡å®š</span>
<span class="kw">class</span> <span class="cl">ChatState</span>(TypedDict):
    user_input: <span class="cl">str</span>
    messages: Annotated[<span class="cl">list</span>, keep_recent_15]  <span class="cm"># â†ã“ã“</span>
    response: <span class="cl">str</span>

<span class="cm"># å‹•ä½œï¼š</span>
<span class="cm"># [1,2,3...14,15] + [16] â†’ [2,3,4...15,16]ï¼ˆ1ãŒæ¶ˆãˆã‚‹ï¼‰</span>
<span class="cm"># å¸¸ã«15ä»¶ä»¥å†…ã‚’ã‚­ãƒ¼ãƒ—ï¼</span></pre>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(139, 92, 246, 0.1); border-left: 4px solid #8b5cf6; padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                        <p style="margin: 0; color: #a78bfa;"><strong>ğŸ’¡ ãªãœå±¥æ­´ã‚’åˆ¶é™ã™ã‚‹ï¼Ÿ</strong></p>
                        <ul style="margin: 0.5rem 0 0 0; padding-left: 1.2rem; color: #666666; font-size: 0.9rem;">
                            <li>LLMã«ã¯<strong>ãƒˆãƒ¼ã‚¯ãƒ³ä¸Šé™</strong>ãŒã‚ã‚‹ï¼ˆå±¥æ­´ãŒé•·ã™ãã‚‹ã¨ã‚¨ãƒ©ãƒ¼ï¼‰</li>
                            <li><strong>ã‚³ã‚¹ãƒˆå‰Šæ¸›</strong>ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³æ•°ã§èª²é‡‘ã•ã‚Œã‚‹ï¼‰</li>
                            <li><strong>ãƒ¬ã‚¹ãƒãƒ³ã‚¹é€Ÿåº¦</strong>ã®å‘ä¸Š</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- æ§‹é€ åŒ–å‡ºåŠ› -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon blue">ğŸ“¦</div>
                    <h3 class="card-title">å¿œç”¨ï¼šæ§‹é€ åŒ–å‡ºåŠ›ï¼ˆLLMã®å›ç­”ã‚’æ•´ç†æ•´é “ï¼‰</h3>
                </div>
                <div class="card-body">
                    <p>LLMï¼ˆAIï¼‰ã®å›ç­”ã¯é€šå¸¸ã€Œæ–‡å­—åˆ—ã€ã§è¿”ã£ã¦ãã¾ã™ã€‚ã§ã‚‚å®Ÿå‹™ã§ã¯<strong>ã€Œæ±ºã¾ã£ãŸå½¢å¼ã€</strong>ã§æ¬²ã—ã„ã“ã¨ãŒå¤šã„ã§ã™ã‚ˆã­ã€‚</p>

                    <!-- å•é¡Œæèµ· -->
                    <div style="background: rgba(239, 68, 68, 0.1); border-left: 4px solid #ef4444; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <p style="margin: 0; color: #f87171; font-weight: 700;">ğŸ˜± å›°ã‚‹ä¾‹ï¼šLLMã®å›ç­”ãŒãƒãƒ©ãƒãƒ©</p>
                        <div style="background: #f0f2f5; padding: 1rem; border-radius: 8px; margin-top: 0.5rem; font-family: monospace; font-size: 0.85rem; color: #666666;">
                            <p style="margin: 0; color: #6b7280;">è³ªå•: ã€Œä¼šè­°ã®è­°é¡Œã‚’æŠ½å‡ºã—ã¦ã€</p>
                            <p style="margin: 0.5rem 0 0 0;">å›ç­”1: ã€Œè­°é¡Œã¯äºˆç®—ã¨äººäº‹ã§ã™ã€</p>
                            <p style="margin: 0;">å›ç­”2: ã€Œ1. äºˆç®— 2. äººäº‹ã€</p>
                            <p style="margin: 0;">å›ç­”3: ã€Œäºˆç®—, äººäº‹ã€</p>
                            <p style="margin: 0.5rem 0 0 0; color: #ef4444;">â†’ æ¯å›é•ã†å½¢å¼...ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§å‡¦ç†ã—ã¥ã‚‰ã„ï¼</p>
                        </div>
                    </div>

                    <!-- è§£æ±ºç­– -->
                    <div style="background: rgba(34, 197, 94, 0.1); border-left: 4px solid #22c55e; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <p style="margin: 0; color: #22c55e; font-weight: 700;">âœ… è§£æ±ºç­–ï¼šæ§‹é€ åŒ–å‡ºåŠ›</p>
                        <p style="margin: 0.5rem 0 0 0; color: #d1d5db;">
                            ã€Œ<strong>ã“ã®å½¢å¼ã§å›ç­”ã—ã¦ã­</strong>ã€ã¨LLMã«ä¼ãˆã‚‹ã¨ã€å¿…ãšãã®å½¢å¼ã§è¿”ã—ã¦ãã‚Œã‚‹æ©Ÿèƒ½ã§ã™ã€‚
                        </p>
                        <div style="background: #f0f2f5; padding: 1rem; border-radius: 8px; margin-top: 0.5rem; font-family: monospace; font-size: 0.85rem; color: #666666;">
                            <p style="margin: 0; color: #6b7280;">å½¢å¼ã‚’æŒ‡å®šã™ã‚‹ã¨...</p>
                            <p style="margin: 0.5rem 0 0 0; color: #22c55e;">å›ç­”: {"topics": ["äºˆç®—", "äººäº‹"], "main_topic": "äºˆç®—"}</p>
                            <p style="margin: 0; color: #22c55e;">â†’ æ¯å›åŒã˜å½¢å¼ï¼ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§æ‰±ã„ã‚„ã™ã„ï¼</p>
                        </div>
                    </div>

                    <h4 style="margin: 1.5rem 0 1rem; color: #3b82f6;">Step 1: æ¬²ã—ã„å½¢å¼ã‚’å®šç¾©ã™ã‚‹ï¼ˆPydanticï¼‰</h4>
                    <p>ã¾ãšã€Œã“ã†ã„ã†å½¢å¼ã§æ¬²ã—ã„ã€ã‚’<code style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px;">Pydantic</code>ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§å®šç¾©ã—ã¾ã™ã€‚</p>

                    <div class="code-block">
                        <div class="code-header">Python - æ¬²ã—ã„å½¢å¼ã‚’å®šç¾©</div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span></div>
                            <div class="code-content">
<pre><span class="kw">from</span> pydantic <span class="kw">import</span> BaseModel, Field
<span class="kw">from</span> typing <span class="kw">import</span> List

<span class="cm"># ã€Œã“ã†ã„ã†å½¢å¼ã§è¿”ã—ã¦ã­ã€ã¨ã„ã†è¨­è¨ˆå›³</span>
<span class="kw">class</span> <span class="cl">MeetingTopics</span>(BaseModel):
    <span class="st">"""ä¼šè­°ã®è­°é¡ŒæŠ½å‡ºçµæœ"""</span>

    <span class="cm"># topics: è­°é¡Œã®ãƒªã‚¹ãƒˆï¼ˆæ–‡å­—åˆ—ã®é…åˆ—ï¼‰</span>
    topics: List[<span class="cl">str</span>] = Field(
        description=<span class="st">"æŠ½å‡ºã•ã‚ŒãŸè­°é¡Œã®ãƒªã‚¹ãƒˆ"</span>  <span class="cm"># LLMã¸ã®ãƒ’ãƒ³ãƒˆ</span>
    )

    <span class="cm"># main_topic: æœ€é‡è¦è­°é¡Œï¼ˆæ–‡å­—åˆ—1ã¤ï¼‰</span>
    main_topic: <span class="cl">str</span> = Field(
        description=<span class="st">"æœ€ã‚‚é‡è¦ãªè­°é¡Œ"</span>
    )</pre>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <p style="margin: 0; color: #60a5fa;"><strong>ğŸ’¡ Pydanticã¨ã¯ï¼Ÿ</strong></p>
                        <p style="margin: 0.5rem 0 0 0; color: #666666;">ã€Œãƒ‡ãƒ¼ã‚¿ã®å½¢å¼ã‚’å®šç¾©ã™ã‚‹ã€Pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚TypedDictã«ä¼¼ã¦ã„ã¾ã™ãŒã€ã‚ˆã‚Šå¤šæ©Ÿèƒ½ï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ç­‰ï¼‰ã§ã™ã€‚</p>
                    </div>

                    <h4 style="margin: 1.5rem 0 1rem; color: #3b82f6;">Step 2: LLMã«å½¢å¼ã‚’ä¼ãˆã¦å‘¼ã³å‡ºã™</h4>

                    <div class="code-block">
                        <div class="code-header">Python - æ§‹é€ åŒ–å‡ºåŠ›ã®ä½¿ã„æ–¹</div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span></div>
                            <div class="code-content">
<pre><span class="kw">from</span> langchain_google_genai <span class="kw">import</span> ChatGoogleGenerativeAI

<span class="cm"># 1. LLMã‚’ç”¨æ„</span>
llm = ChatGoogleGenerativeAI(model=<span class="st">"gemini-1.5-flash"</span>)

<span class="cm"># 2. ã€Œã“ã®å½¢å¼ã§è¿”ã—ã¦ã­ã€ã¨LLMã«ä¼ãˆã‚‹</span>
structured_llm = llm.with_structured_output(MeetingTopics)
<span class="cm">#                  â†‘ ã•ã£ãå®šç¾©ã—ãŸå½¢å¼</span>

<span class="cm"># 3. æ™®é€šã«å‘¼ã³å‡ºã™</span>
result = structured_llm.invoke(<span class="st">"ä»Šæ—¥ã®ä¼šè­°ã§ã¯äºˆç®—ã¨äººäº‹ã«ã¤ã„ã¦è©±ã—åˆã„ã¾ã—ãŸã€‚äºˆç®—ãŒæœ€é‡è¦ã§ã™ã€‚"</span>)

<span class="cm"># 4. çµæœã¯æŒ‡å®šã—ãŸå½¢å¼ã§è¿”ã£ã¦ãã‚‹ï¼</span>
<span class="bi">print</span>(result.topics)      <span class="cm"># ['äºˆç®—', 'äººäº‹']  â† ãƒªã‚¹ãƒˆå½¢å¼</span>
<span class="bi">print</span>(result.main_topic)  <span class="cm"># 'äºˆç®—'           â† æ–‡å­—åˆ—</span>

<span class="cm"># ãƒ‰ãƒƒãƒˆè¨˜æ³•ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ï¼</span>
<span class="cm"># result["topics"] ã§ã¯ãªã result.topics</span>
<span class="cm"># â†‘ ã“ã‚ŒãŒPydanticã®ä¾¿åˆ©ãªã¨ã“ã‚</span></pre>
                            </div>
                        </div>
                    </div>

                    <h4 style="margin: 1.5rem 0 1rem; color: #8b5cf6;">LangGraphã®Nodeã§ä½¿ã†å ´åˆ</h4>
                    <p>å®Ÿéš›ã®ã‚°ãƒ©ãƒ•å†…ã§ä½¿ã†å ´åˆã¯ã“ã†ãªã‚Šã¾ã™ï¼š</p>

                    <div class="code-block">
                        <div class="code-header">Python - Nodeã§ã®ä½¿ã„æ–¹</div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span></div>
                            <div class="code-content">
<pre><span class="cm"># Stateã®å®šç¾©</span>
<span class="kw">class</span> <span class="cl">MeetingState</span>(TypedDict):
    meeting_text: <span class="cl">str</span>   <span class="cm"># å…¥åŠ›ï¼šä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆ</span>
    topics: <span class="cl">list</span>        <span class="cm"># å‡ºåŠ›ï¼šè­°é¡Œãƒªã‚¹ãƒˆ</span>
    main_topic: <span class="cl">str</span>     <span class="cm"># å‡ºåŠ›ï¼šæœ€é‡è¦è­°é¡Œ</span>

<span class="cm"># è­°é¡ŒæŠ½å‡ºNode</span>
<span class="kw">def</span> <span class="fn">extract_topics_node</span>(state: MeetingState) -> <span class="cl">dict</span>:
    <span class="st">"""ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰è­°é¡Œã‚’æŠ½å‡º"""</span>

    <span class="cm"># æ§‹é€ åŒ–å‡ºåŠ›ã‚’è¨­å®šã—ãŸLLM</span>
    structured_llm = llm.with_structured_output(MeetingTopics)

    <span class="cm"># LLMã‚’å‘¼ã³å‡ºã—</span>
    result = structured_llm.invoke(state[<span class="st">"meeting_text"</span>])

    <span class="cm"># Stateã‚’æ›´æ–°ï¼ˆresultã‹ã‚‰å¿…è¦ãªå€¤ã‚’å–ã‚Šå‡ºã™ï¼‰</span>
    <span class="kw">return</span> {
        <span class="st">"topics"</span>: result.topics,       <span class="cm"># ãƒªã‚¹ãƒˆãŒãã®ã¾ã¾å…¥ã‚‹</span>
        <span class="st">"main_topic"</span>: result.main_topic <span class="cm"># æ–‡å­—åˆ—ãŒãã®ã¾ã¾å…¥ã‚‹</span>
    }</pre>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(34, 197, 94, 0.1); border-left: 4px solid #22c55e; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <p style="margin: 0 0 0.5rem; color: #22c55e; font-weight: 600;">âœ… æ§‹é€ åŒ–å‡ºåŠ›ã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆ</p>
                        <ul style="margin: 0 0 0 1rem; color: #666666; font-size: 0.9rem;">
                            <li><strong>å®‰å®šã—ãŸå‡ºåŠ›</strong>: æ¯å›åŒã˜å½¢å¼ã§è¿”ã£ã¦ãã‚‹</li>
                            <li><strong>ãƒ‘ãƒ¼ã‚¹ä¸è¦</strong>: JSONæ–‡å­—åˆ—ã‚’è‡ªåˆ†ã§è§£æã—ãªãã¦ã„ã„</li>
                            <li><strong>ã‚¿ã‚¤ãƒé˜²æ­¢</strong>: <code>result.topics</code>ã¨æ›¸ã‘ã°è£œå®ŒãŒåŠ¹ã</li>
                            <li><strong>ã‚¨ãƒ©ãƒ¼é˜²æ­¢</strong>: å½¢å¼ãŒé•ã†ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã§æ°—ã¥ã‘ã‚‹</li>
                        </ul>
                    </div>

                    <div style="background: rgba(249, 115, 22, 0.1); border-left: 4px solid #f97316; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <p style="margin: 0 0 0.5rem; color: #fb923c; font-weight: 600;">âš ï¸ æ³¨æ„ç‚¹ï¼ˆæœ€åˆã¯æ°—ã«ã—ãªãã¦OKï¼‰</p>
                        <ul style="margin: 0 0 0 1rem; color: #666666; font-size: 0.9rem;">
                            <li>å¯¾å¿œãƒ¢ãƒ‡ãƒ«: Gemini 1.5ã€GPT-4ã€Claude 3ãªã©æœ€æ–°ãƒ¢ãƒ‡ãƒ«ãŒå¿…è¦</li>
                            <li>è¤‡é›‘ã™ãã‚‹å½¢å¼ã¯ç²¾åº¦ãŒä¸‹ãŒã‚‹ã“ã¨ãŒã‚ã‚‹</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- å®Ÿè·µã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="project">
            <div class="section-header">
                <div class="section-number">6</div>
                <h2 class="section-title">å®Ÿè·µãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</h2>
                <p class="section-subtitle">ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆAIã‚’ä¸€ã‹ã‚‰ä½œã‚‹</p>
            </div>

            <!-- é€²è¡Œã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ -->
            <div class="card" style="padding: 1.5rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <span style="color: var(--accent-green); font-weight: 700;">ğŸ“ ç¾åœ¨ã®é€²è¡ŒçŠ¶æ³</span>
                    <span id="tutorialProgress" style="color: var(--text-secondary);">Step 1 / 6</span>
                </div>
                <div class="tut-step-buttons" style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <button class="tut-step-btn active" data-step="1" style="flex: 1; min-width: 80px; padding: 0.5rem; border: 2px solid var(--accent-green); background: rgba(85, 197, 0, 0.1); color: var(--accent-green); border-radius: 8px; cursor: pointer; font-size: 0.75rem; transition: all 0.3s;">1. ç’°å¢ƒ</button>
                    <button class="tut-step-btn" data-step="2" style="flex: 1; min-width: 80px; padding: 0.5rem; border: 1px solid var(--border-color); background: transparent; color: var(--text-secondary); border-radius: 8px; cursor: pointer; font-size: 0.75rem; transition: all 0.3s;">2. State</button>
                    <button class="tut-step-btn" data-step="3" style="flex: 1; min-width: 80px; padding: 0.5rem; border: 1px solid var(--border-color); background: transparent; color: var(--text-secondary); border-radius: 8px; cursor: pointer; font-size: 0.75rem; transition: all 0.3s;">3. Node</button>
                    <button class="tut-step-btn" data-step="4" style="flex: 1; min-width: 80px; padding: 0.5rem; border: 1px solid var(--border-color); background: transparent; color: var(--text-secondary); border-radius: 8px; cursor: pointer; font-size: 0.75rem; transition: all 0.3s;">4. åˆ†å²</button>
                    <button class="tut-step-btn" data-step="5" style="flex: 1; min-width: 80px; padding: 0.5rem; border: 1px solid var(--border-color); background: transparent; color: var(--text-secondary); border-radius: 8px; cursor: pointer; font-size: 0.75rem; transition: all 0.3s;">5. çµ„ç«‹</button>
                    <button class="tut-step-btn" data-step="6" style="flex: 1; min-width: 80px; padding: 0.5rem; border: 1px solid var(--border-color); background: transparent; color: var(--text-secondary); border-radius: 8px; cursor: pointer; font-size: 0.75rem; transition: all 0.3s;">6. å®Ÿè¡Œ</button>
                </div>
                <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; border: 1px solid var(--border-color);">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <span style="font-size: 2rem;" id="tutorialIcon">ğŸ“</span>
                        <div>
                            <div id="tutorialStepName" style="color: var(--text-primary); font-weight: 700;">ç’°å¢ƒæº–å‚™</div>
                            <div id="tutorialStepDesc" style="color: var(--text-secondary); font-size: 0.85rem;">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon blue">ğŸ¯</div>
                    <h3 class="card-title">ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ä½œã‚‹ã‚‚ã®</h3>
                </div>
                <p>å®Ÿéš›ã«å‹•ã<strong>è­°äº‹éŒ²è¦ç´„AI</strong>ã‚’ä½œã‚Šã¾ã™ã€‚ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰æ§‹é€ åŒ–ã•ã‚ŒãŸè­°äº‹éŒ²ã‚’è‡ªå‹•ç”Ÿæˆï¼</p>
                <div class="highlight-box success" style="margin: 1rem 0;">
                    <div class="highlight-title">âœ… å®Œæˆå¾Œã«ã§ãã‚‹ã“ã¨</div>
                    <ul style="margin: 0.5rem 0 0 1.5rem;">
                        <li>ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã‚’<strong>è‡ªå‹•è¦ç´„</strong>ï¼ˆ300æ–‡å­—ç¨‹åº¦ï¼‰</li>
                        <li>ä¸»è¦ãª<strong>è­°é¡Œã‚’æŠ½å‡º</strong>ï¼ˆãƒªã‚¹ãƒˆå½¢å¼ï¼‰</li>
                        <li><strong>ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ </strong>ã‚’è‡ªå‹•æŠ½å‡ºï¼ˆæ‹…å½“è€…ãƒ»æœŸé™ä»˜ãï¼‰</li>
                        <li>é•·ã„ä¼šè­°ã¯è©³ç´°ãƒ¢ãƒ¼ãƒ‰ã€çŸ­ã„ä¼šè­°ã¯ç°¡æ˜“ãƒ¢ãƒ¼ãƒ‰ã§<strong>è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ</strong></li>
                    </ul>
                </div>
                <div class="diagram-container">
                    <div class="diagram-title">å®Œæˆã‚¤ãƒ¡ãƒ¼ã‚¸ - è­°äº‹éŒ²è¦ç´„AIã®ãƒ•ãƒ­ãƒ¼</div>
                    <svg class="svg-diagram" viewBox="0 0 800 280">
                        <defs>
                            <marker id="arrTut" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#667eea"/>
                            </marker>
                        </defs>
                        <!-- START -->
                        <circle cx="50" cy="110" r="25" fill="#10b981" fill-opacity="0.3" stroke="#10b981" stroke-width="2"/>
                        <text x="50" y="115" text-anchor="middle" fill="#10b981" font-size="10">START</text>
                        <!-- Arrow to summarize -->
                        <line x1="75" y1="110" x2="115" y2="110" stroke="#667eea" stroke-width="2" marker-end="url(#arrTut)"/>
                        <!-- summarize -->
                        <rect x="120" y="85" width="80" height="50" rx="8" fill="#667eea" fill-opacity="0.3" stroke="#667eea" stroke-width="2"/>
                        <text x="160" y="105" text-anchor="middle" fill="#667eea" font-size="9">summarize</text>
                        <text x="160" y="120" text-anchor="middle" fill="#667eea" font-size="9">_node</text>
                        <text x="160" y="148" text-anchor="middle" fill="#4ade80" font-size="8">è¦ç´„ç”Ÿæˆ</text>
                        <!-- Arrow to check_length -->
                        <line x1="200" y1="110" x2="240" y2="110" stroke="#667eea" stroke-width="2" marker-end="url(#arrTut)"/>
                        <!-- check_length -->
                        <rect x="245" y="85" width="80" height="50" rx="8" fill="#06b6d4" fill-opacity="0.3" stroke="#06b6d4" stroke-width="2"/>
                        <text x="285" y="105" text-anchor="middle" fill="#06b6d4" font-size="9">check</text>
                        <text x="285" y="120" text-anchor="middle" fill="#06b6d4" font-size="9">_length</text>
                        <text x="285" y="148" text-anchor="middle" fill="#4ade80" font-size="8">é•·ã•åˆ¤å®š</text>
                        <!-- Diamond (routing) -->
                        <polygon points="390,110 420,80 450,110 420,140" fill="#8b5cf6" fill-opacity="0.3" stroke="#8b5cf6" stroke-width="2"/>
                        <text x="420" y="113" text-anchor="middle" fill="#8b5cf6" font-size="9">is_long?</text>
                        <text x="420" y="158" text-anchor="middle" fill="#8b5cf6" font-size="8">æ¡ä»¶åˆ†å²</text>
                        <line x1="325" y1="110" x2="385" y2="110" stroke="#667eea" stroke-width="2" marker-end="url(#arrTut)"/>
                        <!-- Detailed path (top) -->
                        <line x1="450" y1="95" x2="490" y2="60" stroke="#22c55e" stroke-width="2" marker-end="url(#arrTut)"/>
                        <text x="455" y="60" fill="#22c55e" font-size="8">é•·ã„</text>
                        <!-- extract_topics -->
                        <rect x="495" y="35" width="70" height="45" rx="6" fill="#22c55e" fill-opacity="0.3" stroke="#22c55e" stroke-width="2"/>
                        <text x="530" y="53" text-anchor="middle" fill="#22c55e" font-size="8">extract</text>
                        <text x="530" y="66" text-anchor="middle" fill="#22c55e" font-size="8">_topics</text>
                        <text x="530" y="20" text-anchor="middle" fill="#4ade80" font-size="7">è­°é¡ŒæŠ½å‡º</text>
                        <!-- Arrow to extract_actions -->
                        <line x1="565" y1="57" x2="590" y2="57" stroke="#667eea" stroke-width="2" marker-end="url(#arrTut)"/>
                        <!-- extract_actions -->
                        <rect x="595" y="35" width="70" height="45" rx="6" fill="#f97316" fill-opacity="0.3" stroke="#f97316" stroke-width="2"/>
                        <text x="630" y="53" text-anchor="middle" fill="#f97316" font-size="8">extract</text>
                        <text x="630" y="66" text-anchor="middle" fill="#f97316" font-size="8">_actions</text>
                        <text x="630" y="20" text-anchor="middle" fill="#4ade80" font-size="7">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡º</text>
                        <!-- Arrow from actions to format -->
                        <line x1="665" y1="80" x2="665" y2="120" stroke="#667eea" stroke-width="2" marker-end="url(#arrTut)"/>
                        <!-- Simple path (bottom) -->
                        <line x1="450" y1="125" x2="540" y2="160" stroke="#f97316" stroke-width="2" marker-end="url(#arrTut)"/>
                        <text x="475" y="160" fill="#f97316" font-size="8">çŸ­ã„</text>
                        <!-- format_doc -->
                        <rect x="545" y="135" width="80" height="50" rx="8" fill="#ec4899" fill-opacity="0.3" stroke="#ec4899" stroke-width="2"/>
                        <text x="585" y="155" text-anchor="middle" fill="#ec4899" font-size="9">format</text>
                        <text x="585" y="170" text-anchor="middle" fill="#ec4899" font-size="9">_doc</text>
                        <text x="585" y="198" text-anchor="middle" fill="#4ade80" font-size="8">è­°äº‹éŒ²æ•´å½¢</text>
                        <!-- Connect detailed to format -->
                        <line x1="665" y1="130" x2="625" y2="145" stroke="#667eea" stroke-width="2"/>
                        <!-- Arrow to END -->
                        <line x1="625" y1="160" x2="700" y2="160" stroke="#667eea" stroke-width="2" marker-end="url(#arrTut)"/>
                        <!-- END -->
                        <circle cx="730" cy="160" r="25" fill="#ec4899" fill-opacity="0.3" stroke="#ec4899" stroke-width="2"/>
                        <text x="730" y="165" text-anchor="middle" fill="#ec4899" font-size="10">END</text>

                        <!-- è£œè¶³èª¬æ˜ -->
                        <text x="400" y="240" text-anchor="middle" fill="#333333" font-size="10">ğŸ’¡ é•·ã„ä¼šè­°ï¼ˆ2000æ–‡å­—ä»¥ä¸Šï¼‰â†’ è©³ç´°ãƒ¢ãƒ¼ãƒ‰ï¼ˆè­°é¡Œãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡ºï¼‰</text>
                        <text x="400" y="260" text-anchor="middle" fill="#333333" font-size="10">ğŸ’¡ çŸ­ã„ä¼šè­° â†’ ç°¡æ˜“ãƒ¢ãƒ¼ãƒ‰ï¼ˆè¦ç´„ã®ã¿ã§æ•´å½¢ã¸ç›´è¡Œï¼‰</text>
                    </svg>
                </div>
            </div>

            <!-- ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ -->
            <div class="tutorial-layout">
                <!-- å·¦å´: ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
                <div class="tutorial-content">

            <!-- ã‚¹ãƒ†ãƒƒãƒ—1 -->
            <div class="card" id="tut-step1">
                <div class="card-header">
                    <div class="card-icon green">ğŸ“</div>
                    <h3 class="card-title">Step 1: ç’°å¢ƒæº–å‚™</h3>
                </div>
                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                    ã€Œ<strong>è­°äº‹éŒ²è¦ç´„AI</strong>ã€ã‚’ä½œã‚Šã¾ã™ã€‚ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆ â†’ è¦ç´„ãƒ»è­°é¡Œãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è‡ªå‹•æŠ½å‡ºã—ã¾ã™ã€‚
                </p>

                <!-- Google Colabæ¨å¥¨ -->
                <div style="background: #fff8f5; border: 1px solid #f97316; border-radius: 8px; padding: 1.25rem; margin: 1rem 0;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <span style="font-size: 2rem;">ğŸ““</span>
                        <div>
                            <div style="color: #fb923c; font-weight: 700; font-size: 1.1rem;">Google Colab ã§å®Ÿè¡Œã—ã¾ã™</div>
                            <div style="color: #666666; font-size: 0.9rem;">ç’°å¢ƒæ§‹ç¯‰ä¸è¦ï¼ãƒ–ãƒ©ã‚¦ã‚¶ã ã‘ã§å§‹ã‚ã‚‰ã‚Œã¾ã™</div>
                        </div>
                    </div>
                    <a href="https://colab.research.google.com/" target="_blank" style="display: inline-block; background: #f97316; color: white; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600;">
                        ğŸš€ Google Colab ã‚’é–‹ã
                    </a>
                </div>

                <div class="code-block">
                    <div class="code-header">Python (Colab) - ã‚»ãƒ«1: ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span></div>
                        <div class="code-content">
<pre><span class="cm"># ============================================</span>
<span class="cm"># å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span>
<span class="cm">#   langgraph: ã‚°ãƒ©ãƒ•æ§‹ç¯‰ã®æœ¬ä½“</span>
<span class="cm">#   ã©ã¡ã‚‰ã‹1ã¤ã‚’é¸ã‚“ã§ãã ã•ã„ï¼ˆä¸¡æ–¹å…¥ã‚Œã¦ã‚‚OKï¼‰</span>
<span class="cm"># ============================================</span>
!pip install -q langgraph langchain-google-genai      <span class="cm"># â† Gemini APIç‰ˆ</span>
<span class="cm"># !pip install -q langgraph langchain-google-vertexai  # â† Vertex AIç‰ˆ</span></pre>
                        </div>
                    </div>
                </div>

                <!-- LLMé¸æŠ: 2ã¤ã®æ–¹å¼ -->
                <div style="margin: 1.5rem 0;">
                    <p style="color: var(--text-primary); font-weight: 700; margin-bottom: 1rem;">ğŸ”§ LLMã®è¨­å®šï¼ˆã©ã¡ã‚‰ã‹1ã¤ã‚’é¸æŠï¼‰</p>
                    <div style="display: grid; gap: 1rem;">
                        <!-- æ–¹å¼A: Gemini API -->
                        <div style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(34, 197, 94, 0.05)); border: 2px solid #22c55e; border-radius: 12px; padding: 1.25rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                                <span style="background: #22c55e; color: white; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.8rem; font-weight: 700;">æ¨å¥¨</span>
                                <span style="color: #22c55e; font-weight: 700;">æ–¹å¼A: Gemini APIï¼ˆç°¡å˜ï¼ï¼‰</span>
                            </div>
                            <div style="color: #666666; font-size: 0.9rem; margin-bottom: 1rem;">
                                <strong>ãƒ¡ãƒªãƒƒãƒˆ:</strong> GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸è¦ã€APIã‚­ãƒ¼ã‚’å–å¾—ã™ã‚‹ã ã‘<br>
                                <strong>å–å¾—æ–¹æ³•:</strong> <a href="https://aistudio.google.com/app/apikey" target="_blank" style="color: #22c55e;">Google AI Studio</a> ã§ç„¡æ–™ç™ºè¡Œï¼ˆ1åˆ†ã§å®Œäº†ï¼‰
                            </div>
                            <div class="code-block" style="margin: 0;">
                                <div class="code-header">Python (Colab) - ã‚»ãƒ«2A: Gemini APIè¨­å®š</div>
                                <div class="code-body">
                                    <div class="code-content">
<pre><span class="cm"># ============================================</span>
<span class="cm"># æ–¹å¼A: Gemini APIï¼ˆAPIã‚­ãƒ¼ã§èªè¨¼ï¼‰</span>
<span class="cm"># ============================================</span>
<span class="kw">from</span> google.colab <span class="kw">import</span> userdata
<span class="kw">import</span> os

<span class="cm"># Colabã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‹ã‚‰å–å¾—ï¼ˆå·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ğŸ”‘ã‚¢ã‚¤ã‚³ãƒ³ï¼‰</span>
os.environ[<span class="st">"GOOGLE_API_KEY"</span>] = userdata.get(<span class="st">"GOOGLE_API_KEY"</span>)

<span class="cm"># LLMã‚’åˆæœŸåŒ–</span>
<span class="kw">from</span> langchain_google_genai <span class="kw">import</span> ChatGoogleGenerativeAI
llm = ChatGoogleGenerativeAI(model=<span class="st">"gemini-1.5-flash"</span>)

<span class="bi">print</span>(<span class="st">"âœ… Gemini API è¨­å®šå®Œäº†"</span>)</pre>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- æ–¹å¼B: Vertex AI -->
                        <div style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.05)); border: 2px solid #3b82f6; border-radius: 12px; padding: 1.25rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                                <span style="background: #3b82f6; color: white; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.8rem; font-weight: 700;">æœ¬ç•ªå‘ã‘</span>
                                <span style="color: #60a5fa; font-weight: 700;">æ–¹å¼B: Vertex AIï¼ˆGCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰</span>
                            </div>
                            <div style="color: #666666; font-size: 0.9rem; margin-bottom: 1rem;">
                                <strong>ãƒ¡ãƒªãƒƒãƒˆ:</strong> Cloud Runãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ã‚³ãƒ¼ãƒ‰å¤‰æ›´ä¸è¦ã€GCPã®ä»–ã‚µãƒ¼ãƒ“ã‚¹ã¨é€£æºã—ã‚„ã™ã„<br>
                                <strong>å¿…è¦ãªã‚‚ã®:</strong> GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ + Vertex AI APIã®æœ‰åŠ¹åŒ–
                            </div>
                            <div class="code-block" style="margin: 0;">
                                <div class="code-header">Python (Colab) - ã‚»ãƒ«2B: Vertex AIè¨­å®š</div>
                                <div class="code-body">
                                    <div class="code-content">
<pre><span class="cm"># ============================================</span>
<span class="cm"># æ–¹å¼B: Vertex AIï¼ˆGCPèªè¨¼ï¼‰</span>
<span class="cm"># ============================================</span>
<span class="kw">from</span> google.colab <span class="kw">import</span> auth
auth.authenticate_user()

<span class="cm"># â˜…â˜…â˜… ã‚ãªãŸã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã«æ›¸ãæ›ãˆ â˜…â˜…â˜…</span>
PROJECT_ID = <span class="st">"your-project-id"</span>
LOCATION = <span class="st">"asia-northeast1"</span>

<span class="cm"># LLMã‚’åˆæœŸåŒ–</span>
<span class="kw">from</span> langchain_google_vertexai <span class="kw">import</span> ChatVertexAI
llm = ChatVertexAI(
    model=<span class="st">"gemini-1.5-flash"</span>,
    project=PROJECT_ID,
    location=LOCATION
)

<span class="bi">print</span>(<span class="st">f"âœ… Vertex AI è¨­å®šå®Œäº†: {PROJECT_ID}"</span>)</pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="highlight-box success">
                    <div class="highlight-title">âœ… ã©ã¡ã‚‰ã‚’é¸ã‚“ã§ã‚‚ã€ã“ã®å¾Œã®ã‚³ãƒ¼ãƒ‰ã¯åŒã˜ï¼</div>
                    <p style="margin: 0;">
                        ã©ã¡ã‚‰ã®æ–¹å¼ã§ã‚‚ <code>llm</code> å¤‰æ•°ã«LLMãŒå…¥ã‚‹ã®ã§ã€<strong>Step 2ä»¥é™ã®ã‚³ãƒ¼ãƒ‰ã¯ãã®ã¾ã¾å‹•ãã¾ã™</strong>ã€‚<br>
                        è¿·ã£ãŸã‚‰<strong>æ–¹å¼Aï¼ˆGemini APIï¼‰</strong>ãŒãŠã™ã™ã‚ã€‚1åˆ†ã§å§‹ã‚ã‚‰ã‚Œã¾ã™ã€‚
                    </p>
                </div>

                <!-- Colabã§ã®é€²ã‚æ–¹ -->
                <div class="highlight-box" style="background: linear-gradient(135deg, #f8f9fa 0%, #f0f2f5 100%); border-left-color: var(--accent-purple); margin-top: 2rem;">
                    <div class="highlight-title" style="color: var(--accent-purple);">ğŸ““ Colabã§ã®é€²ã‚æ–¹</div>
                    <p style="margin: 0;">ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¯<strong>1ã¤ã®ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯å†…ã§ã‚»ãƒ«ã‚’åˆ†ã‘ã¦</strong>é€²ã‚ã¾ã™ã€‚<br>
                    Step 2ã€œ6ã®ã‚³ãƒ¼ãƒ‰ã‚’é †ç•ªã«ã‚»ãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦å®Ÿè¡Œã™ã‚‹ã ã‘ã§OKï¼</p>
                </div>

                <div style="background: #f0f2f5; border: 1px solid var(--border-color); border-radius: 12px; padding: 1.25rem; margin: 1rem 0;">
                    <div style="color: var(--accent-cyan); font-weight: 700; margin-bottom: 0.75rem;">ğŸ“‹ ã“ã‚Œã‹ã‚‰ä½œã‚‹ã‚»ãƒ«æ§‹æˆ</div>
                    <div style="display: grid; gap: 0.5rem; font-size: 0.9rem;">
                        <div style="display: flex; align-items: center; gap: 0.75rem; color: #666666;">
                            <span style="background: #22c55e; color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">å®Œäº†</span>
                            <span>ã‚»ãƒ«1-2: ç’°å¢ƒæº–å‚™ & LLMè¨­å®š</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.75rem; color: var(--text-secondary);">
                            <span style="background: var(--border-color); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">Step 2</span>
                            <span>ã‚»ãƒ«3: Stateå®šç¾©ï¼ˆMeetingStateï¼‰</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.75rem; color: var(--text-secondary);">
                            <span style="background: var(--border-color); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">Step 3</span>
                            <span>ã‚»ãƒ«4: Nodeé–¢æ•°ï¼ˆsummarize_nodeç­‰ï¼‰</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.75rem; color: var(--text-secondary);">
                            <span style="background: var(--border-color); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">Step 4</span>
                            <span>ã‚»ãƒ«5: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°é–¢æ•°ï¼ˆroute_by_lengthï¼‰</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.75rem; color: var(--text-secondary);">
                            <span style="background: var(--border-color); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">Step 5</span>
                            <span>ã‚»ãƒ«6: ã‚°ãƒ©ãƒ•çµ„ã¿ç«‹ã¦</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.75rem; color: var(--text-secondary);">
                            <span style="background: var(--border-color); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">Step 6</span>
                            <span>ã‚»ãƒ«7: å®Ÿè¡Œãƒ†ã‚¹ãƒˆ</span>
                        </div>
                    </div>
                </div>

                <div class="highlight-box success">
                    <div class="highlight-title">ğŸ’¡ æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã®ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²</div>
                    <p style="margin: 0;">Colabã§å‹•ä½œç¢ºèªã—ãŸå¾Œã€Cloud Runã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éš›ã¯<strong>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²</strong>ã—ã¾ã™ã€‚<br>
                    è©³ã—ãã¯ã€Œãƒ‡ãƒ—ãƒ­ã‚¤ã€ã‚¿ãƒ–ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
                </div>
            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—2 -->
            <div class="card" id="tut-step2">
                <div class="card-header">
                    <div class="card-icon emerald">ğŸ“¦</div>
                    <h3 class="card-title">Step 2: Stateã‚’å®šç¾©ã™ã‚‹</h3>
                </div>

                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                    <strong>State</strong>ã¯ã‚°ãƒ©ãƒ•å…¨ä½“ã§å…±æœ‰ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®å…¥ã‚Œç‰©ã§ã™ã€‚å„NodeãŒã“ã‚Œã‚’èª­ã¿æ›¸ãã—ã¾ã™ã€‚
                </p>

                <div class="code-block">
                    <div class="code-header">Python (Colab) - ã‚»ãƒ«3: Stateå®šç¾©</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span><span>46</span><span>47</span></div>
                        <div class="code-content">
<pre><span class="st">"""
Stateå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«

ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²ã€‘
LangGraphã§å‡¦ç†ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®ã€Œå‹ã€ã‚’å®šç¾©ã—ã¾ã™ã€‚
TypedDictã‚’ä½¿ã†ã¨ã€IDEã®è£œå®ŒãŒåŠ¹ã„ã¦é–‹ç™ºãŒæ¥½ã«ãªã‚Šã¾ã™ã€‚
"""</span>

<span class="kw">from</span> typing <span class="kw">import</span> TypedDict, Literal, Annotated, List
<span class="kw">from</span> operator <span class="kw">import</span> add  <span class="cm"># ãƒªã‚¹ãƒˆã‚’ã€Œè¿½åŠ ã€ã™ã‚‹ãŸã‚ã®reducer</span>


<span class="kw">class</span> <span class="cl">MeetingState</span>(TypedDict):
    <span class="st">"""
    è­°äº‹éŒ²è¦ç´„AIã®çŠ¶æ…‹ï¼ˆStateï¼‰

    ã€è¨­è¨ˆã®ãƒã‚¤ãƒ³ãƒˆã€‘
    1. å…¥åŠ›: æœ€åˆã«ä¸ãˆã‚‹ãƒ‡ãƒ¼ã‚¿ï¼ˆraw_textï¼‰
    2. ä¸­é–“: å‡¦ç†é€”ä¸­ã§åŸ‹ã¾ã‚‹ãƒ‡ãƒ¼ã‚¿ï¼ˆsummary, is_longï¼‰
    3. å‡ºåŠ›: æœ€çµ‚çš„ã«å–ã‚Šå‡ºã™ãƒ‡ãƒ¼ã‚¿ï¼ˆtopics, action_items, final_docï¼‰
    """</span>

    <span class="cm"># ============================</span>
    <span class="cm"># å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¸ãˆã‚‹ï¼‰</span>
    <span class="cm"># ============================</span>
    raw_text: <span class="cl">str</span>  <span class="cm"># ä¼šè­°ã®ç”Ÿãƒ†ã‚­ã‚¹ãƒˆï¼ˆZoomæ–‡å­—èµ·ã“ã—ç­‰ï¼‰</span>

    <span class="cm"># ============================</span>
    <span class="cm"># ä¸­é–“ãƒ‡ãƒ¼ã‚¿ï¼ˆNodeãŒåŸ‹ã‚ã¦ã„ãï¼‰</span>
    <span class="cm"># ============================</span>
    summary: <span class="cl">str</span>              <span class="cm"># è¦ç´„çµæœï¼ˆ300æ–‡å­—ç¨‹åº¦ï¼‰</span>
    is_long: <span class="cl">bool</span>             <span class="cm"># é•·ã„ä¼šè­°ã‹ï¼Ÿï¼ˆæ¡ä»¶åˆ†å²ã«ä½¿ç”¨ï¼‰</span>
    topics: List[<span class="cl">str</span>]        <span class="cm"># è­°é¡Œãƒªã‚¹ãƒˆï¼ˆä¾‹: ["äºˆç®—", "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«"]ï¼‰</span>
    action_items: List[<span class="cl">str</span>]  <span class="cm"># ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ï¼ˆä¾‹: ["ç”°ä¸­: è¦‹ç©ä½œæˆ"]ï¼‰</span>

    <span class="cm"># ============================</span>
    <span class="cm"># å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ï¼ˆæœ€çµ‚æˆæœç‰©ï¼‰</span>
    <span class="cm"># ============================</span>
    final_doc: <span class="cl">str</span>  <span class="cm"># æ•´å½¢ã•ã‚ŒãŸè­°äº‹éŒ²ï¼ˆMarkdownå½¢å¼ï¼‰</span>

    <span class="cm"># ============================</span>
    <span class="cm"># å‡¦ç†ãƒ­ã‚°ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰</span>
    <span class="cm"># Annotated[List, add] = æ–°ã—ã„å€¤ãŒã€Œè¿½åŠ ã€ã•ã‚Œã‚‹</span>
    <span class="cm"># â†’ å„NodeãŒ ["[è¦ç´„å®Œäº†]", "[è­°é¡ŒæŠ½å‡ºå®Œäº†]"] ã¨è¿½åŠ ã—ã¦ã„ã</span>
    <span class="cm"># ============================</span>
    logs: Annotated[List[<span class="cl">str</span>], add]</pre>
                        </div>
                    </div>
                </div>

                <div class="highlight-box success">
                    <div class="highlight-title">ğŸ’¡ å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®èª¬æ˜</div>
                    <table style="width: 100%; margin-top: 0.5rem;">
                        <tr>
                            <th style="width: 25%; padding: 0.5rem; background: rgba(34, 197, 94, 0.1);">ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</th>
                            <th style="width: 35%; padding: 0.5rem; background: rgba(34, 197, 94, 0.1);">å½¹å‰²</th>
                            <th style="width: 40%; padding: 0.5rem; background: rgba(34, 197, 94, 0.1);">èª°ãŒè¨­å®šï¼Ÿ</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;"><code>raw_text</code></td>
                            <td style="padding: 0.5rem;">ç”Ÿã®ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆ</td>
                            <td style="padding: 0.5rem;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆæœ€åˆã«æ¸¡ã™ï¼‰</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;"><code>summary</code></td>
                            <td style="padding: 0.5rem;">è¦ç´„ãƒ†ã‚­ã‚¹ãƒˆ</td>
                            <td style="padding: 0.5rem;">summarize_node</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;"><code>is_long</code></td>
                            <td style="padding: 0.5rem;">é•·ã„ä¼šè­°ãƒ•ãƒ©ã‚°</td>
                            <td style="padding: 0.5rem;">check_length_node</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;"><code>topics</code></td>
                            <td style="padding: 0.5rem;">è­°é¡Œãƒªã‚¹ãƒˆ</td>
                            <td style="padding: 0.5rem;">extract_topics_node</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;"><code>action_items</code></td>
                            <td style="padding: 0.5rem;">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§</td>
                            <td style="padding: 0.5rem;">extract_actions_node</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;"><code>final_doc</code></td>
                            <td style="padding: 0.5rem;">æœ€çµ‚è­°äº‹éŒ²</td>
                            <td style="padding: 0.5rem;">format_doc_node</td>
                        </tr>
                    </table>
                </div>

                <div class="highlight-box" style="background: #f8f9fa; border-left-color: var(--accent-cyan);">
                    <div class="highlight-title" style="color: var(--accent-cyan);">ğŸ§‘â€ğŸ’» AIã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢è¦–ç‚¹</div>
                    <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                        <li><strong>Stateè¨­è¨ˆã¯æœ€åˆã«ã—ã£ã‹ã‚Šè€ƒãˆã‚‹ï¼</strong> å¾Œã‹ã‚‰è¿½åŠ ã¯ç°¡å˜ã ãŒã€å‰Šé™¤ã¯æ—¢å­˜Nodeã«å½±éŸ¿</li>
                        <li><code>logs</code>ã®ã‚ˆã†ãª<strong>Annotated[List, add]</strong>ã¯ã€å„NodeãŒãƒ­ã‚°ã‚’ã€Œè¿½è¨˜ã€ã§ãã¦ä¾¿åˆ©</li>
                        <li>å®Ÿå‹™ã§ã¯<code>error_message</code>ã‚„<code>retry_count</code>ã‚‚å…¥ã‚Œã¦ãŠãã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ã‚„ã™ã„</li>
                    </ul>
                </div>

                <!-- TypedDict vs BaseModel -->
                <div style="background: linear-gradient(135deg, #f8f9fa 0%, #f0f2f5 100%); border: 2px solid var(--accent-purple); border-radius: 12px; padding: 1.5rem; margin: 1.5rem 0;">
                    <div style="color: var(--accent-purple); font-weight: 700; margin-bottom: 1rem; font-size: 1.1rem;">ğŸ“š Stateå®šç¾©ã®2ã¤ã®æ–¹æ³•ï¼šTypedDict vs BaseModel</div>

                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        LangGraphã§ã¯ <code>TypedDict</code>ï¼ˆä¸Šè¨˜ã®ä¾‹ï¼‰ã¨ <code>BaseModel</code>ï¼ˆPydanticï¼‰ã®ä¸¡æ–¹ã§Stateã‚’å®šç¾©ã§ãã¾ã™ã€‚<br>
                        ç”¨é€”ã«å¿œã˜ã¦ä½¿ã„åˆ†ã‘ã¾ã—ã‚‡ã†ã€‚
                    </p>

                    <table style="width: 100%; margin: 1rem 0; border-collapse: collapse;">
                        <tr>
                            <th style="padding: 0.75rem; background: rgba(139, 92, 246, 0.2); border: 1px solid var(--border-color); text-align: left;">æ–¹å¼</th>
                            <th style="padding: 0.75rem; background: rgba(139, 92, 246, 0.2); border: 1px solid var(--border-color); text-align: left;">ãƒ¡ãƒªãƒƒãƒˆ</th>
                            <th style="padding: 0.75rem; background: rgba(139, 92, 246, 0.2); border: 1px solid var(--border-color); text-align: left;">ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem; border: 1px solid var(--border-color);"><code>TypedDict</code></td>
                            <td style="padding: 0.75rem; border: 1px solid var(--border-color); color: var(--text-secondary);">ã‚·ãƒ³ãƒ—ãƒ«ã€è»½é‡ã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§å¤šç”¨</td>
                            <td style="padding: 0.75rem; border: 1px solid var(--border-color); color: var(--text-secondary);">ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãªã—</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem; border: 1px solid var(--border-color);"><code>BaseModel</code></td>
                            <td style="padding: 0.75rem; border: 1px solid var(--border-color); color: var(--text-secondary);">Field()ã§èª¬æ˜ãƒ»ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½</td>
                            <td style="padding: 0.75rem; border: 1px solid var(--border-color); color: var(--text-secondary);">ã‚„ã‚„å†—é•·</td>
                        </tr>
                    </table>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                        <!-- TypedDictç‰ˆ -->
                        <div style="background: #f0f2f5; border-radius: 8px; padding: 1rem; border: 2px solid var(--accent-green);">
                            <div style="color: var(--accent-green); font-weight: 600; margin-bottom: 0.5rem;">TypedDictç‰ˆï¼ˆã‚·ãƒ³ãƒ—ãƒ«ï¼‰</div>
                            <pre style="font-size: 0.75rem; color: var(--text-secondary); margin: 0; overflow-x: auto;"><span class="kw">from</span> typing <span class="kw">import</span> TypedDict

<span class="kw">class</span> <span class="cl">MeetingState</span>(TypedDict):
    raw_text: <span class="cl">str</span>
    summary: <span class="cl">str</span>
    is_long: <span class="cl">bool</span></pre>
                        </div>

                        <!-- BaseModelç‰ˆ -->
                        <div style="background: #f0f2f5; border-radius: 8px; padding: 1rem; border: 2px solid var(--accent-purple);">
                            <div style="color: var(--accent-purple); font-weight: 600; margin-bottom: 0.5rem;">BaseModelç‰ˆï¼ˆPydanticï¼‰</div>
                            <pre style="font-size: 0.75rem; color: var(--text-secondary); margin: 0; overflow-x: auto;"><span class="kw">from</span> pydantic <span class="kw">import</span> BaseModel, Field

<span class="kw">class</span> <span class="cl">MeetingState</span>(BaseModel):
    raw_text: <span class="cl">str</span> = Field(
        default=<span class="st">""</span>,
        description=<span class="st">"ä¼šè­°ã®ç”Ÿãƒ†ã‚­ã‚¹ãƒˆ"</span>
    )
    summary: <span class="cl">str</span> = Field(
        default=<span class="st">""</span>,
        description=<span class="st">"è¦ç´„çµæœ"</span>
    )
    is_long: <span class="cl">bool</span> = Field(
        default=<span class="cl">False</span>,
        description=<span class="st">"é•·ã„ä¼šè­°ãƒ•ãƒ©ã‚°"</span>
    )</pre>
                        </div>
                    </div>

                    <div style="background: #f0f2f5; border-radius: 8px; padding: 1rem; margin-top: 1rem; border-left: 3px solid var(--accent-orange);">
                        <div style="color: var(--accent-orange); font-weight: 600; margin-bottom: 0.5rem;">ğŸ’¡ ã©ã¡ã‚‰ã‚’é¸ã¶ï¼Ÿ</div>
                        <ul style="margin: 0 0 0 1rem; color: var(--text-secondary); font-size: 0.9rem;">
                            <li><strong>å­¦ç¿’ãƒ»ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—</strong> â†’ TypedDictï¼ˆã‚·ãƒ³ãƒ—ãƒ«ã§å§‹ã‚ã‚„ã™ã„ï¼‰</li>
                            <li><strong>æœ¬ç•ªãƒ»ãƒãƒ¼ãƒ é–‹ç™º</strong> â†’ BaseModelï¼ˆdescriptionã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã§å …ç‰¢ï¼‰</li>
                            <li><strong>Annotated[..., add]</strong> ã¯ã©ã¡ã‚‰ã§ã‚‚ä½¿ç”¨å¯èƒ½</li>
                        </ul>
                    </div>
                </div>

            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—3 -->
            <div class="card" id="tut-step3">
                <div class="card-header">
                    <div class="card-icon blue">âš™ï¸</div>
                    <h3 class="card-title">Step 3: Nodeã‚’å®šç¾©ã™ã‚‹</h3>
                </div>

                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                    <strong>Node</strong>ã¯Stateã‚’å—ã‘å–ã‚Šã€æ›´æ–°å†…å®¹ã‚’è¿”ã™é–¢æ•°ã§ã™ã€‚è­°äº‹éŒ²AIã§ã¯ã€Œè¦ç´„ã€ã€Œè­°é¡ŒæŠ½å‡ºã€ã€Œã‚¢ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡ºã€ã®3ã¤ã®Nodeã‚’ä½œã‚Šã¾ã™ã€‚
                </p>

                <h4 id="substep-3-1" style="margin: 1.5rem 0 1rem; color: var(--accent-green);">3-1. è¦ç´„ãƒãƒ¼ãƒ‰</h4>

                <div class="code-block">
                    <div class="code-header">Python (Colab) - ã‚»ãƒ«4: Nodeé–¢æ•°ï¼ˆãã®1: è¦ç´„ï¼‰</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span><span>46</span><span>47</span><span>48</span><span>49</span><span>50</span><span>51</span><span>52</span></div>
                        <div class="code-content">
<pre><span class="st">"""
Nodeå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«

ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²ã€‘
å„å‡¦ç†ï¼ˆè¦ç´„ã€è­°é¡ŒæŠ½å‡ºãªã©ï¼‰ã‚’å€‹åˆ¥ã®é–¢æ•°ã¨ã—ã¦å®šç¾©ã—ã¾ã™ã€‚
é–¢æ•°ã¯å¿…ãšã€ŒStateã‚’å—ã‘å–ã‚Šã€æ›´æ–°ã™ã‚‹éƒ¨åˆ†ã ã‘ã‚’dictã§è¿”ã™ã€å½¢å¼ã§ã™ã€‚
"""</span>

<span class="kw">from</span> langchain_google_vertexai <span class="kw">import</span> ChatVertexAI
<span class="kw">from</span> langchain_core.prompts <span class="kw">import</span> ChatPromptTemplate
<span class="kw">from</span> state <span class="kw">import</span> MeetingState  <span class="cm"># Step 2ã§ä½œã£ãŸStateã‚’import</span>

<span class="cm"># ============================================</span>
<span class="cm"># LLMã®åˆæœŸåŒ–ï¼ˆå…¨Nodeã§å…±æœ‰ï¼‰</span>
<span class="cm"># temperature=0: å‡ºåŠ›ã‚’å®‰å®šã•ã›ã‚‹ï¼ˆæ¯å›åŒã˜çµæœï¼‰</span>
<span class="cm"># ============================================</span>
llm = ChatVertexAI(
    model=<span class="st">"gemini-1.5-flash"</span>,  <span class="cm"># é«˜é€Ÿãƒ»ä½ã‚³ã‚¹ãƒˆ</span>
    temperature=<span class="cl">0</span>              <span class="cm"># å‰µé€ æ€§ã‚’æŠ‘ãˆã¦å®‰å®šã—ãŸå‡ºåŠ›</span>
)


<span class="kw">def</span> <span class="fn">summarize_node</span>(state: MeetingState) -> <span class="cl">dict</span>:
    <span class="st">"""
    ã€è¦ç´„ãƒãƒ¼ãƒ‰ã€‘
    ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆ â†’ 300æ–‡å­—ç¨‹åº¦ã®è¦ç´„

    ãªãœè¦ç´„ã‹ã‚‰å§‹ã‚ã‚‹ï¼Ÿ
    â†’ é•·ã„ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã‚’ãã®ã¾ã¾å¾Œç¶šå‡¦ç†ã«æ¸¡ã™ã¨ã€
      ãƒˆãƒ¼ã‚¯ãƒ³æ•°ãŒå¢—ãˆã¦ã‚³ã‚¹ãƒˆãŒä¸ŠãŒã‚‹ï¼†ç²¾åº¦ãŒä¸‹ãŒã‚‹
    """</span>

    <span class="cm"># ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å®šç¾©ï¼ˆsystemã¨humanã®2ã¤ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰</span>
    prompt = ChatPromptTemplate.from_messages([
        (<span class="st">"system"</span>, <span class="st">"""ã‚ãªãŸã¯è­°äº‹éŒ²ä½œæˆã®ãƒ—ãƒ­ã§ã™ã€‚
ä»¥ä¸‹ã®ä¼šè­°å†…å®¹ã‚’300æ–‡å­—ç¨‹åº¦ã§è¦ç´„ã—ã¦ãã ã•ã„ã€‚
- é‡è¦ãªæ±ºå®šäº‹é …ã‚’å„ªå…ˆ
- å…·ä½“çš„ãªæ•°å­—ã‚„æœŸæ—¥ã¯å¿…ãšå«ã‚ã‚‹
- ç®‡æ¡æ›¸ãã§ã¯ãªãæ–‡ç« ã§"""</span>),
        (<span class="st">"human"</span>, <span class="st">"{text}"</span>)  <span class="cm"># {text}ã«å®Ÿéš›ã®ãƒ†ã‚­ã‚¹ãƒˆãŒå…¥ã‚‹</span>
    ])

    <span class="cm"># LangChainå¼: prompt | llm ã§ã€Œãƒã‚§ãƒ¼ãƒ³ã€ã‚’ä½œæˆ</span>
    chain = prompt | llm

    <span class="cm"># Stateã‹ã‚‰ç”Ÿãƒ†ã‚­ã‚¹ãƒˆã‚’å–ã‚Šå‡ºã—ã¦LLMã«æ¸¡ã™</span>
    result = chain.invoke({<span class="st">"text"</span>: state[<span class="st">"raw_text"</span>]})

    <span class="cm"># æ›´æ–°ã—ãŸã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã ã‘ã‚’dictã§è¿”ã™</span>
    <span class="cm"># â†’ LangGraphãŒè‡ªå‹•ã§Stateã«ãƒãƒ¼ã‚¸ã—ã¦ãã‚Œã‚‹</span>
    <span class="kw">return</span> {
        <span class="st">"summary"</span>: result.content,
        <span class="st">"logs"</span>: [<span class="st">"[summarize] è¦ç´„å®Œäº†"</span>]
    }</pre>
                        </div>
                    </div>
                </div>

                <h4 id="substep-3-2" style="margin: 1.5rem 0 1rem; color: var(--accent-green);">3-2. é•·ã•ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ãƒ‰ï¼ˆcheck_length_nodeï¼‰</h4>
                <p style="margin-bottom: 1rem; color: var(--text-secondary);">LLMã‚’ä½¿ã‚ãªã„å‡¦ç†ã‚‚Nodeã«ã§ãã¾ã™ã€‚æ¡ä»¶åˆ†å²ã«ä½¿ã†ãƒ•ãƒ©ã‚°ã‚’è¨­å®šã—ã¾ã™ã€‚</p>

                <div class="code-block">
                    <div class="code-header">Python (Colab) - ã‚»ãƒ«4ã«è¿½åŠ : é•·ã•ãƒã‚§ãƒƒã‚¯</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span></div>
                        <div class="code-content">
<pre><span class="kw">def</span> <span class="fn">check_length_node</span>(state: MeetingState) -> <span class="cl">dict</span>:
    <span class="st">"""
    ã€é•·ã•ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ãƒ‰ã€‘
    ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã®é•·ã•ã§ã€Œè©³ç´°ãƒ¢ãƒ¼ãƒ‰ or ç°¡æ˜“ãƒ¢ãƒ¼ãƒ‰ã€ã‚’åˆ¤å®š

    ãªãœåˆ†å²ãŒå¿…è¦ï¼Ÿ
    â†’ é•·ã„ä¼šè­°: è­°é¡Œãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡ºã‚’ã—ã£ã‹ã‚Š
    â†’ çŸ­ã„ä¼šè­°: ã‚·ãƒ³ãƒ—ãƒ«ã«è¦ç´„ã ã‘ã§OK
    """</span>

    <span class="cm"># 2000æ–‡å­—ä»¥ä¸Šãªã‚‰ã€Œé•·ã„ä¼šè­°ã€ã¨åˆ¤å®š</span>
    text_length = <span class="bi">len</span>(state[<span class="st">"raw_text"</span>])
    is_long = text_length > <span class="cl">2000</span>

    <span class="bi">print</span>(<span class="st">f"[check_length] ãƒ†ã‚­ã‚¹ãƒˆé•·: {text_length}æ–‡å­— â†’ {'è©³ç´°ãƒ¢ãƒ¼ãƒ‰' if is_long else 'ç°¡æ˜“ãƒ¢ãƒ¼ãƒ‰'}"</span>)

    <span class="kw">return</span> {
        <span class="st">"is_long"</span>: is_long,
        <span class="st">"logs"</span>: [<span class="st">f"[check_length] {text_length}æ–‡å­—"</span>]
    }</pre>
                        </div>
                    </div>
                </div>

                <h4 id="substep-3-3" style="margin: 1.5rem 0 1rem; color: var(--accent-green);">3-3. è­°é¡ŒæŠ½å‡ºãƒãƒ¼ãƒ‰ / ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡ºãƒãƒ¼ãƒ‰</h4>
                <p style="margin-bottom: 1rem; color: var(--text-secondary);">åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã§è¤‡æ•°ã®Nodeã‚’ä½œã‚Šã¾ã™ã€‚æŠ½å‡ºçµæœã¯ãƒªã‚¹ãƒˆã§è¿”ã—ã¾ã™ã€‚</p>

                <div style="background: rgba(52, 211, 153, 0.1); border-left: 3px solid var(--accent-green); padding: 1rem; margin-bottom: 1rem; border-radius: 4px;">
                    <p style="margin: 0 0 0.5rem; color: var(--accent-green); font-weight: 600;">ğŸ’¡ è£œè¶³: æœ¬ç•ªç’°å¢ƒã§ã¯JSONå‡ºåŠ›ãŒæ¨å¥¨</p>
                    <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem;">
                        ä»Šå›ã¯å­¦ç¿’ç”¨ã«ã‚·ãƒ³ãƒ—ãƒ«ãªã€Œæ”¹è¡ŒåŒºåˆ‡ã‚Šã€ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€æœ€æ–°ã®Geminiã§ã¯<code style="background: rgba(255,255,255,0.1); padding: 0.1rem 0.3rem; border-radius: 3px;">response_mime_type="application/json"</code>ã§JSONå‡ºåŠ›ã‚’å¼·åˆ¶ã—ãŸã‚Šã€<code style="background: rgba(255,255,255,0.1); padding: 0.1rem 0.3rem; border-radius: 3px;">with_structured_output()</code>ã§Pydanticãƒ¢ãƒ‡ãƒ«ã«ç›´æ¥ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹æ–¹æ³•ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šå‹å®‰å…¨æ€§ã¨ãƒ‘ãƒ¼ã‚¹å‡¦ç†ã®çœç•¥ãŒå¯èƒ½ã§ã™ã€‚
                    </p>
                </div>

                <div class="code-block">
                    <div class="code-header">Python (Colab) - ã‚»ãƒ«4ã«è¿½åŠ : æŠ½å‡ºç³»</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span><span>46</span><span>47</span><span>48</span><span>49</span><span>50</span><span>51</span><span>52</span><span>53</span><span>54</span><span>55</span></div>
                        <div class="code-content">
<pre><span class="kw">def</span> <span class="fn">extract_topics_node</span>(state: MeetingState) -> <span class="cl">dict</span>:
    <span class="st">"""
    ã€è­°é¡ŒæŠ½å‡ºãƒãƒ¼ãƒ‰ã€‘
    è¦ç´„ã‹ã‚‰ä¸»è¦ãªè­°é¡Œã‚’æŠ½å‡ºï¼ˆãƒªã‚¹ãƒˆå½¢å¼ï¼‰

    ãƒã‚¤ãƒ³ãƒˆ: LLMã®å‡ºåŠ›ã‚’ã€Œæ”¹è¡ŒåŒºåˆ‡ã‚Šã€ã«ã—ã¦split()ã§åˆ†å‰²
    â€»ä»Šå›ã¯å­¦ç¿’ç”¨ã«ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ã‚’æ¡ç”¨
    """</span>

    prompt = ChatPromptTemplate.from_messages([
        (<span class="st">"system"</span>, <span class="st">"""ä»¥ä¸‹ã®ä¼šè­°è¦ç´„ã‹ã‚‰ã€è­°é¡Œã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚
- 1è¡Œã«1è­°é¡Œ
- è­°é¡Œã®ã¿ã‚’å‡ºåŠ›ï¼ˆç•ªå·ã‚„è¨˜å·ãªã—ï¼‰
- æœ€å¤§5å€‹ã¾ã§"""</span>),
        (<span class="st">"human"</span>, <span class="st">"{summary}"</span>)
    ])

    chain = prompt | llm
    result = chain.invoke({<span class="st">"summary"</span>: state[<span class="st">"summary"</span>]})

    <span class="cm"># æ”¹è¡Œã§åˆ†å‰²ã—ã¦ãƒªã‚¹ãƒˆåŒ–</span>
    topics = [
        line.strip()
        <span class="kw">for</span> line <span class="kw">in</span> result.content.split(<span class="st">"\n"</span>)
        <span class="kw">if</span> line.strip()  <span class="cm"># ç©ºè¡Œã‚’é™¤å¤–</span>
    ]

    <span class="kw">return</span> {
        <span class="st">"topics"</span>: topics,
        <span class="st">"logs"</span>: [<span class="st">f"[topics] {len(topics)}ä»¶æŠ½å‡º"</span>]
    }


<span class="kw">def</span> <span class="fn">extract_actions_node</span>(state: MeetingState) -> <span class="cl">dict</span>:
    <span class="st">"""
    ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ æŠ½å‡ºãƒãƒ¼ãƒ‰ã€‘
    ã€Œèª°ãŒã€ã€Œä½•ã‚’ã€ã€Œã„ã¤ã¾ã§ã«ã€ã‚’æŠ½å‡º
    """</span>

    prompt = ChatPromptTemplate.from_messages([
        (<span class="st">"system"</span>, <span class="st">"""ä»¥ä¸‹ã®ä¼šè­°è¦ç´„ã‹ã‚‰ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚
å½¢å¼: æ‹…å½“è€…: ã‚¿ã‚¹ã‚¯å†…å®¹ï¼ˆæœŸé™ãŒã‚ã‚Œã°è¨˜è¼‰ï¼‰
- 1è¡Œã«1ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- å…·ä½“çš„ãªã‚¿ã‚¹ã‚¯ã®ã¿æŠ½å‡º"""</span>),
        (<span class="st">"human"</span>, <span class="st">"{summary}"</span>)
    ])

    chain = prompt | llm
    result = chain.invoke({<span class="st">"summary"</span>: state[<span class="st">"summary"</span>]})

    actions = [line.strip() <span class="kw">for</span> line <span class="kw">in</span> result.content.split(<span class="st">"\n"</span>) <span class="kw">if</span> line.strip()]

    <span class="kw">return</span> {
        <span class="st">"action_items"</span>: actions,
        <span class="st">"logs"</span>: [<span class="st">f"[actions] {len(actions)}ä»¶æŠ½å‡º"</span>]
    }</pre>
                        </div>
                    </div>
                </div>

                <h4 id="substep-3-4" style="margin: 1.5rem 0 1rem; color: var(--accent-green);">3-4. æ•´å½¢ãƒãƒ¼ãƒ‰ï¼ˆformat_doc_nodeï¼‰</h4>
                <p style="margin-bottom: 1rem; color: var(--text-secondary);">æœ€å¾Œã«ã€ã™ã¹ã¦ã®æƒ…å ±ã‚’Markdownå½¢å¼ã«æ•´å½¢ã—ã¾ã™ã€‚</p>

                <div class="code-block">
                    <div class="code-header">Python (Colab) - ã‚»ãƒ«4ã«è¿½åŠ : æ•´å½¢</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span></div>
                        <div class="code-content">
<pre><span class="kw">from</span> datetime <span class="kw">import</span> datetime

<span class="kw">def</span> <span class="fn">format_doc_node</span>(state: MeetingState) -> <span class="cl">dict</span>:
    <span class="st">"""
    ã€æ•´å½¢ãƒãƒ¼ãƒ‰ã€‘
    å…¨ã¦ã®æƒ…å ±ã‚’Markdownå½¢å¼ã®è­°äº‹éŒ²ã«æ•´å½¢

    LLMã‚’ä½¿ã‚ãªã„å‡¦ç†: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«å€¤ã‚’åŸ‹ã‚è¾¼ã‚€ã ã‘
    â†’ ã‚³ã‚¹ãƒˆå‰Šæ¸›ï¼†é«˜é€ŸåŒ–
    """</span>

    <span class="cm"># è­°é¡Œã‚’Markdownãƒªã‚¹ãƒˆã«å¤‰æ›</span>
    topics_md = <span class="st">"\n"</span>.join([<span class="st">f"- {t}"</span> <span class="kw">for</span> t <span class="kw">in</span> state.get(<span class="st">"topics"</span>, [])])

    <span class="cm"># ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã‚’Markdownãƒªã‚¹ãƒˆã«å¤‰æ›</span>
    actions_md = <span class="st">"\n"</span>.join([<span class="st">f"- [ ] {a}"</span> <span class="kw">for</span> a <span class="kw">in</span> state.get(<span class="st">"action_items"</span>, [])])

    <span class="cm"># Markdownå½¢å¼ã§è­°äº‹éŒ²ã‚’ç”Ÿæˆ</span>
    doc = <span class="st">f"""# è­°äº‹éŒ²
**ä½œæˆæ—¥æ™‚**: {datetime.now().strftime('%Y-%m-%d %H:%M')}

## è¦ç´„
{state.get('summary', '(è¦ç´„ãªã—)')}

## è­°é¡Œ
{topics_md or '(è­°é¡Œãªã—)'}

## ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ 
{actions_md or '(ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãªã—)'}
"""</span>

    <span class="kw">return</span> {
        <span class="st">"final_doc"</span>: doc,
        <span class="st">"logs"</span>: [<span class="st">"[format] è­°äº‹éŒ²ç”Ÿæˆå®Œäº†"</span>]
    }</pre>
                        </div>
                    </div>
                </div>

            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—4 -->
            <div class="card" id="tut-step4">
                <div class="card-header">
                    <div class="card-icon purple">ğŸ”€</div>
                    <h3 class="card-title">Step 4: æ¡ä»¶åˆ†å²ã‚’å®šç¾©ã™ã‚‹</h3>
                </div>

                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                    é•·ã„ä¼šè­°ã¯è©³ç´°ãƒ¢ãƒ¼ãƒ‰ï¼ˆè­°é¡Œãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡ºï¼‰ã€çŸ­ã„ä¼šè­°ã¯ç°¡æ˜“ãƒ¢ãƒ¼ãƒ‰ï¼ˆè¦ç´„ã®ã¿ï¼‰ã«åˆ†å²ã•ã›ã¾ã™ã€‚
                </p>

                <div class="code-block">
                    <div class="code-header">Python (Colab) - ã‚»ãƒ«5: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°é–¢æ•°</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span></div>
                        <div class="code-content">
<pre><span class="st">"""
ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°é–¢æ•°

ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²ã€‘
æ¡ä»¶åˆ†å²ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®šç¾©ã—ã¾ã™ã€‚
Stateã®å€¤ã‚’è¦‹ã¦ã€Œæ¬¡ã«ã©ã®Nodeã«é€²ã‚€ã‹ã€ã‚’è¿”ã—ã¾ã™ã€‚

é‡è¦: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°é–¢æ•°ã¯Stateã‚’ã€Œèª­ã‚€ã ã‘ã€ã§ã€Œæ›´æ–°ã—ãªã„ã€
â†’ æˆ»ã‚Šå€¤ã¯æ–‡å­—åˆ—ï¼ˆæ¬¡ã®Nodeã®åå‰ï¼‰
"""</span>

<span class="kw">from</span> typing <span class="kw">import</span> Literal
<span class="kw">from</span> state <span class="kw">import</span> MeetingState


<span class="kw">def</span> <span class="fn">route_by_length</span>(state: MeetingState) -> Literal[<span class="st">"detailed"</span>, <span class="st">"simple"</span>]:
    <span class="st">"""
    ã€é•·ã•ã«ã‚ˆã‚‹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€‘

    Stateã®`is_long`ãƒ•ãƒ©ã‚°ã‚’è¦‹ã¦ã€æ¬¡ã®å‡¦ç†ã‚’æ±ºå®šã™ã‚‹

    æˆ»ã‚Šå€¤ã®å‹ãƒ’ãƒ³ãƒˆ Literal["detailed", "simple"] ã¯
    ã€Œã“ã®2ã¤ã®æ–‡å­—åˆ—ã—ã‹è¿”ã•ãªã„ã€ã“ã¨ã‚’ç¤ºã™
    â†’ ã‚¿ã‚¤ãƒé˜²æ­¢ï¼†IDEã®è£œå®ŒãŒåŠ¹ã
    """</span>

    <span class="cm"># check_length_nodeã§è¨­å®šã•ã‚ŒãŸãƒ•ãƒ©ã‚°ã‚’å‚ç…§</span>
    is_long = state.get(<span class="st">"is_long"</span>, <span class="cl">False</span>)

    <span class="kw">if</span> is_long:
        <span class="cm"># é•·ã„ä¼šè­° â†’ è©³ç´°ãªè­°é¡ŒæŠ½å‡ºã¸</span>
        <span class="bi">print</span>(<span class="st">"[routing] è©³ç´°ãƒ¢ãƒ¼ãƒ‰ã¸åˆ†å²"</span>)
        <span class="kw">return</span> <span class="st">"detailed"</span>
    <span class="kw">else</span>:
        <span class="cm"># çŸ­ã„ä¼šè­° â†’ ã‚·ãƒ³ãƒ—ãƒ«ãªæ•´å½¢ã¸</span>
        <span class="bi">print</span>(<span class="st">"[routing] ç°¡æ˜“ãƒ¢ãƒ¼ãƒ‰ã¸åˆ†å²"</span>)
        <span class="kw">return</span> <span class="st">"simple"</span></pre>
                        </div>
                    </div>
                </div>

                <div class="diagram-container" style="margin-top: 1.5rem;">
                    <div class="diagram-title">æ¡ä»¶åˆ†å²ã®ã‚¤ãƒ¡ãƒ¼ã‚¸</div>
                    <svg viewBox="0 0 500 150" style="max-width: 500px; margin: 0 auto; display: block;">
                        <defs>
                            <marker id="routeArr" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#667eea"/>
                            </marker>
                        </defs>
                        <!-- check_length -->
                        <rect x="30" y="50" width="100" height="50" rx="8" fill="#f8f9fa" stroke="#667eea" stroke-width="2"/>
                        <text x="80" y="80" text-anchor="middle" fill="#333333" font-size="11">check_length</text>
                        <!-- Diamond -->
                        <polygon points="200,75 230,45 260,75 230,105" fill="#8b5cf6" fill-opacity="0.3" stroke="#8b5cf6" stroke-width="2"/>
                        <text x="230" y="78" text-anchor="middle" fill="#8b5cf6" font-size="10">is_long?</text>
                        <!-- Arrows from check to diamond -->
                        <line x1="130" y1="75" x2="195" y2="75" stroke="#667eea" stroke-width="2" marker-end="url(#routeArr)"/>
                        <!-- detailed path -->
                        <rect x="320" y="20" width="100" height="40" rx="8" fill="#f8f9fa" stroke="#22c55e" stroke-width="2"/>
                        <text x="370" y="45" text-anchor="middle" fill="#22c55e" font-size="10">extract_topics</text>
                        <line x1="260" y1="65" x2="315" y2="40" stroke="#22c55e" stroke-width="2" marker-end="url(#routeArr)"/>
                        <text x="280" y="40" fill="#22c55e" font-size="9">True</text>
                        <!-- simple path -->
                        <rect x="320" y="90" width="100" height="40" rx="8" fill="#f8f9fa" stroke="#f97316" stroke-width="2"/>
                        <text x="370" y="115" text-anchor="middle" fill="#f97316" font-size="10">format_doc</text>
                        <line x1="260" y1="85" x2="315" y2="110" stroke="#f97316" stroke-width="2" marker-end="url(#routeArr)"/>
                        <text x="280" y="115" fill="#f97316" font-size="9">False</text>
                    </svg>
                </div>
            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—5 -->
            <div class="card" id="tut-step5">
                <div class="card-header">
                    <div class="card-icon orange">ğŸ”—</div>
                    <h3 class="card-title">Step 5: ã‚°ãƒ©ãƒ•ã‚’çµ„ã¿ç«‹ã¦ã‚‹</h3>
                </div>

                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                    Nodeã‚’ç™»éŒ²ã—ã€Edgeã§æ¥ç¶šã—ã¦ã€æœ€å¾Œã«<code>compile()</code>ã§å®Ÿè¡Œå¯èƒ½ã«ã—ã¾ã™ã€‚
                </p>

                <div class="code-block">
                    <div class="code-header">Python (Colab) - ã‚»ãƒ«6: ã‚°ãƒ©ãƒ•çµ„ã¿ç«‹ã¦</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span><span>46</span><span>47</span><span>48</span><span>49</span><span>50</span><span>51</span><span>52</span><span>53</span><span>54</span><span>55</span><span>56</span><span>57</span><span>58</span><span>59</span><span>60</span><span>61</span><span>62</span><span>63</span><span>64</span><span>65</span><span>66</span><span>67</span><span>68</span><span>69</span><span>70</span><span>71</span><span>72</span><span>73</span><span>74</span><span>75</span></div>
                        <div class="code-content">
<pre><span class="st">"""
ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ« - ã‚°ãƒ©ãƒ•ã®çµ„ã¿ç«‹ã¦ã¨å®Ÿè¡Œ

ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²ã€‘
1. å„ãƒ‘ãƒ¼ãƒ„ï¼ˆState, Node, Routingï¼‰ã‚’import
2. ã‚°ãƒ©ãƒ•ã‚’çµ„ã¿ç«‹ã¦ã‚‹
3. å®Ÿè¡Œã™ã‚‹
"""</span>

<span class="kw">from</span> langgraph.graph <span class="kw">import</span> StateGraph, START, END

<span class="cm"># è‡ªä½œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’import</span>
<span class="kw">from</span> state <span class="kw">import</span> MeetingState
<span class="kw">from</span> nodes <span class="kw">import</span> (
    summarize_node,
    check_length_node,
    extract_topics_node,
    extract_actions_node,
    format_doc_node,
)
<span class="kw">from</span> routing <span class="kw">import</span> route_by_length


<span class="kw">def</span> <span class="fn">create_meeting_graph</span>():
    <span class="st">"""
    è­°äº‹éŒ²è¦ç´„ã‚°ãƒ©ãƒ•ã‚’æ§‹ç¯‰ã™ã‚‹

    ã€ã‚°ãƒ©ãƒ•ã®æµã‚Œã€‘
    START â†’ summarize â†’ check_length â†’ [åˆ†å²]
        â†’ (é•·ã„) extract_topics â†’ extract_actions â†’ format_doc â†’ END
        â†’ (çŸ­ã„) format_doc â†’ END
    """</span>

    <span class="cm"># ============================================</span>
    <span class="cm"># 1. ã‚°ãƒ©ãƒ•ã‚’ä½œæˆï¼ˆStateã®å‹ã‚’æŒ‡å®šï¼‰</span>
    <span class="cm">#    â†’ ã“ã®å‹ã«å¾“ã£ã¦ãƒ‡ãƒ¼ã‚¿ãŒæµã‚Œã‚‹</span>
    <span class="cm"># ============================================</span>
    workflow = StateGraph(MeetingState)

    <span class="cm"># ============================================</span>
    <span class="cm"># 2. ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ </span>
    <span class="cm">#    add_node("è¡¨ç¤ºå", é–¢æ•°)</span>
    <span class="cm">#    è¡¨ç¤ºåã¯ã‚¨ãƒƒã‚¸æ¥ç¶šæ™‚ã«ä½¿ã†</span>
    <span class="cm"># ============================================</span>
    workflow.add_node(<span class="st">"summarize"</span>, summarize_node)
    workflow.add_node(<span class="st">"check_length"</span>, check_length_node)
    workflow.add_node(<span class="st">"extract_topics"</span>, extract_topics_node)
    workflow.add_node(<span class="st">"extract_actions"</span>, extract_actions_node)
    workflow.add_node(<span class="st">"format_doc"</span>, format_doc_node)

    <span class="cm"># ============================================</span>
    <span class="cm"># 3. ã‚¨ãƒƒã‚¸ã‚’è¿½åŠ ï¼ˆå›ºå®šã®æ¥ç¶šï¼‰</span>
    <span class="cm">#    START: å‡¦ç†ã®é–‹å§‹ç‚¹ï¼ˆç‰¹æ®ŠãªNodeï¼‰</span>
    <span class="cm">#    END: å‡¦ç†ã®çµ‚äº†ç‚¹ï¼ˆç‰¹æ®ŠãªNodeï¼‰</span>
    <span class="cm"># ============================================</span>
    workflow.add_edge(START, <span class="st">"summarize"</span>)        <span class="cm"># é–‹å§‹ â†’ è¦ç´„</span>
    workflow.add_edge(<span class="st">"summarize"</span>, <span class="st">"check_length"</span>)  <span class="cm"># è¦ç´„ â†’ é•·ã•ãƒã‚§ãƒƒã‚¯</span>

    <span class="cm"># ============================================</span>
    <span class="cm"># 4. æ¡ä»¶åˆ†å²ã‚’è¿½åŠ </span>
    <span class="cm">#    add_conditional_edges(åˆ†å²å…ƒ, æ¡ä»¶é–¢æ•°, ãƒãƒƒãƒ”ãƒ³ã‚°)</span>
    <span class="cm"># ============================================</span>
    workflow.add_conditional_edges(
        <span class="st">"check_length"</span>,     <span class="cm"># ã©ã®Nodeã‹ã‚‰åˆ†å²ã™ã‚‹ã‹</span>
        route_by_length,    <span class="cm"># æ¡ä»¶ã‚’åˆ¤å®šã™ã‚‹é–¢æ•°</span>
        {
            <span class="cm"># æ¡ä»¶é–¢æ•°ã®æˆ»ã‚Šå€¤ â†’ æ¬¡ã«é€²ã‚€Node</span>
            <span class="st">"detailed"</span>: <span class="st">"extract_topics"</span>,  <span class="cm"># é•·ã„ â†’ è­°é¡ŒæŠ½å‡ºã¸</span>
            <span class="st">"simple"</span>: <span class="st">"format_doc"</span>,       <span class="cm"># çŸ­ã„ â†’ æ•´å½¢ã¸ç›´è¡Œ</span>
        }
    )

    <span class="cm"># è©³ç´°ãƒ¢ãƒ¼ãƒ‰ã®ç¶šã: è­°é¡Œ â†’ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ â†’ æ•´å½¢</span>
    workflow.add_edge(<span class="st">"extract_topics"</span>, <span class="st">"extract_actions"</span>)
    workflow.add_edge(<span class="st">"extract_actions"</span>, <span class="st">"format_doc"</span>)

    <span class="cm"># æœ€å¾Œã¯å…¨ã¦ENDã¸</span>
    workflow.add_edge(<span class="st">"format_doc"</span>, END)

    <span class="cm"># ============================================</span>
    <span class="cm"># 5. compile()ã§å®Ÿè¡Œå¯èƒ½ãªã‚°ãƒ©ãƒ•ã«å¤‰æ›</span>
    <span class="cm"># ============================================</span>
    <span class="kw">return</span> workflow.compile()</pre>
                        </div>
                    </div>
                </div>

                <div class="highlight-box" style="background: #f8f9fa; border-left-color: var(--accent-cyan);">
                    <div class="highlight-title" style="color: var(--accent-cyan);">ğŸ§‘â€ğŸ’» AIã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢è¦–ç‚¹</div>
                    <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                        <li><strong>add_nodeã¯é †ç•ªä¸å•</strong>: ç™»éŒ²é †ã¯é–¢ä¿‚ãªãã€ã‚¨ãƒƒã‚¸ã§æ¥ç¶šé †ãŒæ±ºã¾ã‚‹</li>
                        <li><strong>compile()ã¯æœ€å¾Œã«1å›</strong>: å¤‰æ›´ã™ã‚‹ãŸã³ã«å†compileå¿…è¦</li>
                        <li><strong>ã‚°ãƒ©ãƒ•ã®å¯è¦–åŒ–</strong>: <code>graph.get_graph().draw_mermaid()</code>ã§å›³ã‚’å‡ºåŠ›å¯èƒ½</li>
                    </ul>
                </div>
            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—6 -->
            <div class="card" id="tut-step6">
                <div class="card-header">
                    <div class="card-icon green">â–¶ï¸</div>
                    <h3 class="card-title">Step 6: å®Ÿè¡Œã—ã¦ã¿ã‚‹</h3>
                </div>

                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                    æœ€å¾Œã®ã‚»ãƒ«ã§å®Ÿè¡Œãƒ†ã‚¹ãƒˆã‚’è¡Œã„ã¾ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ã®ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã¨ã—ã¦è­°äº‹éŒ²ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
                </p>

                <div class="code-block">
                    <div class="code-header">Python (Colab) - ã‚»ãƒ«7: å®Ÿè¡Œãƒ†ã‚¹ãƒˆ</div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span><span>46</span><span>47</span><span>48</span><span>49</span><span>50</span><span>51</span><span>52</span><span>53</span><span>54</span><span>55</span><span>56</span></div>
                            <div class="code-content">
<pre><span class="cm"># ============================================</span>
<span class="cm"># ã‚µãƒ³ãƒ—ãƒ«ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆï¼ˆé•·ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰</span>
<span class="cm"># å®Ÿéš›ã«ã¯Zoomã®æ–‡å­—èµ·ã“ã—ã‚„è­°äº‹ãƒ¡ãƒ¢ã‚’å…¥ã‚Œã‚‹</span>
<span class="cm"># ============================================</span>
sample_meeting = <span class="st">"""
    ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—ä¼šè­°ã€‘2024å¹´1æœˆ15æ—¥

    ç”°ä¸­: ä»Šé€±ã®é€²æ—ã‚’å ±å‘Šã—ã¾ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®UIæ”¹ä¿®ã¯80%å®Œäº†ã€‚
    æ®‹ã‚Šã¯ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã§ã™ã€‚æ¥é€±æ°´æ›œã¾ã§ã«å®Œäº†äºˆå®šã€‚

    éˆ´æœ¨: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®APIæ”¹ä¿®ã¯äºˆå®šã‚ˆã‚Šé…ã‚Œã¦ã„ã¾ã™ã€‚
    èªè¨¼å‘¨ã‚Šã§å•é¡ŒãŒç™ºç”Ÿã—ã€è§£æ±ºã«2æ—¥ã‹ã‹ã‚Šã¾ã—ãŸã€‚
    æ¥é€±é‡‘æ›œã¾ã§ã«ã¯å®Œäº†ã§ãã‚‹è¦‹è¾¼ã¿ã§ã™ã€‚

    å±±ç”°: QAãƒ†ã‚¹ãƒˆã®æº–å‚™ã¯å®Œäº†ã—ã¦ã„ã¾ã™ã€‚
    æ¥é€±æœˆæ›œã‹ã‚‰ãƒ†ã‚¹ãƒˆé–‹å§‹ã§ãã¾ã™ã€‚
    ãƒ†ã‚¹ãƒˆé …ç›®ã¯150ä»¶ã€3æ—¥é–“ã§å®Ÿæ–½äºˆå®šã§ã™ã€‚

    ç”°ä¸­: äºˆç®—ã«ã¤ã„ã¦ç¢ºèªã§ã™ã€‚è¿½åŠ ã§10ä¸‡å††å¿…è¦ã«ãªã‚Šãã†ã§ã™ã€‚
    ç†ç”±ã¯ã‚µãƒ¼ãƒãƒ¼å¢—å¼·ã®ãŸã‚ã€‚

    éˆ´æœ¨: æ‰¿èªã—ã¾ã™ã€‚çµŒç†ã«é€£çµ¡ã—ã¦ãŠãã¾ã™ã€‚

æ¬¡å›ã®ä¼šè­°ã¯æ¥é€±æœˆæ›œ10æ™‚ã‹ã‚‰ã€‚
"""</span>

<span class="cm"># ============================================</span>
<span class="cm"># ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã—ã¦å®Ÿè¡Œ</span>
<span class="cm"># ============================================</span>
graph = create_meeting_graph()

<span class="cm"># invoke()ã§å®Ÿè¡Œï¼ˆå…¥åŠ›ã¯dictã§æ¸¡ã™ï¼‰</span>
result = graph.invoke({
    <span class="st">"raw_text"</span>: sample_meeting,  <span class="cm"># å¿…é ˆ: ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆ</span>
    <span class="st">"logs"</span>: []                    <span class="cm"># å¿…é ˆ: ç©ºãƒªã‚¹ãƒˆã§åˆæœŸåŒ–</span>
})

<span class="cm"># ============================================</span>
<span class="cm"># çµæœã‚’è¡¨ç¤º</span>
<span class="cm"># ============================================</span>
<span class="bi">print</span>(<span class="st">"="</span> * <span class="cl">50</span>)
<span class="bi">print</span>(<span class="st">"ã€ç”Ÿæˆã•ã‚ŒãŸè­°äº‹éŒ²ã€‘"</span>)
<span class="bi">print</span>(<span class="st">"="</span> * <span class="cl">50</span>)
<span class="bi">print</span>(result[<span class="st">"final_doc"</span>])

<span class="bi">print</span>(<span class="st">"\nã€å‡¦ç†ãƒ­ã‚°ã€‘"</span>)
<span class="kw">for</span> log <span class="kw">in</span> result[<span class="st">"logs"</span>]:
    <span class="bi">print</span>(<span class="st">f"  {log}"</span>)</pre>
                            </div>
                        </div>
                    </div>

                    <div class="highlight-box success">
                        <div class="highlight-title">ğŸ“¤ å®Ÿè¡Œçµæœã®ä¾‹</div>
                        <div class="code-block" style="margin-top: 0.5rem; border-left: none;">
                            <div class="code-body" style="background: #0d1117;">
                                <div class="code-content">
<pre style="color: #e6edf3;"># è­°äº‹éŒ²
**ä½œæˆæ—¥æ™‚**: 2024-01-15 15:30

## è¦ç´„
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—ä¼šè­°ã§ã¯ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰UIæ”¹ä¿®ãŒ80%å®Œäº†ã—
æ¥é€±æ°´æ›œå®Œäº†äºˆå®šã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯èªè¨¼å•é¡Œã§é…å»¶ã€æ¥é€±é‡‘æ›œå®Œäº†è¦‹è¾¼ã¿ã€‚
QAãƒ†ã‚¹ãƒˆã¯æ¥é€±æœˆæ›œã‹ã‚‰3æ—¥é–“ã§150ä»¶å®Ÿæ–½äºˆå®šã€‚
ã‚µãƒ¼ãƒãƒ¼å¢—å¼·ã®ãŸã‚è¿½åŠ äºˆç®—10ä¸‡å††ãŒæ‰¿èªã•ã‚ŒãŸã€‚

## è­°é¡Œ
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰UIæ”¹ä¿®ã®é€²æ—
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIæ”¹ä¿®ã®é…å»¶
- QAãƒ†ã‚¹ãƒˆã®æº–å‚™çŠ¶æ³
- è¿½åŠ äºˆç®—ã®æ‰¿èª

## ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ 
- [ ] ç”°ä¸­: ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã‚’æ¥é€±æ°´æ›œã¾ã§ã«å®Œäº†
- [ ] éˆ´æœ¨: APIæ”¹ä¿®ã‚’æ¥é€±é‡‘æ›œã¾ã§ã«å®Œäº†
- [ ] éˆ´æœ¨: çµŒç†ã«è¿½åŠ äºˆç®—10ä¸‡å††ã‚’é€£çµ¡
- [ ] å±±ç”°: æ¥é€±æœˆæ›œã‹ã‚‰QAãƒ†ã‚¹ãƒˆé–‹å§‹</pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <p style="color: var(--text-secondary); margin-top: 1.5rem;">
                    Cloud Runã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•ã¯ã€Œ<a href="#deploy" onclick="switchTab('deploy')" style="color: var(--accent-cyan);">ãƒ‡ãƒ—ãƒ­ã‚¤</a>ã€ã‚¿ãƒ–ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
                </p>

                <div class="highlight-box success" style="margin-top: 1.5rem;">
                    <div class="highlight-title">å®Œæˆï¼</div>
                    <p style="margin: 0;">LangGraphã®åŸºæœ¬ï¼ˆStateãƒ»Nodeãƒ»Edgeãƒ»æ¡ä»¶åˆ†å²ï¼‰ã‚’å­¦ã³ã¾ã—ãŸã€‚</p>
                </div>
            </div>

                </div><!-- /.tutorial-content -->

                <!-- å³å´: ã‚¹ãƒ†ã‚£ãƒƒã‚­ãƒ¼ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
                <div class="tutorial-sidebar">
                    <div class="tutorial-sidebar-title">ğŸ“ ç¾åœ¨ã®ä½ç½®</div>
                    <svg viewBox="0 0 280 680" class="sidebar-architecture-svg">
                        <defs>
                            <marker id="sidebarArr" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
                                <polygon points="0 0, 8 3, 0 6" fill="#667eea"/>
                            </marker>
                            <filter id="glowFilter" x="-50%" y="-50%" width="200%" height="200%">
                                <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                <feMerge>
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>

                        <!-- Step 1: ç’°å¢ƒæº–å‚™ -->
                        <g id="sidebar-step1" class="sidebar-step" data-step="1">
                            <rect x="80" y="10" width="120" height="35" rx="8" fill="#f8f9fa" stroke="#22543d" stroke-width="2"/>
                            <text x="140" y="32" text-anchor="middle" fill="#333333" font-size="11">ğŸ“ ç’°å¢ƒæº–å‚™</text>
                        </g>

                        <line x1="140" y1="45" x2="140" y2="60" stroke="#667eea" stroke-width="2" marker-end="url(#sidebarArr)"/>

                        <!-- Step 2: MeetingState -->
                        <g id="sidebar-step2" class="sidebar-step" data-step="2">
                            <rect x="65" y="65" width="150" height="50" rx="8" fill="#f8f9fa" stroke="#22543d" stroke-width="2"/>
                            <text x="140" y="85" text-anchor="middle" fill="#333333" font-size="11">ğŸ“¦ MeetingState</text>
                            <text x="140" y="102" text-anchor="middle" fill="#4ade80" font-size="8">(raw_text, summary, ...)</text>
                        </g>

                        <line x1="140" y1="115" x2="140" y2="130" stroke="#667eea" stroke-width="2" marker-end="url(#sidebarArr)"/>

                        <!-- Step 3: Nodesï¼ˆç¸¦ã«ç›´åˆ—é…ç½®ï¼‰ -->
                        <g id="sidebar-step3" class="sidebar-step" data-step="3">
                            <!-- ã‚¿ã‚¤ãƒˆãƒ« -->
                            <text x="140" y="145" text-anchor="middle" font-size="10" class="step3-title">âš™ï¸ Nodesï¼ˆå‡¦ç†é–¢æ•°ï¼‰</text>

                            <!-- summarize_node (3-1) -->
                            <g class="substep-node" data-substep="3-1">
                                <rect x="75" y="155" width="130" height="35" rx="6" class="step3-rect"/>
                                <text x="140" y="177" text-anchor="middle" font-size="10" class="step3-text">summarize_node</text>
                            </g>

                            <line x1="140" y1="190" x2="140" y2="205" class="step3-line" marker-end="url(#sidebarArr)"/>

                            <!-- check_length_node (3-2) -->
                            <g class="substep-node" data-substep="3-2">
                                <rect x="75" y="210" width="130" height="35" rx="6" class="step3-rect"/>
                                <text x="140" y="232" text-anchor="middle" font-size="10" class="step3-text">check_length_node</text>
                            </g>

                            <line x1="140" y1="245" x2="140" y2="260" class="step3-line" marker-end="url(#sidebarArr)"/>

                            <!-- extract_topics_node / extract_actions_node (3-3) -->
                            <g class="substep-node" data-substep="3-3">
                                <rect x="75" y="265" width="130" height="35" rx="6" class="step3-rect"/>
                                <text x="140" y="287" text-anchor="middle" font-size="10" class="step3-text">extract_topics_node</text>
                            </g>

                            <line x1="140" y1="300" x2="140" y2="315" class="step3-line" marker-end="url(#sidebarArr)"/>

                            <!-- extract_actions_node ã‚‚3-3ã«å«ã‚ã‚‹ -->
                            <g class="substep-node" data-substep="3-3">
                                <rect x="75" y="320" width="130" height="35" rx="6" class="step3-rect"/>
                                <text x="140" y="342" text-anchor="middle" font-size="10" class="step3-text">extract_actions_node</text>
                            </g>

                            <line x1="140" y1="355" x2="140" y2="370" class="step3-line" marker-end="url(#sidebarArr)"/>

                            <!-- format_doc_node (3-4) -->
                            <g class="substep-node" data-substep="3-4">
                                <rect x="75" y="375" width="130" height="35" rx="6" class="step3-rect"/>
                                <text x="140" y="397" text-anchor="middle" font-size="10" class="step3-text">format_doc_node</text>
                            </g>
                        </g>

                        <line x1="140" y1="410" x2="140" y2="430" stroke="#667eea" stroke-width="2" marker-end="url(#sidebarArr)"/>

                        <!-- Step 4: æ¡ä»¶åˆ†å² -->
                        <g id="sidebar-step4" class="sidebar-step" data-step="4">
                            <text x="140" y="445" text-anchor="middle" fill="#333333" font-size="10">ğŸ”€ æ¡ä»¶åˆ†å²</text>
                            <polygon points="140,455 180,490 140,525 100,490" fill="#f8f9fa" stroke="#8b5cf6" stroke-width="2"/>
                            <text x="140" y="488" text-anchor="middle" fill="#8b5cf6" font-size="10">is_long?</text>
                            <text x="140" y="503" text-anchor="middle" fill="#8b5cf6" font-size="8">True/False</text>
                        </g>

                        <line x1="140" y1="525" x2="140" y2="545" stroke="#667eea" stroke-width="2" marker-end="url(#sidebarArr)"/>

                        <!-- Step 5: ã‚°ãƒ©ãƒ•çµ„ç«‹ -->
                        <g id="sidebar-step5" class="sidebar-step" data-step="5">
                            <rect x="50" y="550" width="180" height="50" rx="8" fill="#f8f9fa" stroke="#22543d" stroke-width="2"/>
                            <text x="140" y="570" text-anchor="middle" fill="#333333" font-size="10">ğŸ”§ ã‚°ãƒ©ãƒ•çµ„ã¿ç«‹ã¦</text>
                            <text x="140" y="588" text-anchor="middle" fill="#4ade80" font-size="9">add_node â†’ add_edge â†’ compile()</text>
                        </g>

                        <line x1="140" y1="600" x2="140" y2="620" stroke="#667eea" stroke-width="2" marker-end="url(#sidebarArr)"/>

                        <!-- Step 6: å®Ÿè¡Œ -->
                        <g id="sidebar-step6" class="sidebar-step" data-step="6">
                            <rect x="70" y="625" width="140" height="40" rx="8" fill="#f8f9fa" stroke="#22543d" stroke-width="2"/>
                            <text x="140" y="650" text-anchor="middle" fill="#333333" font-size="11">â–¶ graph.invoke()</text>
                        </g>
                    </svg>
                    <div class="current-step-label" id="sidebarStepLabel">Step 1: ç’°å¢ƒæº–å‚™</div>
                </div>
            </div><!-- /.tutorial-layout -->

            <div class="highlight-box success" style="margin-top: 2rem;">
                <div class="highlight-title">ğŸ“ ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§å­¦ã‚“ã ã“ã¨</div>
                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <div class="step-title">State = å…±æœ‰ãƒ‡ãƒ¼ã‚¿</div>
                            <p>å…¨Nodeé–“ã§å…±æœ‰ã€‚TypedDictã§å‹å®šç¾©ã€‚Annotatedã§è‡ªå‹•ãƒãƒ¼ã‚¸ã€‚</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <div class="step-title">Node = å‡¦ç†å˜ä½</div>
                            <p>Stateã‚’å—ã‘å–ã‚Šã€éƒ¨åˆ†æ›´æ–°ã‚’è¿”ã™é–¢æ•°ã€‚</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <div class="step-title">æ¡ä»¶åˆ†å² = ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</div>
                            <p>Stateã®å€¤ã‚’è¦‹ã¦ã€æ¬¡ã®Nodeã‚’æ±ºå®šã€‚</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <div class="step-title">ã‚°ãƒ©ãƒ•æ§‹ç¯‰ = çµ„ã¿ç«‹ã¦</div>
                            <p>add_node â†’ add_edge â†’ add_conditional_edges â†’ compile</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ãƒ‡ãƒ—ãƒ­ã‚¤ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="deploy">
            <div class="section-header">
                <div class="section-number">7</div>
                <h2 class="section-title">Cloud Run Functions ã¸ãƒ‡ãƒ—ãƒ­ã‚¤</h2>
                <p class="section-subtitle">å®Ÿè·µã§ä½œã£ãŸè­°äº‹éŒ²AIã‚’æœ¬ç•ªAPIã«ã™ã‚‹</p>
            </div>

            <!-- ã‚¤ãƒ³ãƒˆãƒ­ï¼šå®Ÿè·µã¨ã®é€£æº -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">ğŸ¯</div>
                    <h3 class="card-title">ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã‚„ã‚‹ã“ã¨</h3>
                </div>
                <div class="card-body">
                    <p><strong>å®Ÿè·µãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼ˆã‚¿ãƒ–6ï¼‰ã§ä½œã£ãŸã€Œè­°äº‹éŒ²è¦ç´„AIã€</strong>ã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ã«ã‚¢ãƒƒãƒ—ã—ã¦ã€<br>
                    èª°ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹APIã«ã—ã¾ã™ã€‚</p>

                    <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; flex-wrap: wrap; padding: 1.5rem; background: rgba(0,0,0,0.2); border-radius: 12px; margin: 1rem 0;">
                        <div style="background: var(--bg-card); border: 2px solid #22c55e; border-radius: 8px; padding: 0.75rem 1rem; text-align: center;">
                            <div style="font-size: 1.5rem;">âœ…</div>
                            <div style="font-size: 0.8rem; font-weight: 600;">å®Ÿè·µã§å®Œæˆ</div>
                            <div style="font-size: 0.7rem; color: var(--text-muted);">è­°äº‹éŒ²AI</div>
                        </div>
                        <div style="color: var(--accent-cyan); font-size: 1.5rem;">â†’</div>
                        <div style="background: var(--bg-card); border: 2px solid var(--accent-cyan); border-radius: 8px; padding: 0.75rem 1rem; text-align: center;">
                            <div style="font-size: 1.5rem;">ğŸ“</div>
                            <div style="font-size: 0.8rem; font-weight: 600;">+config.py</div>
                            <div style="font-size: 0.7rem; color: var(--text-muted);">è¨­å®šã‚’è¿½åŠ </div>
                        </div>
                        <div style="color: var(--accent-cyan); font-size: 1.5rem;">â†’</div>
                        <div style="background: var(--bg-card); border: 2px solid var(--accent-blue); border-radius: 8px; padding: 0.75rem 1rem; text-align: center;">
                            <div style="font-size: 1.5rem;">ğŸ”§</div>
                            <div style="font-size: 0.8rem; font-weight: 600;">main.pyæ”¹é€ </div>
                            <div style="font-size: 0.7rem; color: var(--text-muted);">APIåŒ–</div>
                        </div>
                        <div style="color: var(--accent-cyan); font-size: 1.5rem;">â†’</div>
                        <div style="background: var(--bg-card); border: 2px solid var(--accent-green); border-radius: 8px; padding: 0.75rem 1rem; text-align: center;">
                            <div style="font-size: 1.5rem;">â˜ï¸</div>
                            <div style="font-size: 0.8rem; font-weight: 600;">ãƒ‡ãƒ—ãƒ­ã‚¤</div>
                            <div style="font-size: 0.7rem; color: var(--text-muted);">æœ¬ç•ªAPIå®Œæˆ</div>
                        </div>
                    </div>

                    <div style="background: rgba(34, 197, 94, 0.1); border-left: 4px solid #22c55e; padding: 1rem; border-radius: 8px;">
                        <p style="margin: 0; color: #22c55e; font-weight: 700;">ğŸ’¡ ä¸Šã‹ã‚‰é †ç•ªã«ã‚³ãƒ”ãƒšã™ã‚Œã°å‹•ãã¾ã™</p>
                        <p style="margin: 0.5rem 0 0 0; color: #d1d5db;">
                            å®Ÿè·µã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ä½œã£ãŸ <code>state.py</code>ã€<code>nodes.py</code>ã€<code>routing.py</code> ã¯<strong>ãã®ã¾ã¾ä½¿ã„ã¾ã™</strong>ã€‚<br>
                            è¿½åŠ ã™ã‚‹ã®ã¯ <code>config.py</code> ã¨ã€<code>main.py</code> ã®æ”¹é€ ã ã‘ã§ã™ã€‚
                        </p>
                    </div>
                </div>
            </div>

            <!-- é€šä¿¡ã®åŸºç¤çŸ¥è­˜ï¼ˆãŸã¨ãˆè©±ã§ç°¡æ½”ã«ï¼‰ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon orange">ğŸ“</div>
                    <h3 class="card-title">30ç§’ã§ã‚ã‹ã‚‹é€šä¿¡ã®åŸºç¤ï¼ˆãŸã¨ãˆè©±ï¼‰</h3>
                </div>
                <div class="card-body">
                    <p>å°‚é–€ç”¨èªãŒå‡ºã¦ãã‚‹ã®ã§ã€å…ˆã«ã€ŒãŸã¨ãˆè©±ã€ã§ç†è§£ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p>

                    <div style="display: grid; gap: 1rem; margin: 1rem 0;">
                        <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; border-left: 4px solid #3b82f6;">
                            <p style="margin: 0; color: #60a5fa; font-weight: 700;">ğŸŒ CORS = ã€Œèª°ã‹ã‚‰ã®é›»è©±ã‚’å—ã‘ã‚‹ã‹ã€</p>
                            <p style="margin: 0.5rem 0 0 0; color: #666666; font-size: 0.9rem;">
                                ä¼šç¤¾ã®é›»è©±ã«èª°ã§ã‚‚å‡ºã‚‰ã‚ŒãŸã‚‰å›°ã‚‹ â†’ ã€Œã“ã®ç•ªå·ã‹ã‚‰ã ã‘å—ã‘ã‚‹ã€ã¨è¨­å®šã™ã‚‹
                            </p>
                        </div>
                        <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; border-left: 4px solid #22c55e;">
                            <p style="margin: 0; color: #22c55e; font-weight: 700;">ğŸ”‘ APIã‚­ãƒ¼ = ã€Œåˆè¨€è‘‰ã€</p>
                            <p style="margin: 0.5rem 0 0 0; color: #666666; font-size: 0.9rem;">
                                åˆè¨€è‘‰ã‚’çŸ¥ã£ã¦ã„ã‚‹äººã ã‘ãŒå…¥ã‚Œã‚‹ â†’ ãŠå®¢ã•ã‚“ã”ã¨ã«åˆ¥ã®åˆè¨€è‘‰ã‚’ç™ºè¡Œ
                            </p>
                        </div>
                        <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; border-left: 4px solid #f97316;">
                            <p style="margin: 0; color: #fb923c; font-weight: 700;">ğŸ“ JWT = ã€Œæœ¬äººç¢ºèªã®ä¼šå“¡è¨¼ã€</p>
                            <p style="margin: 0.5rem 0 0 0; color: #666666; font-size: 0.9rem;">
                                ä¼šå“¡è¨¼ã«åå‰ãŒæ›¸ã„ã¦ã‚ã‚‹ â†’ ã‚µãƒ¼ãƒãƒ¼ãŒã€Œã“ã®äººã¯èª°ã‹ã€ã‚’ç¢ºèªã§ãã‚‹
                            </p>
                        </div>
                        <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; border-left: 4px solid #8b5cf6;">
                            <p style="margin: 0; color: #a78bfa; font-weight: 700;">âœ’ï¸ ç½²å = ã€Œå½é€ ã§ããªã„å®Ÿå°ã€</p>
                            <p style="margin: 0.5rem 0 0 0; color: #666666; font-size: 0.9rem;">
                                ä¼šå“¡è¨¼ã«å®Ÿå°ã‚’æŠ¼ã™ â†’ å½ã®ä¼šå“¡è¨¼ã‚’ä½œã£ã¦ã‚‚å®Ÿå°ãŒãªã„ã®ã§ãƒãƒ¬ã‚‹
                            </p>
                        </div>
                    </div>

                    <p style="color: var(--text-muted); font-size: 0.85rem; margin: 0;">
                        â€» è©³ã—ã„ä»•çµ„ã¿ã¯ä¸‹ã§èª¬æ˜ã—ã¾ã™ã€‚ã¾ãšã¯ã€Œã“ã†ã„ã†ã‚‚ã®ãŒã‚ã‚‹ã€ã¨è¦šãˆã¦ãã ã•ã„ã€‚
                    </p>
                </div>
            </div>

            <!-- é€šä¿¡ãƒ•ãƒ­ãƒ¼è©³ç´°è§£èª¬ï¼ˆæ–°è¦è¿½åŠ ï¼‰ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon cyan">ğŸ”„</div>
                    <h3 class="card-title">é€šä¿¡ã®æµã‚Œã‚’å®Œå…¨ç†è§£ã™ã‚‹</h3>
                </div>
                <div class="card-body">
                    <p>HTMLã‹ã‚‰APIã‚’å‘¼ã¶ã¨ãã€<strong>ãƒ–ãƒ©ã‚¦ã‚¶ãŒé–“ã«å…¥ã‚Šã¾ã™</strong>ã€‚ã“ã®æµã‚Œã‚’ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚</p>

                    <!-- ç™»å ´äººç‰© -->
                    <h4 style="color: var(--accent-green); margin: 1.5rem 0 1rem;">ğŸ‘¥ ç™»å ´äººç‰©</h4>
                    <div class="diagram-container" style="padding: 1.5rem;">
                        <svg class="svg-diagram" viewBox="0 0 700 120">
                            <!-- HTML -->
                            <rect x="20" y="30" width="150" height="60" rx="12" fill="#667eea" fill-opacity="0.2" stroke="#667eea" stroke-width="2"/>
                            <text x="95" y="55" text-anchor="middle" fill="#667eea" font-size="12" font-weight="700">HTML</text>
                            <text x="95" y="72" text-anchor="middle" fill="#9ca3af" font-size="10">ã‚ãªãŸã®Webã‚µã‚¤ãƒˆ</text>
                            <!-- çŸ¢å°1 -->
                            <line x1="175" y1="60" x2="235" y2="60" stroke="#22c55e" stroke-width="2" marker-end="url(#arr-deploy1)"/>
                            <!-- ãƒ–ãƒ©ã‚¦ã‚¶ -->
                            <rect x="240" y="30" width="150" height="60" rx="12" fill="#22c55e" fill-opacity="0.2" stroke="#22c55e" stroke-width="2"/>
                            <text x="315" y="50" text-anchor="middle" fill="#22c55e" font-size="12" font-weight="700">ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶</text>
                            <text x="315" y="67" text-anchor="middle" fill="#9ca3af" font-size="10">Chrome, Safariç­‰</text>
                            <text x="315" y="82" text-anchor="middle" fill="#fbbf24" font-size="9">â˜…ã“ã“ãŒé‡è¦ï¼</text>
                            <!-- çŸ¢å°2 -->
                            <line x1="395" y1="60" x2="455" y2="60" stroke="#22c55e" stroke-width="2" marker-end="url(#arr-deploy1)"/>
                            <!-- Cloud Run API -->
                            <rect x="460" y="30" width="180" height="60" rx="12" fill="#06b6d4" fill-opacity="0.2" stroke="#06b6d4" stroke-width="2"/>
                            <text x="550" y="55" text-anchor="middle" fill="#06b6d4" font-size="12" font-weight="700">â˜ï¸ Cloud Run API</text>
                            <text x="550" y="72" text-anchor="middle" fill="#9ca3af" font-size="10">ã‚ãªãŸã®ã‚µãƒ¼ãƒãƒ¼</text>
                            <!-- çŸ¢å°å®šç¾© -->
                            <defs>
                                <marker id="arr-deploy1" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>

                    <!-- 8ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼ -->
                    <h4 style="color: var(--accent-green); margin: 1.5rem 0 1rem;">ğŸ“‹ é€šä¿¡ã®8ã‚¹ãƒ†ãƒƒãƒ—</h4>
                    <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 1.5rem; margin: 1rem 0;">
                        <div style="display: grid; gap: 0.75rem;">
                            <!-- Step 1-2: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ -->
                            <div style="display: flex; align-items: flex-start; gap: 1rem;">
                                <div style="background: #3b82f6; color: white; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; flex-shrink: 0;">1</div>
                                <div>
                                    <div style="color: #60a5fa; font-weight: 600;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒœã‚¿ãƒ³ã‚’æŠ¼ã™</div>
                                    <div style="color: #666666; font-size: 0.85rem;">HTMLã®ã€Œè¦ç´„ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: flex-start; gap: 1rem;">
                                <div style="background: #3b82f6; color: white; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; flex-shrink: 0;">2</div>
                                <div>
                                    <div style="color: #60a5fa; font-weight: 600;">HTMLãŒãƒ–ãƒ©ã‚¦ã‚¶ã«é ¼ã‚€</div>
                                    <div style="color: #666666; font-size: 0.85rem;">ã€ŒCloud Run APIã«ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’é€ã£ã¦ãã¦ã€</div>
                                </div>
                            </div>
                            <!-- Step 3-4: CORSç¢ºèª -->
                            <div style="border-left: 3px solid #f97316; padding-left: 1rem; margin-left: 0.7rem;">
                                <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 0.75rem;">
                                    <div style="background: #f97316; color: white; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; flex-shrink: 0;">3</div>
                                    <div>
                                        <div style="color: #fb923c; font-weight: 600;">âš¡ äº‹å‰ç¢ºèªï¼ˆOPTIONSãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰</div>
                                        <div style="color: #666666; font-size: 0.85rem;">ãƒ–ãƒ©ã‚¦ã‚¶â†’APIã€ŒPOSTãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ‡ãƒ¼ã‚¿é€ã£ã¦ã„ã„ï¼ŸContent-Typeãƒ©ãƒ™ãƒ«ä»˜ã‘ã¦ã„ã„ï¼Ÿã€</div>
                                        <div style="color: #fbbf24; font-size: 0.8rem; margin-top: 0.25rem;">â€»ã¾ã ãƒ‡ãƒ¼ã‚¿ã¯é€ã£ã¦ã„ãªã„ï¼è¨±å¯ã‚’æ±‚ã‚ã¦ã‚‹ã ã‘</div>
                                    </div>
                                </div>
                                <div style="display: flex; align-items: flex-start; gap: 1rem;">
                                    <div style="background: #f97316; color: white; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; flex-shrink: 0;">4</div>
                                    <div>
                                        <div style="color: #fb923c; font-weight: 600;">âœ… è¨±å¯ã‚’è¿”ã™ï¼ˆCORSãƒ˜ãƒƒãƒ€ãƒ¼ï¼‰</div>
                                        <div style="color: #666666; font-size: 0.85rem;">APIâ†’ãƒ–ãƒ©ã‚¦ã‚¶ã€Œã„ã„ã‚ˆï¼Allow-Origin: * ã§è¨±å¯ã™ã‚‹ã­ã€</div>
                                    </div>
                                </div>
                            </div>
                            <!-- Step 5-6: æœ¬ç•ªãƒªã‚¯ã‚¨ã‚¹ãƒˆ -->
                            <div style="display: flex; align-items: flex-start; gap: 1rem;">
                                <div style="background: #22c55e; color: white; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; flex-shrink: 0;">5</div>
                                <div>
                                    <div style="color: #22c55e; font-weight: 600;">ğŸ“¤ æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ã‚’é€ã‚‹ï¼ˆPOSTãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰</div>
                                    <div style="color: #666666; font-size: 0.85rem;">ãƒ–ãƒ©ã‚¦ã‚¶â†’APIã€Œè¨±å¯ã‚‚ã‚‰ãˆãŸï¼ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã‚’é€ã‚‹ã‚ˆã€</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: flex-start; gap: 1rem;">
                                <div style="background: #22c55e; color: white; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; flex-shrink: 0;">6</div>
                                <div>
                                    <div style="color: #22c55e; font-weight: 600;">âš™ï¸ LangGraphã‚’å®Ÿè¡Œ</div>
                                    <div style="color: #666666; font-size: 0.85rem;">Cloud Run APIãŒè­°äº‹éŒ²è¦ç´„AIã‚’å‹•ã‹ã™</div>
                                </div>
                            </div>
                            <!-- Step 7-8: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ -->
                            <div style="display: flex; align-items: flex-start; gap: 1rem;">
                                <div style="background: #8b5cf6; color: white; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; flex-shrink: 0;">7</div>
                                <div>
                                    <div style="color: #a78bfa; font-weight: 600;">ğŸ“¥ çµæœã‚’è¿”ã™</div>
                                    <div style="color: #666666; font-size: 0.85rem;">APIâ†’ãƒ–ãƒ©ã‚¦ã‚¶ã€Œå‡¦ç†çµæœã ã‚ˆã€+ Allow-Originãƒ˜ãƒƒãƒ€ãƒ¼</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: flex-start; gap: 1rem;">
                                <div style="background: #8b5cf6; color: white; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; flex-shrink: 0;">8</div>
                                <div>
                                    <div style="color: #a78bfa; font-weight: 600;">ğŸ‰ ç”»é¢ã«è¡¨ç¤º</div>
                                    <div style="color: #666666; font-size: 0.85rem;">ãƒ–ãƒ©ã‚¦ã‚¶ãŒHTMLã«çµæœã‚’æ¸¡ã™ â†’ ç”»é¢ã«è¡¨ç¤ºï¼</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CORSãƒ˜ãƒƒãƒ€ãƒ¼è©³ç´°è¡¨ -->
                    <h4 style="color: var(--accent-green); margin: 1.5rem 0 1rem;">ğŸ“ CORSãƒ˜ãƒƒãƒ€ãƒ¼ã®æ„å‘³</h4>
                    <table style="font-size: 0.85rem;">
                        <thead>
                            <tr>
                                <th>ãƒ˜ãƒƒãƒ€ãƒ¼</th>
                                <th>èª°ãŒèª°ã«ï¼Ÿ</th>
                                <th>æ„å‘³</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>Access-Control-Allow-Origin</code></td>
                                <td>APIâ†’ãƒ–ãƒ©ã‚¦ã‚¶</td>
                                <td>ã“ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã™ã‚‹ã‚ˆ</td>
                            </tr>
                            <tr>
                                <td><code>Access-Control-Allow-Methods</code></td>
                                <td>APIâ†’ãƒ–ãƒ©ã‚¦ã‚¶</td>
                                <td>ã“ã®HTTPãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆPOSTç­‰ï¼‰ã§é€ã£ã¦ã„ã„ã‚ˆ</td>
                            </tr>
                            <tr>
                                <td><code>Access-Control-Allow-Headers</code></td>
                                <td>APIâ†’ãƒ–ãƒ©ã‚¦ã‚¶</td>
                                <td>ã“ã®ãƒ©ãƒ™ãƒ«ï¼ˆContent-Typeç­‰ï¼‰ã‚’ä»˜ã‘ã¦ã„ã„ã‚ˆ</td>
                            </tr>
                            <tr>
                                <td><code>Access-Control-Max-Age</code></td>
                                <td>APIâ†’ãƒ–ãƒ©ã‚¦ã‚¶</td>
                                <td>ã“ã®è¨±å¯ã‚’â—‹ç§’é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦</td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- Content-Typeèª¬æ˜ -->
                    <h4 style="color: var(--accent-green); margin: 1.5rem 0 1rem;">ğŸ“¦ Content-Typeã¨ã¯ï¼Ÿ</h4>
                    <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; border-left: 4px solid #06b6d4;">
                        <p style="margin: 0; color: #22d3ee; font-weight: 700;">ã€Œé€ã‚‹ãƒ‡ãƒ¼ã‚¿ã®å½¢å¼ãŒä½•ã‹ã€ã‚’ã‚µãƒ¼ãƒãƒ¼ã«æ•™ãˆã‚‹ãƒ©ãƒ™ãƒ«</p>
                        <p style="margin: 0.5rem 0 0 0; color: #666666; font-size: 0.9rem;">
                            å®…é…ä¾¿ã®ã€Œå‰²ã‚Œç‰©æ³¨æ„ã€ã€Œå†·è”µã€ãƒ©ãƒ™ãƒ«ã®ã‚ˆã†ãªã‚‚ã®
                        </p>
                        <div style="display: grid; gap: 0.25rem; margin-top: 0.75rem; font-size: 0.85rem; font-family: 'JetBrains Mono', monospace;">
                            <div><code style="color: #22d3ee;">application/json</code> â†’ ã€Œã“ã‚Œã¯JSONãƒ‡ãƒ¼ã‚¿ã§ã™ã€</div>
                            <div><code style="color: #22d3ee;">text/html</code> â†’ ã€Œã“ã‚Œã¯HTMLã§ã™ã€</div>
                            <div><code style="color: #22d3ee;">image/png</code> â†’ ã€Œã“ã‚Œã¯ç”»åƒã§ã™ã€</div>
                        </div>
                    </div>

                    <div class="highlight-box warning" style="margin-top: 1.5rem;">
                        <div class="highlight-title">âš ï¸ æœ¬ç•ªç’°å¢ƒã§ã¯ * ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ï¼</div>
                        <p style="font-size: 0.9rem; margin: 0;">
                            <code>Access-Control-Allow-Origin: "*"</code> ã¯ã€Œèª°ã§ã‚‚APIã‚’ä½¿ãˆã‚‹ã€è¨­å®šã§ã™ã€‚<br>
                            æœ¬ç•ªã§ã¯ <code>"https://your-app.web.app"</code> ãªã©ç‰¹å®šãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã¿ã«åˆ¶é™ã—ã¾ã—ã‚‡ã†ã€‚
                        </p>
                    </div>
                </div>
            </div>

            <!-- Step 1: ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon blue">ğŸ“</div>
                    <h3 class="card-title">Step 1: ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆï¼ˆå®Ÿè·µã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰å¼•ãç¶™ãï¼‰</h3>
                </div>
                <div class="card-body">
                    <p>å®Ÿè·µã§ä½œã£ãŸãƒ•ã‚¡ã‚¤ãƒ« + ãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p>
                    <div class="code-block">
                        <div class="code-header">ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ</div>
                        <div class="code-body">
                            <div class="code-content">
<pre style="color: var(--text-primary);">meeting_summarizer/
â”‚
â”‚  <span style="color: #22c55e;">â”€â”€ å®Ÿè·µã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ä½œæˆæ¸ˆã¿ â”€â”€</span>
â”œâ”€â”€ <span style="color: #22c55e;">state.py</span>             <span class="cm"># Stateå®šç¾©ï¼ˆãã®ã¾ã¾ä½¿ã†ï¼‰</span>
â”œâ”€â”€ <span style="color: #22c55e;">nodes.py</span>             <span class="cm"># Nodeé–¢æ•°ï¼ˆãã®ã¾ã¾ä½¿ã†ï¼‰</span>
â”œâ”€â”€ <span style="color: #22c55e;">routing.py</span>           <span class="cm"># ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆãã®ã¾ã¾ä½¿ã†ï¼‰</span>
â”‚
â”‚  <span style="color: #f97316;">â”€â”€ ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§è¿½åŠ  â”€â”€</span>
â”œâ”€â”€ <span style="color: #f97316;">config.py</span>            <span class="cm"># ğŸ†• è¨­å®šãƒ»ç’°å¢ƒå¤‰æ•°ãƒ»èªè¨¼</span>
â”œâ”€â”€ <span style="color: #f97316;">main.py</span>              <span class="cm"># ğŸ”§ APIç”¨ã«æ”¹é€ </span>
â”œâ”€â”€ <span style="color: #f97316;">requirements.txt</span>     <span class="cm"># ğŸ”§ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè¿½åŠ </span>
â”‚
â”‚  <span style="color: #8b5cf6;">â”€â”€ èªè¨¼æ–¹å¼ã«å¿œã˜ã¦è¿½åŠ  â”€â”€</span>
â””â”€â”€ <span style="color: #8b5cf6;">auth.py</span>              <span class="cm"># Firebaseèªè¨¼ã‚’ä½¿ã†å ´åˆã®ã¿</span></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 2: å„ãƒ•ã‚¡ã‚¤ãƒ« -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon cyan">ğŸ“„</div>
                    <h3 class="card-title">Step 2: å„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒšï¼ˆä¸Šã‹ã‚‰é †ç•ªã«ï¼‰</h3>
                </div>
                <div class="card-body">
                    <p>ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’<strong>ä¸Šã‹ã‚‰é †ç•ªã«ã‚³ãƒ”ãƒš</strong>ã—ã¦ãã ã•ã„ã€‚</p>

                    <h4 style="margin: 1rem 0 0.5rem; color: var(--accent-orange);">â‘  requirements.txtï¼ˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªè¿½åŠ ï¼‰</h4>
                    <div class="code-block">
                        <div class="code-header">requirements.txt - Cloud Runç”¨ã«è¿½åŠ </div>
                        <div class="code-body">
                            <div class="code-content">
<pre><span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># Cloud Run Functions ã«å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
functions-framework==3.*          <span class="cm"># Cloud Run Functionsç”¨</span>
langgraph>=0.2.0                  <span class="cm"># å®Ÿè·µã§ä½¿ç”¨</span>
langchain-google-vertexai>=1.0.0  <span class="cm"># Gemini API</span>
google-cloud-aiplatform>=1.38.0   <span class="cm"># Vertex AI</span></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

                    <h4 style="margin: 1.5rem 0 0.5rem; color: var(--accent-orange);">â‘¡ config.pyï¼ˆğŸ†• æ–°è¦ä½œæˆï¼‰</h4>
                    <div style="background: rgba(34, 197, 94, 0.1); border-left: 4px solid #22c55e; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                        <p style="margin: 0; color: #22c55e; font-weight: 700;">ğŸ’¡ ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²</p>
                        <p style="margin: 0.5rem 0 0 0; color: #d1d5db;">
                            è¨­å®šã‚’1ç®‡æ‰€ã«ã¾ã¨ã‚ã‚‹ã€Œå¸ä»¤å¡”ã€<br>
                            â†’ <strong>ã‚³ãƒ¼ãƒ‰ã‚’å¤‰ãˆãšã«</strong>Cloud Consoleã§è¨­å®šå¤‰æ›´ã§ãã‚‹
                        </p>
                    </div>

                    <!-- 2ç¨®é¡ã®APIã‚­ãƒ¼ã®é•ã„ -->
                    <div style="background: #f8f9fa; padding: 1.25rem; border-radius: 12px; border: 2px solid #f97316; margin-bottom: 1.5rem;">
                        <p style="margin: 0 0 1rem; color: #fb923c; font-weight: 700; font-size: 1rem;">âš ï¸ 2ç¨®é¡ã®ã€ŒAPIã‚­ãƒ¼ã€ã‚’æ··åŒã—ãªã„ã§ï¼</p>
                        <div style="display: grid; gap: 1rem;">
                            <!-- Gemini APIã‚­ãƒ¼ -->
                            <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #3b82f6;">
                                <div style="color: #60a5fa; font-weight: 600; margin-bottom: 0.5rem;">ğŸ¤– Gemini APIã‚­ãƒ¼ï¼ˆLLMç”¨ï¼‰</div>
                                <div style="color: #666666; font-size: 0.85rem;">
                                    <strong>ç”¨é€”:</strong> Googleã®LLMï¼ˆGeminiï¼‰ã‚’å‘¼ã³å‡ºã™ãŸã‚ã®ã‚­ãƒ¼<br>
                                    <strong>ç™ºè¡Œå…ƒ:</strong> Google AI Studio ã¾ãŸã¯ Vertex AI<br>
                                    <strong>èª°ãŒä½¿ã†:</strong> ã‚ãªãŸã®ã‚µãƒ¼ãƒãƒ¼ï¼ˆCloud Runï¼‰ãŒGoogleã«å¯¾ã—ã¦ä½¿ã†<br>
                                    <strong>ä»Šå›ã®è¨­å®š:</strong> Vertex AIã‚’ä½¿ã†ãŸã‚ä¸è¦ï¼ˆGCPã®èªè¨¼ã§ä»£ç”¨ï¼‰
                                </div>
                            </div>
                            <!-- ã‚ãªãŸã®APIã‚­ãƒ¼ -->
                            <div style="background: rgba(249, 115, 22, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #f97316;">
                                <div style="color: #fb923c; font-weight: 600; margin-bottom: 0.5rem;">ğŸ”‘ ã‚ãªãŸã®APIã‚­ãƒ¼ï¼ˆã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ç”¨ï¼‰</div>
                                <div style="color: #666666; font-size: 0.85rem;">
                                    <strong>ç”¨é€”:</strong> ã‚ãªãŸã®APIã‚’ä½¿ã†äººã‚’åˆ¶é™ã™ã‚‹ã€Œåˆè¨€è‘‰ã€<br>
                                    <strong>ç™ºè¡Œå…ƒ:</strong> ã‚ãªãŸè‡ªèº«ãŒè‡ªç”±ã«æ±ºã‚ã‚‹<br>
                                    <strong>èª°ãŒä½¿ã†:</strong> ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆHTMLã‚µã‚¤ãƒˆï¼‰ãŒã‚ãªãŸã®APIã«å¯¾ã—ã¦ä½¿ã†<br>
                                    <strong>ä»Šå›ã®è¨­å®š:</strong> <code>API_KEYS</code> ç’°å¢ƒå¤‰æ•°ã§è¨­å®š
                                </div>
                            </div>
                        </div>
                        <!-- å›³è§£ -->
                        <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; margin-top: 1rem; font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: #e6edf3; overflow-x: auto;">
<pre style="margin: 0;">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   X-API-Key: "abc123"    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   GCPèªè¨¼ï¼ˆè‡ªå‹•ï¼‰   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HTMLã‚µã‚¤ãƒˆ   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  Cloud Run   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚   Gemini     â”‚
â”‚  (ãƒ¦ãƒ¼ã‚¶ãƒ¼)   â”‚   ã‚ãªãŸã®APIã‚­ãƒ¼        â”‚   (ã‚ãªãŸ)   â”‚   Vertex AIèªè¨¼    â”‚   (Google)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
                        </div>
                    </div>

                <div class="code-block">
                    <div class="code-header">config.py - APIã‚­ãƒ¼èªè¨¼ + ç’°å¢ƒå¤‰æ•°ç®¡ç†</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span></div>
                        <div class="code-content">
<pre><span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># config.py - ç’°å¢ƒå¤‰æ•°ç®¡ç†</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># â˜…â˜…â˜… Cloud Consoleã®ç’°å¢ƒå¤‰æ•°ã§è¨­å®šã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ â˜…â˜…â˜…</span>
<span class="cm">#</span>
<span class="cm"># ã€ãŸã¨ãˆè©±ã€‘</span>
<span class="cm"># ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€Œå—ä»˜ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã€ã®ã‚ˆã†ãªã‚‚ã®</span>
<span class="cm"># â†’ ã€Œåˆè¨€è‘‰ã¯ã“ã‚Œã€ã€Œã“ã®ç•ªå·ã‹ã‚‰ã ã‘é›»è©±ã‚’å—ã‘ã¦ã€ãªã©</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

<span class="kw">import</span> os

<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># GCPåŸºæœ¬è¨­å®š</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
PROJECT_ID = os.getenv(<span class="st">"PROJECT_ID"</span>)
LOCATION = os.getenv(<span class="st">"LOCATION"</span>, <span class="st">"asia-northeast1"</span>)

<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># APIã‚­ãƒ¼èªè¨¼ï¼ˆåˆè¨€è‘‰æ–¹å¼ï¼‰â˜…â˜…â˜… é‡è¦ â˜…â˜…â˜…</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># è¨±å¯ã™ã‚‹APIã‚­ãƒ¼ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¨­å®š</span>
<span class="cm"># ä¾‹: "key-abc123,key-xyz789"ï¼ˆãŠå®¢ã•ã‚“ã”ã¨ã«ç™ºè¡Œï¼‰</span>
API_KEYS = os.getenv(<span class="st">"API_KEYS"</span>, <span class="st">""</span>).split(<span class="st">","</span>)
API_KEYS = [k.strip() <span class="kw">for</span> k <span class="kw">in</span> API_KEYS <span class="kw">if</span> k.strip()]

<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># CORSè¨­å®šï¼ˆèª°ã‹ã‚‰ã®é›»è©±ã‚’å—ã‘ã‚‹ã‹ï¼‰</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># é–‹ç™ºæ™‚: "*"ï¼ˆèª°ã§ã‚‚OKï¼‰</span>
<span class="cm"># æœ¬ç•ªæ™‚: "https://your-app.web.app"ï¼ˆç‰¹å®šã‚µã‚¤ãƒˆã®ã¿ï¼‰</span>
CORS_ORIGINS = os.getenv(<span class="st">"CORS_ORIGINS"</span>, <span class="st">"*"</span>).split(<span class="st">","</span>)
CORS_ORIGINS = [o.strip() <span class="kw">for</span> o <span class="kw">in</span> CORS_ORIGINS <span class="kw">if</span> o.strip()]

<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># èªè¨¼ãƒã‚§ãƒƒã‚¯é–¢æ•°ï¼ˆåˆè¨€è‘‰ãŒåˆã£ã¦ã‚‹ã‹ç¢ºèªï¼‰</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="kw">def</span> <span class="fn">is_allowed_user</span>(api_key: <span class="cl">str</span>) -> <span class="cl">bool</span>:
    <span class="st">"""APIã‚­ãƒ¼ãŒè¨±å¯ãƒªã‚¹ãƒˆã«ã‚ã‚‹ã‹ç¢ºèª"""</span>
    <span class="cm"># APIã‚­ãƒ¼ãŒæœªè¨­å®šãªã‚‰å…¨å“¡è¨±å¯ï¼ˆé–‹ç™ºç”¨ï¼‰</span>
    <span class="kw">if not</span> API_KEYS:
        <span class="kw">return</span> <span class="kw">True</span>
    <span class="cm"># åˆè¨€è‘‰ãŒåˆã£ã¦ã‚‹ã‹ãƒã‚§ãƒƒã‚¯</span>
    <span class="kw">return</span> api_key <span class="kw">in</span> API_KEYS</pre>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(249, 115, 22, 0.1); border-left: 4px solid #f97316; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                    <p style="margin: 0; color: #fb923c; font-weight: 700;">âš ï¸ Cloud Consoleã§ã®è¨­å®šä¾‹</p>
                    <table style="width: 100%; margin-top: 0.5rem; border-collapse: collapse; font-size: 0.85rem;">
                        <tr style="background: rgba(0,0,0,0.2);">
                            <th style="padding: 8px; text-align: left; border: 1px solid #e0e0e0;">ç’°å¢ƒå¤‰æ•°å</th>
                            <th style="padding: 8px; text-align: left; border: 1px solid #e0e0e0;">è¨­å®šä¾‹</th>
                            <th style="padding: 8px; text-align: left; border: 1px solid #e0e0e0;">èª¬æ˜</th>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #e0e0e0; color: #666666;"><code>PROJECT_ID</code></td>
                            <td style="padding: 8px; border: 1px solid #e0e0e0; color: #666666;">my-gcp-project</td>
                            <td style="padding: 8px; border: 1px solid #e0e0e0; color: #6b7280;">GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #e0e0e0; color: #666666;"><code>API_KEYS</code></td>
                            <td style="padding: 8px; border: 1px solid #e0e0e0; color: #666666;">key-abc123,key-xyz789</td>
                            <td style="padding: 8px; border: 1px solid #e0e0e0; color: #6b7280;">è¨±å¯ã™ã‚‹åˆè¨€è‘‰ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #e0e0e0; color: #666666;"><code>CORS_ORIGINS</code></td>
                            <td style="padding: 8px; border: 1px solid #e0e0e0; color: #666666;">*ï¼ˆé–‹ç™ºï¼‰/ https://myapp.web.appï¼ˆæœ¬ç•ªï¼‰</td>
                            <td style="padding: 8px; border: 1px solid #e0e0e0; color: #6b7280;">è¨±å¯ã™ã‚‹å‘¼ã³å‡ºã—å…ƒ</td>
                        </tr>
                    </table>
                </div>

                    <h4 style="margin: 1.5rem 0 0.5rem; color: #22c55e;">â‘¢ state.pyã€nodes.pyã€routing.pyï¼ˆâœ… å®Ÿè·µã§ä½œæˆæ¸ˆã¿ï¼‰</h4>
                    <div style="background: rgba(34, 197, 94, 0.1); border: 2px solid #22c55e; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                        <p style="margin: 0; color: #22c55e; font-weight: 700;">âœ… ãã®ã¾ã¾ä½¿ãˆã¾ã™ï¼</p>
                        <p style="margin: 0.5rem 0 0 0; color: #d1d5db;">
                            å®Ÿè·µãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼ˆã‚¿ãƒ–6ï¼‰ã§ä½œæˆã—ãŸ<strong>3ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãã®ã¾ã¾ä½¿ç”¨</strong>ã—ã¾ã™ã€‚<br>
                            ã‚³ãƒ”ãƒ¼ã—ã¦åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã«é…ç½®ã—ã¦ãã ã•ã„ã€‚
                        </p>
                        <ul style="margin: 0.5rem 0 0 1rem; color: #666666; font-size: 0.9rem;">
                            <li><code>state.py</code> - MeetingStateã®å®šç¾©</li>
                            <li><code>nodes.py</code> - summarize_node, extract_topics_node ãªã©</li>
                            <li><code>routing.py</code> - route_by_length</li>
                        </ul>
                    </div>

                    <h4 style="margin: 1.5rem 0 0.5rem; color: var(--accent-blue);">â‘£ main.pyï¼ˆğŸ”§ APIç”¨ã«æ”¹é€ ï¼‰</h4>
                <div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <p style="margin: 0; color: #60a5fa; font-weight: 700;">ğŸ’¡ ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²ï¼ˆãŸã¨ãˆè©±ï¼‰</p>
                    <p style="margin: 0.5rem 0 0 0; color: #d1d5db;">
                        å®Ÿè·µã§ä½œã£ãŸã€Œè­°äº‹éŒ²AIã€ã‚’ã€Œå—ä»˜çª“å£ã€ã¨ã—ã¦å…¬é–‹ã—ã¾ã™ã€‚<br>
                        â†’ CORSç¢ºèªï¼ˆé›»è©±ç•ªå·ï¼‰â†’ APIã‚­ãƒ¼ç¢ºèªï¼ˆåˆè¨€è‘‰ï¼‰â†’ ã‚°ãƒ©ãƒ•å®Ÿè¡Œ
                    </p>
                </div>
                <div class="code-block">
                    <div class="code-header">main.py - è­°äº‹éŒ²è¦ç´„AIç”¨ï¼ˆå®Ÿè·µã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚°ãƒ©ãƒ•ã‚’ä½¿ç”¨ï¼‰</div>
                    <div class="code-body">
                        <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span><span>46</span><span>47</span><span>48</span><span>49</span><span>50</span><span>51</span><span>52</span><span>53</span><span>54</span><span>55</span><span>56</span><span>57</span><span>58</span><span>59</span><span>60</span><span>61</span><span>62</span><span>63</span><span>64</span><span>65</span><span>66</span><span>67</span><span>68</span><span>69</span><span>70</span><span>71</span><span>72</span><span>73</span><span>74</span><span>75</span><span>76</span><span>77</span><span>78</span><span>79</span><span>80</span><span>81</span><span>82</span><span>83</span><span>84</span><span>85</span><span>86</span><span>87</span><span>88</span><span>89</span><span>90</span><span>91</span><span>92</span><span>93</span><span>94</span><span>95</span><span>96</span><span>97</span><span>98</span><span>99</span><span>100</span></div>
                        <div class="code-content">
<pre><span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># main.py - è­°äº‹éŒ²è¦ç´„AIï¼ˆCloud Run Functionsç‰ˆï¼‰</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># â˜…â˜…â˜… å®Ÿè·µã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ä½œã£ãŸã‚°ãƒ©ãƒ•ã‚’APIåŒ– â˜…â˜…â˜…</span>
<span class="cm">#</span>
<span class="cm">#   ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆï¼ˆraw_textï¼‰</span>
<span class="cm">#       â†“</span>
<span class="cm">#   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="cm">#   â”‚ 1. CORSå‡¦ç†      â”‚ â† èª°ã‹ã‚‰ã®é›»è©±ã‚’å—ã‘ã‚‹ã‹</span>
<span class="cm">#   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="cm">#       â†“</span>
<span class="cm">#   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="cm">#   â”‚ 2. èªè¨¼ãƒã‚§ãƒƒã‚¯   â”‚ â† åˆè¨€è‘‰ã¯åˆã£ã¦ã‚‹ï¼Ÿ</span>
<span class="cm">#   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="cm">#       â†“</span>
<span class="cm">#   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="cm">#   â”‚ 3. ã‚°ãƒ©ãƒ•å®Ÿè¡Œ    â”‚ â† å®Ÿè·µã§ä½œã£ãŸã‚„ã¤ï¼</span>
<span class="cm">#   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="cm">#       â†“</span>
<span class="cm">#   è­°äº‹éŒ²ï¼ˆfinal_docï¼‰</span>
<span class="cm">#</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

<span class="kw">import</span> functions_framework
<span class="kw">from</span> flask <span class="kw">import</span> jsonify
<span class="kw">from</span> graph <span class="kw">import</span> create_graph  <span class="cm"># å®Ÿè·µã§ä½œã£ãŸã‚°ãƒ©ãƒ•</span>
<span class="kw">from</span> config <span class="kw">import</span> CORS_ORIGINS, is_allowed_user

<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># ã‚°ãƒ©ãƒ•ã‚’åˆæœŸåŒ–ï¼ˆã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆæ™‚ã«1å›ã ã‘ï¼‰</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
graph = create_graph()

<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># CORSè¨­å®šï¼ˆèª°ã‹ã‚‰ã®é›»è©±ã‚’å—ã‘ã‚‹ã‹ï¼‰</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="kw">def</span> <span class="fn">get_cors_headers</span>():
    origin = CORS_ORIGINS[<span class="cl">0</span>] <span class="kw">if</span> CORS_ORIGINS <span class="kw">else</span> <span class="st">"*"</span>
    <span class="kw">return</span> {
        <span class="st">"Access-Control-Allow-Origin"</span>: origin,
        <span class="st">"Access-Control-Allow-Methods"</span>: <span class="st">"POST, OPTIONS"</span>,
        <span class="st">"Access-Control-Allow-Headers"</span>: <span class="st">"Content-Type, X-API-Key"</span>,
    }

<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼ˆâ˜…â˜…â˜… å‰Šé™¤ç¦æ­¢ â˜…â˜…â˜…ï¼‰</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="fn">@functions_framework.http</span>
<span class="kw">def</span> <span class="fn">main</span>(request):
    <span class="st">"""Cloud Run Functions ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ"""</span>
    headers = get_cors_headers()

    <span class="cm"># â”â”â” 1. CORSãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆ â”â”â”</span>
    <span class="cm"># ãƒ–ãƒ©ã‚¦ã‚¶ãŒã€Œã“ã®é›»è©±ç•ªå·ã«é›»è©±ã—ã¦ã„ã„ï¼Ÿã€ã¨ç¢ºèªã—ã¦ãã‚‹</span>
    <span class="kw">if</span> request.method == <span class="st">"OPTIONS"</span>:
        <span class="kw">return</span> (<span class="st">""</span>, <span class="cl">204</span>, headers)

    <span class="cm"># â”â”â” 2. èªè¨¼ãƒã‚§ãƒƒã‚¯ï¼ˆåˆè¨€è‘‰ã®ç¢ºèªï¼‰ â”â”â”</span>
    api_key = request.headers.get(<span class="st">"X-API-Key"</span>, <span class="st">""</span>)
    <span class="kw">if not</span> is_allowed_user(api_key):
        <span class="kw">return</span> (jsonify({<span class="st">"error"</span>: <span class="st">"APIã‚­ãƒ¼ãŒç„¡åŠ¹ã§ã™"</span>}), <span class="cl">403</span>, headers)

    <span class="cm"># â”â”â” 3. è­°äº‹éŒ²è¦ç´„ã‚’å®Ÿè¡Œ â”â”â”</span>
    <span class="kw">return</span> handle_summarize(request, headers)


<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># è­°äº‹éŒ²è¦ç´„APIï¼ˆå®Ÿè·µã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚°ãƒ©ãƒ•ã‚’å‘¼ã³å‡ºã™ï¼‰</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="kw">def</span> <span class="fn">handle_summarize</span>(request, headers):
    <span class="kw">try</span>:
        <span class="cm"># ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—</span>
        request_json = request.get_json(silent=<span class="kw">True</span>)
        meeting_text = request_json.get(<span class="st">"meeting_text"</span>, <span class="st">""</span>) <span class="kw">if</span> request_json <span class="kw">else</span> <span class="st">""</span>

        <span class="kw">if not</span> meeting_text:
            <span class="kw">return</span> (jsonify({<span class="st">"error"</span>: <span class="st">"meeting_textãŒå¿…è¦ã§ã™"</span>}), <span class="cl">400</span>, headers)

        <span class="cm"># â˜…â˜…â˜… å®Ÿè·µã§ä½œã£ãŸã‚°ãƒ©ãƒ•ã‚’å®Ÿè¡Œ â˜…â˜…â˜…</span>
        <span class="cm"># MeetingStateã®raw_textã«ä¼šè­°ãƒ†ã‚­ã‚¹ãƒˆã‚’æ¸¡ã™</span>
        result = graph.invoke({
            <span class="st">"raw_text"</span>: meeting_text  <span class="cm"># â† å®Ÿè·µã§å®šç¾©ã—ãŸState</span>
        })

        <span class="cm"># çµæœã‚’è¿”ã™ï¼ˆfinal_docãŒæ•´å½¢ã•ã‚ŒãŸè­°äº‹éŒ²ï¼‰</span>
        <span class="kw">return</span> (jsonify({
            <span class="st">"summary"</span>: result.get(<span class="st">"summary"</span>, <span class="st">""</span>),
            <span class="st">"topics"</span>: result.get(<span class="st">"topics"</span>, []),
            <span class="st">"action_items"</span>: result.get(<span class="st">"action_items"</span>, []),
            <span class="st">"final_doc"</span>: result.get(<span class="st">"final_doc"</span>, <span class="st">""</span>)
        }), <span class="cl">200</span>, headers)

    <span class="kw">except</span> <span class="bi">Exception</span> <span class="kw">as</span> e:
        <span class="kw">return</span> (jsonify({<span class="st">"error"</span>: <span class="bi">str</span>(e)}), <span class="cl">500</span>, headers)</pre>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(34, 197, 94, 0.1); border-left: 4px solid #22c55e; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                    <p style="margin: 0 0 0.5rem; color: #22c55e; font-weight: 600;">âœ… ãƒã‚¤ãƒ³ãƒˆï¼ˆå®Ÿè·µã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¨é€£å‹•ï¼‰</p>
                    <ul style="margin: 0 0 0 1rem; color: #666666; font-size: 0.9rem;">
                        <li><strong>å®Ÿè·µã§ä½œã£ãŸã‚°ãƒ©ãƒ•ã‚’ãã®ã¾ã¾ä½¿ç”¨</strong>: graph.pyã®create_graph()ã‚’å‘¼ã³å‡ºã—</li>
                        <li><strong>MeetingStateã‚’ä½¿ç”¨</strong>: raw_textã‚’å…¥åŠ›ã€final_docã‚’å‡ºåŠ›</li>
                        <li><strong>ãŸã¨ãˆè©±ã‚³ãƒ¡ãƒ³ãƒˆ</strong>: CORS=é›»è©±ã€èªè¨¼=åˆè¨€è‘‰</li>
                        <li><strong>APIã‚­ãƒ¼èªè¨¼</strong>: X-API-Keyãƒ˜ãƒƒãƒ€ãƒ¼ã§èªè¨¼</li>
                    </ul>
                </div>

                <!-- ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆè§£èª¬ï¼ˆæ–°è¦è¿½åŠ ï¼‰ -->
                <h4 style="color: var(--accent-cyan); margin: 1.5rem 0 1rem;">â„ï¸ ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆã¨é…å»¶åˆæœŸåŒ–</h4>
                <div style="background: #f8f9fa; padding: 1.25rem; border-radius: 12px; border: 1px solid var(--border-color);">
                    <p style="color: var(--text-secondary); margin: 0 0 1rem 0;">
                        <code>graph = create_graph()</code> ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§æ›¸ã„ã¦ã„ã‚‹ã®ã¯ãªãœï¼Ÿ
                    </p>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div style="background: rgba(0,0,0,0.2); padding: 1rem; border-radius: 8px;">
                            <div style="color: #60a5fa; font-weight: 600; margin-bottom: 0.5rem;">ğŸš€ ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆåˆå›èµ·å‹•ï¼‰</div>
                            <div style="color: #666666; font-size: 0.85rem;">
                                main.py å…¨ä½“ã‚’èª­ã¿è¾¼ã‚€<br>
                                â†’ <code>graph = create_graph()</code> ãŒ1å›ã ã‘å®Ÿè¡Œ<br>
                                â†’ å°‘ã—æ™‚é–“ãŒã‹ã‹ã‚‹ï¼ˆæ•°ç§’ï¼‰
                            </div>
                        </div>
                        <div style="background: rgba(0,0,0,0.2); padding: 1rem; border-radius: 8px;">
                            <div style="color: #22c55e; font-weight: 600; margin-bottom: 0.5rem;">âš¡ ã‚¦ã‚©ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆ2å›ç›®ä»¥é™ï¼‰</div>
                            <div style="color: #666666; font-size: 0.85rem;">
                                graphã¯æ—¢ã«ä½œæˆæ¸ˆã¿<br>
                                â†’ é–¢æ•°ã ã‘å®Ÿè¡Œ<br>
                                â†’ é«˜é€Ÿï¼ï¼ˆæ•°ç™¾ãƒŸãƒªç§’ï¼‰
                            </div>
                        </div>
                    </div>
                    <div class="highlight-box success" style="margin: 1rem 0 0 0;">
                        <p style="margin: 0; font-size: 0.9rem;">
                            <strong>ãƒ¡ãƒªãƒƒãƒˆ:</strong> é‡ã„å‡¦ç†ï¼ˆã‚°ãƒ©ãƒ•æ§‹ç¯‰ï¼‰ã‚’1å›ã ã‘ã«ã—ã¦ã€2å›ç›®ä»¥é™ã‚’é«˜é€ŸåŒ–
                        </p>
                    </div>
                </div>

                <!-- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®è¿”ã—æ–¹è§£èª¬ï¼ˆæ–°è¦è¿½åŠ ï¼‰ -->
                <h4 style="color: var(--accent-cyan); margin: 1.5rem 0 1rem;">ğŸ“¨ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®è¿”ã—æ–¹ã‚’ç†è§£ã™ã‚‹</h4>
                <div style="background: #f8f9fa; padding: 1.25rem; border-radius: 12px; border: 1px solid var(--border-color);">
                    <p style="color: var(--text-secondary); margin: 0 0 1rem 0;">
                        Cloud Run APIã‹ã‚‰ãƒ–ãƒ©ã‚¦ã‚¶ã¸ã®ã€Œæ‰‹ç´™ã€ã®æ›¸ãæ–¹ã§ã™ã€‚
                    </p>

                    <!-- OPTIONSã¸ã®è¿”äº‹ -->
                    <div style="background: rgba(249, 115, 22, 0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1rem; border-left: 3px solid #f97316;">
                        <div style="color: #fb923c; font-weight: 600; margin-bottom: 0.5rem;">OPTIONSãƒªã‚¯ã‚¨ã‚¹ãƒˆã¸ã®è¿”äº‹ï¼ˆè¨±å¯è¨¼ã ã‘ï¼‰</div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; color: #e6edf3; margin: 0.5rem 0;">
                            <code>return ("", 204, headers)</code>
                        </div>
                        <div style="display: grid; grid-template-columns: auto 1fr; gap: 0.5rem 1rem; font-size: 0.8rem; color: #666666; margin-top: 0.5rem;">
                            <code>""</code><span>æœ¬æ–‡ã¯ç©ºã£ã½ï¼ˆç¢ºèªã ã‘ãªã®ã§ï¼‰</span>
                            <code>204</code><span>ã€ŒOKã€ã§ã‚‚ä¸­èº«ã¯ãªã„ã‚ˆã€</span>
                            <code>headers</code><span>è¨±å¯è¨¼ï¼ˆCORSãƒ˜ãƒƒãƒ€ãƒ¼ï¼‰</span>
                        </div>
                    </div>

                    <!-- POSTã¸ã®è¿”äº‹ -->
                    <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #22c55e;">
                        <div style="color: #22c55e; font-weight: 600; margin-bottom: 0.5rem;">POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã¸ã®è¿”äº‹ï¼ˆçµæœ + è¨±å¯è¨¼ï¼‰</div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; color: #e6edf3; margin: 0.5rem 0;">
                            <code>return (jsonify({...}), 200, headers)</code>
                        </div>
                        <div style="display: grid; grid-template-columns: auto 1fr; gap: 0.5rem 1rem; font-size: 0.8rem; color: #666666; margin-top: 0.5rem;">
                            <code>jsonify({...})</code><span>æœ¬æ–‡ï¼ˆJSONå½¢å¼ã®çµæœï¼‰</span>
                            <code>200</code><span>ã€ŒOKã€ä¸­èº«ã‚ã‚‹ã‚ˆã€</span>
                            <code>headers</code><span>è¨±å¯è¨¼ï¼ˆã“ã‚Œã‚‚å¿…è¦ï¼ï¼‰</span>
                        </div>
                    </div>

                    <div class="highlight-box warning" style="margin: 1rem 0 0 0;">
                        <div class="highlight-title">âš ï¸ ãªãœPOSTã®è¿”äº‹ã«ã‚‚headersãŒå¿…è¦ï¼Ÿ</div>
                        <p style="font-size: 0.85rem; margin: 0;">
                            ãƒ–ãƒ©ã‚¦ã‚¶ã¯çµæœã‚’å—ã‘å–ã‚‹ã¨ãã‚‚ã€Œã“ã®çµæœã‚’HTMLã«æ¸¡ã—ã¦ã„ã„ã‹ã€ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚<br>
                            <strong>è¨±å¯è¨¼ãªã— â†’ ãƒ–ãƒ©ã‚¦ã‚¶ãŒãƒ–ãƒ­ãƒƒã‚¯ â†’ ç”»é¢ã«è¡¨ç¤ºã•ã‚Œãªã„</strong>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Step 3: GUIã§ãƒ‡ãƒ—ãƒ­ã‚¤ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon purple">ğŸ–¥ï¸</div>
                    <h3 class="card-title">Step 3: GUIã§ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆCloud Consoleï¼‰</h3>
                </div>
                <p style="color: var(--text-secondary); margin-bottom: 1rem;">ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã‚ãšã€GCP Cloud Consoleã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ‰‹é †</p>

                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <div class="step-title">Cloud Console ã«ã‚¢ã‚¯ã‚»ã‚¹</div>
                            <p><a href="https://console.cloud.google.com/functions" target="_blank" style="color: var(--accent-cyan);">console.cloud.google.com/functions</a> ã‚’é–‹ã</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <div class="step-title">ã€Œé–¢æ•°ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯</div>
                            <p>ä¸Šéƒ¨ã®é’ã„ã€Œ+ é–¢æ•°ã‚’ä½œæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <div class="step-title">åŸºæœ¬è¨­å®šã‚’å…¥åŠ›</div>
                            <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                                <li><strong>ç’°å¢ƒ</strong>: ç¬¬2ä¸–ä»£ï¼ˆCloud Run ãƒ™ãƒ¼ã‚¹ï¼‰</li>
                                <li><strong>é–¢æ•°å</strong>: meeting-summarizerï¼ˆè­°äº‹éŒ²è¦ç´„AIï¼‰</li>
                                <li><strong>ãƒªãƒ¼ã‚¸ãƒ§ãƒ³</strong>: asia-northeast1ï¼ˆæ±äº¬ï¼‰</li>
                                <li><strong>ãƒˆãƒªã‚¬ãƒ¼</strong>: HTTPS</li>
                            </ul>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <div class="step-title">èªè¨¼è¨­å®š</div>
                            <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                                <li><strong>ãƒ†ã‚¹ãƒˆæ™‚</strong>: ã€Œæœªèªè¨¼ã®å‘¼ã³å‡ºã—ã‚’è¨±å¯ã€ã«ãƒã‚§ãƒƒã‚¯</li>
                                <li><strong>æœ¬ç•ªæ™‚</strong>: ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã—ã€å¾Œã§IAMã§ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’è¨­å®š</li>
                            </ul>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <div class="step-title">ãƒ©ãƒ³ã‚¿ã‚¤ãƒ è¨­å®š</div>
                            <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                                <li><strong>ãƒ©ãƒ³ã‚¿ã‚¤ãƒ </strong>: Python 3.11</li>
                                <li><strong>ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ</strong>: chatï¼ˆmain.pyå†…ã®é–¢æ•°åï¼‰</li>
                                <li><strong>ãƒ¡ãƒ¢ãƒª</strong>: 512 MBä»¥ä¸Šæ¨å¥¨</li>
                                <li><strong>ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ</strong>: 300ç§’</li>
                            </ul>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">6</div>
                        <div class="step-content">
                            <div class="step-title">ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š</div>
                            <p>ã€Œãƒ©ãƒ³ã‚¿ã‚¤ãƒ ç’°å¢ƒå¤‰æ•°ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ä»¥ä¸‹ã‚’è¿½åŠ ï¼š</p>
                            <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                                <li><code>PROJECT_ID</code>: your-project-id</li>
                                <li><code>LOCATION</code>: asia-northeast1</li>
                            </ul>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">7</div>
                        <div class="step-content">
                            <div class="step-title">ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</div>
                            <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                                <li>ã€ŒZIP ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ã‚’é¸æŠ</li>
                                <li>ä½œæˆã—ãŸãƒ•ã‚©ãƒ«ãƒ€ã‚’ZIPåŒ–ã—ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</li>
                                <li>ã¾ãŸã¯ã€Œã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ã€ã§ç›´æ¥ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘</li>
                            </ul>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">8</div>
                        <div class="step-content">
                            <div class="step-title">ãƒ‡ãƒ—ãƒ­ã‚¤</div>
                            <p>ã€Œãƒ‡ãƒ—ãƒ­ã‚¤ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å®Œäº†ã‚’å¾…ã¤ï¼ˆ2-5åˆ†ï¼‰</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4: èªè¨¼è¨­å®š -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon orange">ğŸ”’</div>
                    <h3 class="card-title">Step 4: èªè¨¼è¨­å®šï¼ˆæœ¬ç•ªç”¨ï¼‰</h3>
                </div>
                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                    GUIã§ç‰¹å®šã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’ä»˜ä¸ã™ã‚‹
                </p>

                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <div class="step-title">é–¢æ•°ã®è©³ç´°ç”»é¢ã‚’é–‹ã</div>
                            <p>Cloud Functionsä¸€è¦§ã‹ã‚‰ã€ä½œæˆã—ãŸé–¢æ•°ã‚’ã‚¯ãƒªãƒƒã‚¯</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <div class="step-title">ã€Œæ¨©é™ã€ã‚¿ãƒ–ã‚’é¸æŠ</div>
                            <p>ä¸Šéƒ¨ã®ã‚¿ãƒ–ã‹ã‚‰ã€Œæ¨©é™ã€ã‚’ã‚¯ãƒªãƒƒã‚¯</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <div class="step-title">ã€Œãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ã‚’è¿½åŠ ã€ã‚’ã‚¯ãƒªãƒƒã‚¯</div>
                            <p>ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼/ã‚°ãƒ«ãƒ¼ãƒ—ã‚’è¿½åŠ </p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <div class="step-title">ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ã¨ãƒ­ãƒ¼ãƒ«ã‚’è¨­å®š</div>
                            <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                                <li><strong>ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼</strong>: user:someone@example.com</li>
                                <li><strong>ãƒ‰ãƒ¡ã‚¤ãƒ³å…¨ä½“</strong>: domain:yourcompany.com</li>
                                <li><strong>ã‚°ãƒ«ãƒ¼ãƒ—</strong>: group:dev-team@yourcompany.com</li>
                                <li><strong>ãƒ­ãƒ¼ãƒ«</strong>: Cloud Functions èµ·å‹•å…ƒï¼ˆroles/cloudfunctions.invokerï¼‰</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="highlight-box warning">
                    <div class="highlight-title">âš ï¸ èªè¨¼ã‚ã‚Šã®å ´åˆã®å‘¼ã³å‡ºã—æ–¹</div>
                    <p style="font-size: 0.9rem;">èªè¨¼ãŒå¿…è¦ãªé–¢æ•°ã‚’å‘¼ã³å‡ºã™ã«ã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«<strong>IDãƒˆãƒ¼ã‚¯ãƒ³</strong>ã‚’å«ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br>
                    Pythonã‹ã‚‰ã®å‘¼ã³å‡ºã—æ–¹æ³•ã¯ã€Œè¨­è¨ˆç›¸è«‡ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
                </div>
            </div>

            <!-- å‹•ä½œç¢ºèª -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">âœ…</div>
                    <h3 class="card-title">Step 5: å‹•ä½œç¢ºèª</h3>
                </div>

                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <div class="step-title">URLã‚’å–å¾—</div>
                            <p>é–¢æ•°ã®è©³ç´°ç”»é¢ã®ã€Œãƒˆãƒªã‚¬ãƒ¼ã€ã‚¿ãƒ–ã«URLãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <div class="step-title">ãƒ†ã‚¹ãƒˆãƒªã‚¯ã‚¨ã‚¹ãƒˆ</div>
                            <p>ã€Œãƒ†ã‚¹ãƒˆã€ã‚¿ãƒ–ã§ç›´æ¥ãƒ†ã‚¹ãƒˆã™ã‚‹ã‹ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚„Postmanã§ãƒ†ã‚¹ãƒˆ</p>
                        </div>
                    </div>
                </div>

                <div class="highlight-box success">
                    <div class="highlight-title">ğŸ‰ æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼ˆè­°äº‹éŒ²è¦ç´„AIï¼‰</div>
                    <div class="code-block" style="margin-top: 0.5rem;">
                        <div class="code-header">ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆcurlã‚³ãƒãƒ³ãƒ‰ï¼‰</div>
                        <div class="code-body">
                            <div class="code-content">
<pre>curl -X POST https://your-function-url \
  -H "Content-Type: application/json" \
  -H "X-API-Key: your-api-key" \
  -d '{"meeting_text": "æœ¬æ—¥ã®ä¼šè­°ã§ã¯..."}'</pre>
                            </div>
                        </div>
                    </div>
                    <div class="code-block" style="margin-top: 0.5rem;">
                        <div class="code-header">ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆJSONï¼‰</div>
                        <div class="code-body">
                            <div class="code-content">
<pre>{
    <span class="st">"summary"</span>: <span class="st">"æ–°æ©Ÿèƒ½ã®é–‹ç™ºæ–¹é‡ã¨æœŸé™ã«ã¤ã„ã¦è­°è«–..."</span>,
    <span class="st">"topics"</span>: [<span class="st">"æ–°æ©Ÿèƒ½é–‹ç™º"</span>, <span class="st">"ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«èª¿æ•´"</span>],
    <span class="st">"action_items"</span>: [<span class="st">"ç”°ä¸­: è¨­è¨ˆæ›¸ä½œæˆï¼ˆ1/20ã¾ã§ï¼‰"</span>],
    <span class="st">"final_doc"</span>: <span class="st">"# è­°äº‹éŒ²\\n\\n## è¦ç´„\\n..."</span>
}</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon blue">ğŸ“‹</div>
                    <h3 class="card-title">ãƒ‡ãƒ—ãƒ­ã‚¤å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h3>
                </div>
                <div style="background: #f0f2f5; border: 1px solid var(--border-color); border-radius: 12px; padding: 1.5rem;">
                    <div style="display: grid; gap: 0.75rem;">
                        <label style="display: flex; align-items: center; gap: 0.75rem; color: var(--text-secondary); cursor: pointer;">
                            <input type="checkbox" style="width: 18px; height: 18px; accent-color: #22c55e;">
                            <span><strong>main.py</strong>ã¨<strong>requirements.txt</strong>ãŒã‚ã‚‹</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.75rem; color: var(--text-secondary); cursor: pointer;">
                            <input type="checkbox" style="width: 18px; height: 18px; accent-color: #22c55e;">
                            <span>ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆåãŒmain.pyå†…ã®é–¢æ•°åã¨ä¸€è‡´ã—ã¦ã„ã‚‹</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.75rem; color: var(--text-secondary); cursor: pointer;">
                            <input type="checkbox" style="width: 18px; height: 18px; accent-color: #22c55e;">
                            <span>ç’°å¢ƒå¤‰æ•°ï¼ˆPROJECT_IDç­‰ï¼‰ã‚’è¨­å®šã—ã¦ã„ã‚‹</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.75rem; color: var(--text-secondary); cursor: pointer;">
                            <input type="checkbox" style="width: 18px; height: 18px; accent-color: #22c55e;">
                            <span>æœ¬ç•ªã§ã¯ã€Œæœªèªè¨¼ã®å‘¼ã³å‡ºã—ã‚’è¨±å¯ã€ã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã—ã¦ã„ã‚‹</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.75rem; color: var(--text-secondary); cursor: pointer;">
                            <input type="checkbox" style="width: 18px; height: 18px; accent-color: #22c55e;">
                            <span>é©åˆ‡ãªãƒ¦ãƒ¼ã‚¶ãƒ¼/ã‚°ãƒ«ãƒ¼ãƒ—ã«ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’ä»˜ä¸ã—ã¦ã„ã‚‹</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
            <!-- èªè¨¼æ–¹å¼ã®é¸æŠ -->
            <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon orange">ğŸ”</div>
                    <h3 class="card-title">èªè¨¼æ–¹å¼ã®é¸æŠï¼ˆâ˜…â˜…â˜… é‡è¦ â˜…â˜…â˜…ï¼‰</h3>
                </div>
                <div class="card-body">
                    <p>ç”¨é€”ã«å¿œã˜ã¦èªè¨¼æ–¹å¼ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p>

                    <!-- æ¯”è¼ƒè¡¨ -->
                    <div style="overflow-x: auto; margin: 1.5rem 0;">
                        <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                            <thead>
                                <tr style="background: rgba(34, 197, 94, 0.1);">
                                    <th style="padding: 12px; text-align: left; border: 1px solid #e0e0e0;">æ–¹å¼</th>
                                    <th style="padding: 12px; text-align: left; border: 1px solid #e0e0e0;">ç”¨é€”</th>
                                    <th style="padding: 12px; text-align: left; border: 1px solid #e0e0e0;">å®Ÿè£…é›£æ˜“åº¦</th>
                                    <th style="padding: 12px; text-align: left; border: 1px solid #e0e0e0;">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #e0e0e0; color: #22c55e; font-weight: 600;">APIã‚­ãƒ¼èªè¨¼</td>
                                    <td style="padding: 10px; border: 1px solid #e0e0e0; color: #666666;">ãŠå®¢ã•ã‚“ã«APIæä¾›</td>
                                    <td style="padding: 10px; border: 1px solid #e0e0e0; color: #666666;">â­ ç°¡å˜</td>
                                    <td style="padding: 10px; border: 1px solid #e0e0e0; color: #666666;">â—‹ ååˆ†</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #e0e0e0; color: #3b82f6; font-weight: 600;">Firebase Auth</td>
                                    <td style="padding: 10px; border: 1px solid #e0e0e0; color: #666666;">è‡ªç¤¾ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰çµŒç”±</td>
                                    <td style="padding: 10px; border: 1px solid #e0e0e0; color: #666666;">â­â­ ã‚„ã‚„è¤‡é›‘</td>
                                    <td style="padding: 10px; border: 1px solid #e0e0e0; color: #666666;">â— é«˜ã„</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #e0e0e0; color: #8b5cf6; font-weight: 600;">IAMèªè¨¼ã®ã¿</td>
                                    <td style="padding: 10px; border: 1px solid #e0e0e0; color: #666666;">ç¤¾å†…GCPãƒ¦ãƒ¼ã‚¶ãƒ¼é™å®š</td>
                                    <td style="padding: 10px; border: 1px solid #e0e0e0; color: #666666;">â­ ç°¡å˜ï¼ˆã‚³ãƒ¼ãƒ‰ä¸è¦ï¼‰</td>
                                    <td style="padding: 10px; border: 1px solid #e0e0e0; color: #666666;">â— é«˜ã„</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ -->
                    <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 12px; margin: 1.5rem 0;">
                        <p style="color: #22c55e; font-weight: 700; margin-bottom: 1rem;">ğŸ¤” ã©ã‚Œã‚’é¸ã¶ï¼Ÿ</p>
                        <div style="font-family: monospace; font-size: 0.85rem; color: #666666; line-height: 1.8;">
                            <p style="margin: 0;">ãŠå®¢ã•ã‚“ã«APIã ã‘æä¾›ã™ã‚‹ï¼Ÿ</p>
                            <p style="margin: 0; padding-left: 1rem;">â”œâ”€ Yes â†’ <span style="color: #22c55e; font-weight: 600;">APIã‚­ãƒ¼èªè¨¼</span></p>
                            <p style="margin: 0; padding-left: 1rem;">â””â”€ No â†’ è‡ªç¤¾ã§ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚‚ä½œã‚‹ï¼Ÿ</p>
                            <p style="margin: 0; padding-left: 3rem;">â”œâ”€ Yes â†’ <span style="color: #3b82f6; font-weight: 600;">Firebase Auth</span></p>
                            <p style="margin: 0; padding-left: 3rem;">â””â”€ No â†’ ç¤¾å†…GCPãƒ¦ãƒ¼ã‚¶ãƒ¼ã ã‘ï¼Ÿ</p>
                            <p style="margin: 0; padding-left: 5rem;">â””â”€ Yes â†’ <span style="color: #8b5cf6; font-weight: 600;">IAMèªè¨¼ã®ã¿</span>ï¼ˆStep 4ã§è¨­å®šæ¸ˆã¿ï¼‰</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
            <!-- æ–¹å¼A: APIã‚­ãƒ¼èªè¨¼ -->
            <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">ğŸ”‘</div>
                    <h3 class="card-title">æ–¹å¼A: APIã‚­ãƒ¼èªè¨¼ï¼ˆãŠå®¢ã•ã‚“ã«APIæä¾›ï¼‰</h3>
                </div>
                <div class="card-body">
                    <p>ã‚·ãƒ³ãƒ—ãƒ«ã§å°å…¥ã—ã‚„ã™ã„æ–¹å¼ã€‚ãŠå®¢ã•ã‚“ã”ã¨ã«APIã‚­ãƒ¼ã‚’ç™ºè¡Œã—ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å«ã‚ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚</p>

                    <!-- ä»•çµ„ã¿å›³ -->
                    <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 12px; margin: 1.5rem 0;">
                        <p style="color: #22c55e; font-weight: 700; margin-bottom: 1rem;">ğŸ“Š ä»•çµ„ã¿</p>
                        <div style="font-family: monospace; font-size: 0.85rem; color: #666666; line-height: 1.6;">
                            <p style="margin: 0;">[ãŠå®¢ã•ã‚“ã®ã‚·ã‚¹ãƒ†ãƒ ]</p>
                            <p style="margin: 0; padding-left: 1rem;">â†“ ãƒªã‚¯ã‚¨ã‚¹ãƒˆ + APIã‚­ãƒ¼</p>
                            <p style="margin: 0; padding-left: 1rem;">â†“ X-API-Key: sk-abc123...</p>
                            <p style="margin: 0;">[Cloud Run Functions]</p>
                            <p style="margin: 0; padding-left: 1rem;">â†“ APIã‚­ãƒ¼ã‚’æ¤œè¨¼</p>
                            <p style="margin: 0; padding-left: 1rem;">â†“ ä¸€è‡´ã—ãŸã‚‰å‡¦ç†å®Ÿè¡Œ</p>
                            <p style="margin: 0;">[ãƒ¬ã‚¹ãƒãƒ³ã‚¹]</p>
                        </div>
                    </div>

                    <h4 style="margin: 1.5rem 0 0.5rem; color: #22c55e;">config.py ã«è¿½åŠ </h4>
                    <div class="code-block">
                        <div class="code-header">config.py - APIã‚­ãƒ¼è¨­å®šã‚’è¿½åŠ </div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span></div>
                            <div class="code-content">
<pre><span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># ã‚»ã‚¯ã‚·ãƒ§ãƒ³5: APIã‚­ãƒ¼èªè¨¼ï¼ˆãŠå®¢ã•ã‚“å‘ã‘ï¼‰</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># æœ‰åŠ¹ãªAPIã‚­ãƒ¼ã®ãƒªã‚¹ãƒˆï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰</span>
<span class="cm"># ä¾‹: "sk-customer1-abc123,sk-customer2-def456"</span>
<span class="cm"># â˜…â˜…â˜… æœ¬ç•ªã§ã¯ Secret Manager ã®ä½¿ç”¨ã‚’æ¨å¥¨ â˜…â˜…â˜…</span>
VALID_API_KEYS = os.getenv(<span class="st">"VALID_API_KEYS"</span>, <span class="st">""</span>).split(<span class="st">","</span>)
VALID_API_KEYS = [k.strip() <span class="kw">for</span> k <span class="kw">in</span> VALID_API_KEYS <span class="kw">if</span> k.strip()]

<span class="kw">def</span> <span class="fn">is_valid_api_key</span>(api_key: <span class="cl">str</span>) -> <span class="cl">bool</span>:
    <span class="st">"""APIã‚­ãƒ¼ãŒæœ‰åŠ¹ã‹ãƒã‚§ãƒƒã‚¯"""</span>
    <span class="cm"># APIã‚­ãƒ¼èªè¨¼ãŒç„¡åŠ¹ï¼ˆã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ï¼‰å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—</span>
    <span class="kw">if not</span> VALID_API_KEYS:
        <span class="kw">return</span> <span class="kw">True</span>
    <span class="kw">return</span> api_key <span class="kw">in</span> VALID_API_KEYS

<span class="kw">def</span> <span class="fn">get_customer_from_key</span>(api_key: <span class="cl">str</span>) -> <span class="cl">str</span>:
    <span class="st">"""APIã‚­ãƒ¼ã‹ã‚‰ãŠå®¢ã•ã‚“åã‚’å–å¾—ï¼ˆãƒ­ã‚°ç”¨ï¼‰"""</span>
    <span class="cm"># ä¾‹: "sk-customer1-abc123" â†’ "customer1"</span>
    parts = api_key.split(<span class="st">"-"</span>)
    <span class="kw">return</span> parts[<span class="cl">1</span>] <span class="kw">if</span> <span class="bi">len</span>(parts) >= <span class="cl">2</span> <span class="kw">else</span> <span class="st">"unknown"</span></pre>
                            </div>
                        </div>
                    </div>

                    <h4 style="margin: 1.5rem 0 0.5rem; color: #22c55e;">main.py ã®èªè¨¼éƒ¨åˆ†ã‚’ä¿®æ­£</h4>
                    <div class="code-block">
                        <div class="code-header">main.py - APIã‚­ãƒ¼èªè¨¼ã‚’è¿½åŠ </div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span></div>
                            <div class="code-content">
<pre><span class="kw">from</span> config <span class="kw">import</span> is_valid_api_key, get_customer_from_key

<span class="cm"># â”â”â” èªè¨¼ãƒã‚§ãƒƒã‚¯ï¼ˆAPIã‚­ãƒ¼æ–¹å¼ï¼‰â”â”â”</span>
<span class="kw">def</span> <span class="fn">check_api_key_auth</span>(request) -> <span class="bi">tuple</span>[<span class="cl">bool</span>, <span class="cl">str</span>]:
    <span class="st">"""APIã‚­ãƒ¼èªè¨¼ã‚’ãƒã‚§ãƒƒã‚¯"""</span>
    <span class="cm"># ãƒ˜ãƒƒãƒ€ãƒ¼ã‹ã‚‰APIã‚­ãƒ¼ã‚’å–å¾—</span>
    api_key = request.headers.get(<span class="st">"X-API-Key"</span>, <span class="st">""</span>)

    <span class="kw">if not</span> is_valid_api_key(api_key):
        <span class="kw">return</span> <span class="kw">False</span>, <span class="st">""</span>

    customer = get_customer_from_key(api_key)
    <span class="kw">return</span> <span class="kw">True</span>, customer

<span class="cm"># mainé–¢æ•°å†…ã§ä½¿ç”¨</span>
<span class="fn">@functions_framework.http</span>
<span class="kw">def</span> <span class="fn">main</span>(request):
    <span class="cm"># ... CORSå‡¦ç† ...</span>

    <span class="cm"># â”â”â” 2. èªè¨¼ãƒã‚§ãƒƒã‚¯ï¼ˆAPIã‚­ãƒ¼ï¼‰â”â”â”</span>
    is_valid, customer = check_api_key_auth(request)
    <span class="kw">if not</span> is_valid:
        <span class="kw">return</span> (jsonify({<span class="st">"error"</span>: <span class="st">"Invalid API Key"</span>}), <span class="cl">401</span>, headers)</pre>
                            </div>
                        </div>
                    </div>

                    <h4 style="margin: 1.5rem 0 0.5rem; color: #22c55e;">ãŠå®¢ã•ã‚“ã¸ã®æ¡ˆå†…ï¼ˆå‘¼ã³å‡ºã—æ–¹ï¼‰</h4>
                    <div class="code-block">
                        <div class="code-header">ãŠå®¢ã•ã‚“ã«æ¸¡ã™ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ï¼ˆPythonï¼‰</div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span></div>
                            <div class="code-content">
<pre><span class="kw">import</span> requests

<span class="cm"># å¾¡ç¤¾ã‹ã‚‰ç™ºè¡Œã•ã‚ŒãŸAPIã‚­ãƒ¼</span>
API_KEY = <span class="st">"sk-customer1-abc123"</span>
ENDPOINT = <span class="st">"https://your-function-url.run.app/api/chat"</span>

response = requests.post(
    ENDPOINT,
    headers={
        <span class="st">"X-API-Key"</span>: API_KEY,
        <span class="st">"Content-Type"</span>: <span class="st">"application/json"</span>
    },
    json={<span class="st">"message"</span>: <span class="st">"ã“ã‚“ã«ã¡ã¯"</span>}
)
<span class="bi">print</span>(response.json())</pre>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(249, 115, 22, 0.1); border-left: 4px solid #f97316; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <p style="margin: 0 0 0.5rem; color: #fb923c; font-weight: 600;">âš ï¸ APIã‚­ãƒ¼ç®¡ç†ã®æ³¨æ„ç‚¹</p>
                        <ul style="margin: 0 0 0 1rem; color: #666666; font-size: 0.9rem;">
                            <li>æœ¬ç•ªã§ã¯<strong>Secret Manager</strong>ã§ã‚­ãƒ¼ã‚’ç®¡ç†ï¼ˆç’°å¢ƒå¤‰æ•°ã«ç›´æ¥æ›¸ã‹ãªã„ï¼‰</li>
                            <li>ãŠå®¢ã•ã‚“ã”ã¨ã«<strong>åˆ¥ã®ã‚­ãƒ¼</strong>ã‚’ç™ºè¡Œï¼ˆèª°ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹è¿½è·¡å¯èƒ½ã«ï¼‰</li>
                            <li>å®šæœŸçš„ã«<strong>ã‚­ãƒ¼ã‚’ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³</strong>ã™ã‚‹ä»•çµ„ã¿ã‚’æ¤œè¨</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
            <!-- æ–¹å¼B: Firebase Auth -->
            <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon blue">ğŸ”¥</div>
                    <h3 class="card-title">æ–¹å¼B: Firebase Authï¼ˆè‡ªç¤¾ãƒ•ãƒ­ãƒ³ãƒˆçµŒç”±ï¼‰</h3>
                </div>
                <div class="card-body">
                    <p>Googleãƒ­ã‚°ã‚¤ãƒ³ãªã©ã‚’ä½¿ã„ã€<strong>ç½²åä»˜ãJWT</strong>ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å®‰å…¨ã«èªè¨¼ã—ã¾ã™ã€‚</p>

                    <!-- ä»•çµ„ã¿å›³ -->
                    <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 12px; margin: 1.5rem 0;">
                        <p style="color: #3b82f6; font-weight: 700; margin-bottom: 1rem;">ğŸ“Š ä»•çµ„ã¿ï¼ˆç½²åæ¤œè¨¼ã‚ã‚Šï¼‰</p>
                        <div style="font-family: monospace; font-size: 0.85rem; color: #666666; line-height: 1.6;">
                            <p style="margin: 0;">[ãƒ¦ãƒ¼ã‚¶ãƒ¼] â†’ Googleã§ãƒ­ã‚°ã‚¤ãƒ³</p>
                            <p style="margin: 0; padding-left: 1rem;">â†“</p>
                            <p style="margin: 0;">[Firebase Auth] â†’ JWTç™ºè¡Œï¼ˆ<span style="color: #f97316;">ç§˜å¯†éµã§ç½²å</span>ï¼‰</p>
                            <p style="margin: 0; padding-left: 1rem;">â†“ {"email": "user@example.com", <span style="color: #f97316;">ç½²å</span>}</p>
                            <p style="margin: 0;">[ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰] â†’ JWTã‚’ãƒ˜ãƒƒãƒ€ãƒ¼ã«ä»˜ã‘ã¦APIå‘¼ã³å‡ºã—</p>
                            <p style="margin: 0; padding-left: 1rem;">â†“</p>
                            <p style="margin: 0;">[Cloud Run] â†’ firebase-adminã§<span style="color: #22c55e;">ç½²åã‚’æ¤œè¨¼</span></p>
                            <p style="margin: 0; padding-left: 1rem;">â†“ æœ¬ç‰©ã®JWTã‹ç¢ºèªï¼ˆå½é€ ä¸å¯èƒ½ï¼‰</p>
                            <p style="margin: 0;">[å‡¦ç†å®Ÿè¡Œ]</p>
                        </div>
                    </div>

                    <div style="background: rgba(34, 197, 94, 0.1); border-left: 4px solid #22c55e; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <p style="margin: 0; color: #22c55e; font-weight: 700;">ğŸ’¡ ãªãœç½²åãŒé‡è¦ï¼Ÿ</p>
                        <p style="margin: 0.5rem 0 0 0; color: #d1d5db;">
                            ç½²å = <strong>Firebaseã ã‘ãŒæŒã¤ç§˜å¯†éµ</strong>ã§ä½œæˆ<br>
                            â†’ æ‚ªæ„ã‚ã‚‹äººãŒã€Œä¿ºã¯adminã ã€ã¨å½JWTã‚’ä½œã£ã¦ã‚‚ã€ç½²åãŒé•ã†ã®ã§æ‹’å¦ã§ãã‚‹
                        </p>
                    </div>

                    <h4 style="margin: 1.5rem 0 0.5rem; color: #3b82f6;">Step 1: requirements.txt ã«è¿½åŠ </h4>
                    <div class="code-block">
                        <div class="code-header">requirements.txt</div>
                        <div class="code-body">
                            <div class="code-content">
<pre>firebase-admin>=6.0.0</pre>
                            </div>
                        </div>
                    </div>

                    <h4 style="margin: 1.5rem 0 0.5rem; color: #3b82f6;">Step 2: auth.py ã‚’ä½œæˆ</h4>
                    <div class="code-block">
                        <div class="code-header">auth.py - Firebaseèªè¨¼ãƒ˜ãƒ«ãƒ‘ãƒ¼</div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span><span>22</span><span>23</span><span>24</span><span>25</span><span>26</span><span>27</span><span>28</span><span>29</span><span>30</span><span>31</span><span>32</span><span>33</span><span>34</span><span>35</span><span>36</span><span>37</span><span>38</span><span>39</span><span>40</span><span>41</span><span>42</span><span>43</span><span>44</span><span>45</span><span>46</span><span>47</span></div>
                            <div class="code-content">
<pre><span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># auth.py - Firebaseèªè¨¼ãƒ˜ãƒ«ãƒ‘ãƒ¼</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>
<span class="cm"># â˜…â˜…â˜… ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§JWTã®ç½²åæ¤œè¨¼ã‚’è¡Œã† â˜…â˜…â˜…</span>
<span class="cm"># â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

<span class="kw">import</span> firebase_admin
<span class="kw">from</span> firebase_admin <span class="kw">import</span> auth, credentials
<span class="kw">from</span> config <span class="kw">import</span> is_allowed_user

<span class="cm"># Firebase Admin SDK åˆæœŸåŒ–ï¼ˆ1å›ã ã‘ï¼‰</span>
<span class="cm"># Cloud Run ã§ã¯ Application Default Credentials ãŒè‡ªå‹•ã§ä½¿ã‚ã‚Œã‚‹</span>
<span class="kw">if not</span> firebase_admin._apps:
    firebase_admin.initialize_app()

<span class="kw">def</span> <span class="fn">verify_firebase_token</span>(request) -> <span class="bi">tuple</span>[<span class="cl">bool</span>, <span class="cl">str</span>, <span class="cl">str</span>]:
    <span class="st">"""
    Firebaseã®JWTã‚’æ¤œè¨¼ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—

    Returns:
        (æˆåŠŸã—ãŸã‹, ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹, ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸)
    """</span>
    auth_header = request.headers.get(<span class="st">"Authorization"</span>, <span class="st">""</span>)

    <span class="kw">if not</span> auth_header.startswith(<span class="st">"Bearer "</span>):
        <span class="kw">return</span> <span class="kw">False</span>, <span class="st">""</span>, <span class="st">"Authorizationãƒ˜ãƒƒãƒ€ãƒ¼ãŒã‚ã‚Šã¾ã›ã‚“"</span>

    token = auth_header.split(<span class="st">" "</span>)[<span class="cl">1</span>]

    <span class="kw">try</span>:
        <span class="cm"># â˜…â˜…â˜… ã“ã“ã§ç½²åæ¤œè¨¼ãŒè¡Œã‚ã‚Œã‚‹ â˜…â˜…â˜…</span>
        <span class="cm"># å½ã®JWTã¯ auth.verify_id_token ã§å¼¾ã‹ã‚Œã‚‹</span>
        decoded_token = auth.verify_id_token(token)

        email = decoded_token.get(<span class="st">"email"</span>, <span class="st">""</span>)

        <span class="cm"># ãƒ‰ãƒ¡ã‚¤ãƒ³/ãƒ¡ãƒ¼ãƒ«åˆ¶é™ãƒã‚§ãƒƒã‚¯</span>
        <span class="kw">if not</span> is_allowed_user(email):
            <span class="kw">return</span> <span class="kw">False</span>, email, <span class="st">"ã‚¢ã‚¯ã‚»ã‚¹æ¨©ãŒã‚ã‚Šã¾ã›ã‚“"</span>

        <span class="kw">return</span> <span class="kw">True</span>, email, <span class="st">""</span>

    <span class="kw">except</span> auth.InvalidIdTokenError:
        <span class="kw">return</span> <span class="kw">False</span>, <span class="st">""</span>, <span class="st">"ç„¡åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§ã™"</span>
    <span class="kw">except</span> auth.ExpiredIdTokenError:
        <span class="kw">return</span> <span class="kw">False</span>, <span class="st">""</span>, <span class="st">"ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æœŸé™ãŒåˆ‡ã‚Œã¦ã„ã¾ã™"</span></pre>
                            </div>
                        </div>
                    </div>

                    <h4 style="margin: 1.5rem 0 0.5rem; color: #3b82f6;">Step 3: main.py ã§ä½¿ç”¨</h4>
                    <div class="code-block">
                        <div class="code-header">main.py - Firebaseèªè¨¼ã‚’ä½¿ç”¨</div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span></div>
                            <div class="code-content">
<pre><span class="kw">from</span> auth <span class="kw">import</span> verify_firebase_token

<span class="fn">@functions_framework.http</span>
<span class="kw">def</span> <span class="fn">main</span>(request):
    headers = get_cors_headers()

    <span class="kw">if</span> request.method == <span class="st">"OPTIONS"</span>:
        <span class="kw">return</span> (<span class="st">""</span>, <span class="cl">204</span>, headers)

    <span class="cm"># â”â”â” 2. Firebaseèªè¨¼ãƒã‚§ãƒƒã‚¯ â”â”â”</span>
    is_valid, email, error_msg = verify_firebase_token(request)
    <span class="kw">if not</span> is_valid:
        <span class="kw">return</span> (jsonify({<span class="st">"error"</span>: error_msg}), <span class="cl">401</span>, headers)

    <span class="cm"># ä»¥é™ã€emailã‚’ä½¿ã£ã¦ãƒ­ã‚°ãªã©ã«æ´»ç”¨å¯èƒ½</span></pre>
                            </div>
                        </div>
                    </div>

                    <h4 style="margin: 1.5rem 0 0.5rem; color: #3b82f6;">Step 4: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ï¼ˆå‚è€ƒï¼‰</h4>
                    <div class="code-block">
                        <div class="code-header">JavaScript - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã®å‘¼ã³å‡ºã—</div>
                        <div class="code-body">
                            <div class="line-nums"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span></div>
                            <div class="code-content">
<pre><span class="cm">// Firebase Auth ã§ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã®å ´åˆ</span>
<span class="kw">import</span> { getAuth } <span class="kw">from</span> <span class="st">"firebase/auth"</span>;

<span class="kw">async function</span> <span class="fn">callChatAPI</span>(message) {
    <span class="kw">const</span> auth = getAuth();
    <span class="kw">const</span> user = auth.currentUser;

    <span class="cm">// â˜…â˜…â˜… Firebase ã‹ã‚‰ç½²åä»˜ãJWTã‚’å–å¾— â˜…â˜…â˜…</span>
    <span class="kw">const</span> token = <span class="kw">await</span> user.getIdToken();

    <span class="kw">const</span> response = <span class="kw">await</span> fetch(<span class="st">"https://your-function.run.app/api/chat"</span>, {
        method: <span class="st">"POST"</span>,
        headers: {
            <span class="st">"Authorization"</span>: <span class="st">`Bearer ${token}`</span>,  <span class="cm">// JWTã‚’ä»˜ã‘ã‚‹</span>
            <span class="st">"Content-Type"</span>: <span class="st">"application/json"</span>
        },
        body: JSON.stringify({ message })
    });
}</pre>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <p style="margin: 0 0 0.5rem; color: #60a5fa; font-weight: 600;">âœ… Firebase Auth ã®ãƒ¡ãƒªãƒƒãƒˆ</p>
                        <ul style="margin: 0 0 0 1rem; color: #666666; font-size: 0.9rem;">
                            <li><strong>ç½²åæ¤œè¨¼</strong>: å½é€ ã•ã‚ŒãŸJWTã‚’ç¢ºå®Ÿã«å¼¾ã‘ã‚‹</li>
                            <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</strong>: Firebase Console ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã‚’ç¢ºèªå¯èƒ½</li>
                            <li><strong>å¤šæ§˜ãªãƒ­ã‚°ã‚¤ãƒ³</strong>: Google, Microsoft, ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç­‰ã«å¯¾å¿œ</li>
                            <li><strong>config.pyã¨é€£æº</strong>: ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ¶é™ã‚‚ä½µç”¨å¯èƒ½</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- è¨­è¨ˆç›¸è«‡ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="section" id="design">
            <div class="section-header">
                <div class="section-number">8</div>
                <h2 class="section-title">è¨­è¨ˆç›¸è«‡ã‚¬ã‚¤ãƒ‰</h2>
                <p class="section-subtitle">AIã¨ä¸€ç·’ã«LangGraphã‚¢ãƒ—ãƒªã‚’è¨­è¨ˆã™ã‚‹</p>
            </div>

            <!-- ã‚¤ãƒ³ãƒˆãƒ­ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon purple">ğŸ¤</div>
                    <h3 class="card-title">ãªãœè¨­è¨ˆç›¸è«‡ãŒå¿…è¦ï¼Ÿ</h3>
                </div>
                <p>LangGraphã®<strong>æ§‹æ–‡</strong>ã‚’å­¦ã‚“ã§ã‚‚ã€å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ï¼š</p>
                <ul style="margin: 1rem 0 1rem 1.5rem; color: var(--text-secondary);">
                    <li>ã€Œã©ã“ã‹ã‚‰æ‰‹ã‚’ã¤ã‘ã‚Œã°ã„ã„ï¼Ÿã€</li>
                    <li>ã€ŒNodeã®åˆ†ã‘æ–¹ãŒã‚ã‹ã‚‰ãªã„ã€</li>
                    <li>ã€ŒStateã«ä½•ã‚’å…¥ã‚Œã‚‹ã¹ãï¼Ÿã€</li>
                </ul>
                <p>ã¨ã„ã†å£ã«ã¶ã¤ã‹ã‚Šã¾ã™ã€‚<br>
                <strong>ã„ããªã‚Šã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã®ã§ã¯ãªãã€ã¾ãšè¨­è¨ˆã‚’æ•´ç†ã™ã‚‹</strong>ã“ã¨ãŒæˆåŠŸã®éµã§ã™ã€‚</p>

                <div style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.2)); border-radius: 12px; padding: 1.5rem; margin-top: 1.5rem;">
                    <p style="margin: 0; text-align: center; font-size: 1.1rem;">
                        ğŸ’¡ ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯<strong>Claude</strong>ã¨å¯¾è©±ã—ãªãŒã‚‰<br>
                        ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã§è¨­è¨ˆã‚’é€²ã‚ã‚‹ãŸã‚ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æä¾›ã—ã¾ã™
                    </p>
                </div>
            </div>

            <!-- è¨­è¨ˆã®æµã‚Œ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">ğŸ—ºï¸</div>
                    <h3 class="card-title">è¨­è¨ˆã®5ã‚¹ãƒ†ãƒƒãƒ—</h3>
                </div>

                <div style="display: grid; gap: 1rem; margin-top: 1rem;">
                    <div style="display: flex; align-items: flex-start; gap: 1rem; background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--accent-green);">
                        <div style="background: var(--accent-green); color: #ffffff; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0;">1</div>
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">ã‚´ãƒ¼ãƒ«ã‚’æ˜ç¢ºã«ã™ã‚‹</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">ã€Œä½•ã‚’å…¥åŠ›ã—ã¦ã€ä½•ã‚’å‡ºåŠ›ã—ãŸã„ã‹ã€ã‚’è¨€èªåŒ–</div>
                        </div>
                    </div>

                    <div style="display: flex; align-items: flex-start; gap: 1rem; background: rgba(16, 185, 129, 0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--accent-emerald);">
                        <div style="background: var(--accent-emerald); color: #ffffff; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0;">2</div>
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">å‡¦ç†ã‚’æ—¥æœ¬èªã§æ›¸ãå‡ºã™</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">ã‚³ãƒ¼ãƒ‰ã§ã¯ãªãã€Œã‚„ã‚‹ã“ã¨ã€ã‚’ç®‡æ¡æ›¸ãã«</div>
                        </div>
                    </div>

                    <div style="display: flex; align-items: flex-start; gap: 1rem; background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--accent-blue);">
                        <div style="background: var(--accent-blue); color: #ffffff; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0;">3</div>
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">Nodeã«åˆ†è§£ã™ã‚‹</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">ã€Œ1ã¤ã®å‡¦ç† = 1ã¤ã®Nodeã€ã‚’æ„è­˜ã—ã¦åˆ†å‰²</div>
                        </div>
                    </div>

                    <div style="display: flex; align-items: flex-start; gap: 1rem; background: rgba(139, 92, 246, 0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--accent-purple);">
                        <div style="background: var(--accent-purple); color: #ffffff; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0;">4</div>
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">Stateã‚’è¨­è¨ˆã™ã‚‹</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Nodeé–“ã§å—ã‘æ¸¡ã™ãƒ‡ãƒ¼ã‚¿ã‚’æ´—ã„å‡ºã™</div>
                        </div>
                    </div>

                    <div style="display: flex; align-items: flex-start; gap: 1rem; background: rgba(249, 115, 22, 0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--accent-orange);">
                        <div style="background: var(--accent-orange); color: #ffffff; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0;">5</div>
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">Edgeã¨åˆ†å²ã‚’æ±ºã‚ã‚‹</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">ãƒ•ãƒ­ãƒ¼ã®é †åºã¨æ¡ä»¶åˆ†å²ã‚’æ•´ç†</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon orange">ğŸ“‹</div>
                    <h3 class="card-title">Claudeã¸ã®ç›¸è«‡ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</h3>
                </div>
                <p>ä»¥ä¸‹ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€Claudeã«é€ã£ã¦ãã ã•ã„ã€‚<br>
                å¯¾è©±ã—ãªãŒã‚‰è¨­è¨ˆã‚’é€²ã‚ã‚‰ã‚Œã¾ã™ã€‚</p>

                <div class="code-block" style="margin-top: 1.5rem;">
                    <div class="code-header" style="display: flex; justify-content: space-between; align-items: center;">
                        <span>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆã‚³ãƒ”ãƒ¼ã—ã¦ä½¿ã†ï¼‰</span>
                        <button onclick="copyPrompt()" style="background: var(--accent-green); color: #ffffff; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.8rem;">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="code-body" style="background: #0d1117;">
                        <div class="code-content">
<pre id="design-prompt" style="white-space: pre-wrap; color: var(--text-secondary); padding: 1rem;">
# LangGraphè¨­è¨ˆç›¸è«‡

## ä½œã‚ŠãŸã„ã‚‚ã®
ï¼ˆä¾‹ï¼šä¼šè­°ã®è­°äº‹éŒ²ã‚’è‡ªå‹•ã§è¦ç´„ãƒ»æ•´ç†ã™ã‚‹ãƒ„ãƒ¼ãƒ«ï¼‰


## å…¥åŠ›
- å½¢å¼ï¼šï¼ˆä¾‹ï¼šãƒ†ã‚­ã‚¹ãƒˆã€éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã€APIçµŒç”±ãªã©ï¼‰
- å†…å®¹ï¼šï¼ˆä¾‹ï¼šä¼šè­°ã®æ–‡å­—èµ·ã“ã—ãƒ†ã‚­ã‚¹ãƒˆï¼‰

## å‡ºåŠ›
- å½¢å¼ï¼šï¼ˆä¾‹ï¼šJSONã€Markdownã€ç”»é¢è¡¨ç¤ºãªã©ï¼‰
- å†…å®¹ï¼šï¼ˆä¾‹ï¼šè¦ç´„ã€è­°é¡Œãƒªã‚¹ãƒˆã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ï¼‰

## å‡¦ç†ã®æµã‚Œï¼ˆã–ã£ãã‚Šï¼‰
1. ï¼ˆä¾‹ï¼šãƒ†ã‚­ã‚¹ãƒˆã‚’å—ã‘å–ã‚‹ï¼‰
2. ï¼ˆä¾‹ï¼šè¦ç´„ã™ã‚‹ï¼‰
3. ï¼ˆä¾‹ï¼šè­°é¡Œã‚’æŠ½å‡ºã™ã‚‹ï¼‰
4. ï¼ˆä¾‹ï¼šçµæœã‚’æ•´å½¢ã™ã‚‹ï¼‰

## æ¡ä»¶åˆ†å²ãŒã‚ã‚Œã°
- ï¼ˆä¾‹ï¼šãƒ†ã‚­ã‚¹ãƒˆãŒé•·ã„å ´åˆã¯è©³ç´°åˆ†æã€çŸ­ã„å ´åˆã¯ç°¡æ˜“å‡¦ç†ï¼‰

## ä¸æ˜ç‚¹ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨
- ï¼ˆä¾‹ï¼šNodeã®åˆ†ã‘æ–¹ãŒé©åˆ‡ã‹ã‚ã‹ã‚‰ãªã„ï¼‰
- ï¼ˆä¾‹ï¼šã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ã©ã“ã§ã‚„ã‚‹ã¹ãï¼Ÿï¼‰

---
ä¸Šè¨˜ã‚’ã‚‚ã¨ã«ã€LangGraphã®è¨­è¨ˆã‚’ä¸€ç·’ã«è€ƒãˆã¦ãã ã•ã„ã€‚
Stateã€Nodeã€Edgeã®æ§‹æˆã‚’ææ¡ˆã—ã¦ã‚‚ã‚‰ãˆã‚‹ã¨åŠ©ã‹ã‚Šã¾ã™ã€‚
</pre>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(34, 197, 94, 0.1); border-left: 3px solid var(--accent-green); padding: 1rem; margin-top: 1rem; border-radius: 4px;">
                    <p style="margin: 0; color: var(--accent-green); font-weight: 600;">ğŸ’¡ ä½¿ã„æ–¹ã®ã‚³ãƒ„</p>
                    <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary); font-size: 0.9rem;">
                        <li><strong>å…¨éƒ¨åŸ‹ã‚ãªãã¦OK</strong>: ã‚ã‹ã‚‰ãªã„éƒ¨åˆ†ã¯ç©ºæ¬„ã®ã¾ã¾é€ã£ã¦ç›¸è«‡</li>
                        <li><strong>å…·ä½“ä¾‹ã‚’æ›¸ã</strong>: æŠ½è±¡çš„ã‚ˆã‚Šå…·ä½“çš„ãªæ–¹ãŒè‰¯ã„ã‚¢ãƒ‰ãƒã‚¤ã‚¹ãŒå¾—ã‚‰ã‚Œã‚‹</li>
                        <li><strong>è¿½åŠ è³ªå•OK</strong>: å¯¾è©±ã—ãªãŒã‚‰è©°ã‚ã¦ã„ã</li>
                    </ul>
                </div>
            </div>

            <!-- å¯¾è©±ä¾‹ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon blue">ğŸ’¬</div>
                    <h3 class="card-title">å¯¾è©±ã®ä¾‹</h3>
                </div>
                <p>å®Ÿéš›ã«ã©ã‚“ãªå¯¾è©±ã«ãªã‚‹ã‹ã®ä¾‹ã§ã™ã€‚</p>

                <div style="margin-top: 1.5rem; display: flex; flex-direction: column; gap: 1rem;">
                    <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™ºè¨€ -->
                    <div style="display: flex; gap: 1rem; align-items: flex-start;">
                        <div style="background: var(--accent-blue); width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">ğŸ‘¤</div>
                        <div style="background: rgba(59, 130, 246, 0.15); padding: 1rem; border-radius: 12px; border-top-left-radius: 4px; flex: 1;">
                            <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem;">
                                ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆã®ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã‚’ä½œã‚ŠãŸã„ã€‚<br>
                                ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã‚’åˆ†é¡ã—ã¦ã€FAQã§ç­”ãˆã‚‰ã‚Œã‚‹ã‚‚ã®ã¯FAQã‹ã‚‰è¿”ç­”ã€<br>
                                ãã‚Œä»¥å¤–ã¯äººé–“ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã«è»¢é€ã—ãŸã„ã€‚
                            </p>
                        </div>
                    </div>

                    <!-- AIç™ºè¨€ -->
                    <div style="display: flex; gap: 1rem; align-items: flex-start;">
                        <div style="background: var(--accent-purple); width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">ğŸ¤–</div>
                        <div style="background: rgba(139, 92, 246, 0.15); padding: 1rem; border-radius: 12px; border-top-left-radius: 4px; flex: 1;">
                            <p style="margin: 0 0 0.5rem; color: var(--text-secondary); font-size: 0.9rem;">
                                è‰¯ã„ã§ã™ã­ï¼ã„ãã¤ã‹ç¢ºèªã•ã›ã¦ãã ã•ã„ï¼š
                            </p>
                            <ol style="margin: 0 0 0 1.25rem; color: var(--text-secondary); font-size: 0.9rem;">
                                <li>è³ªå•ã®åˆ†é¡ã¯ä½•ç¨®é¡ãã‚‰ã„æƒ³å®šã—ã¦ã„ã¾ã™ã‹ï¼Ÿ</li>
                                <li>FAQãƒ‡ãƒ¼ã‚¿ã¯ã©ã“ã«ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿï¼ˆDBã€ãƒ•ã‚¡ã‚¤ãƒ«ã€APIï¼Ÿï¼‰</li>
                                <li>ã€Œäººé–“ã«è»¢é€ã€ã¯å…·ä½“çš„ã«ã©ã†ã—ã¾ã™ã‹ï¼Ÿï¼ˆSlacké€šçŸ¥ã€ãƒ¡ãƒ¼ãƒ«ï¼Ÿï¼‰</li>
                            </ol>
                        </div>
                    </div>

                    <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™ºè¨€ -->
                    <div style="display: flex; gap: 1rem; align-items: flex-start;">
                        <div style="background: var(--accent-blue); width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">ğŸ‘¤</div>
                        <div style="background: rgba(59, 130, 246, 0.15); padding: 1rem; border-radius: 12px; border-top-left-radius: 4px; flex: 1;">
                            <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem;">
                                åˆ†é¡ã¯ã€ŒFAQå¯¾å¿œå¯èƒ½ã€ã€Œè¦ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã€ã€Œä¸æ˜ã€ã®3ã¤ã€‚<br>
                                FAQã¯JSONãƒ•ã‚¡ã‚¤ãƒ«ã€‚è»¢é€ã¯ã¨ã‚Šã‚ãˆãšãƒ­ã‚°å‡ºåŠ›ã§OKã€‚
                            </p>
                        </div>
                    </div>

                    <!-- AIç™ºè¨€ -->
                    <div style="display: flex; gap: 1rem; align-items: flex-start;">
                        <div style="background: var(--accent-purple); width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">ğŸ¤–</div>
                        <div style="background: rgba(139, 92, 246, 0.15); padding: 1rem; border-radius: 12px; border-top-left-radius: 4px; flex: 1;">
                            <p style="margin: 0 0 0.5rem; color: var(--text-secondary); font-size: 0.9rem;">
                                ã§ã¯ä»¥ä¸‹ã®æ§‹æˆã‚’ææ¡ˆã—ã¾ã™ï¼š
                            </p>
                            <p style="margin: 0.5rem 0; color: var(--text-primary); font-weight: 600; font-size: 0.85rem;">ã€Nodeæ§‹æˆã€‘</p>
                            <ul style="margin: 0 0 0.5rem 1rem; color: var(--text-secondary); font-size: 0.85rem;">
                                <li><code>classify_node</code> - è³ªå•ã‚’3åˆ†é¡</li>
                                <li><code>faq_search_node</code> - FAQã‹ã‚‰å›ç­”æ¤œç´¢</li>
                                <li><code>generate_response_node</code> - å›ç­”ç”Ÿæˆ</li>
                                <li><code>escalate_node</code> - ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼è»¢é€ï¼ˆãƒ­ã‚°ï¼‰</li>
                            </ul>
                            <p style="margin: 0.5rem 0; color: var(--text-primary); font-weight: 600; font-size: 0.85rem;">ã€Stateã€‘</p>
                            <ul style="margin: 0 0 0 1rem; color: var(--text-secondary); font-size: 0.85rem;">
                                <li><code>question: str</code></li>
                                <li><code>category: str</code></li>
                                <li><code>faq_answer: str | None</code></li>
                                <li><code>response: str</code></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(139, 92, 246, 0.1); border-left: 3px solid var(--accent-purple); padding: 1rem; margin-top: 1.5rem; border-radius: 4px;">
                    <p style="margin: 0; color: var(--accent-purple); font-weight: 600;">ğŸ¯ ãƒã‚¤ãƒ³ãƒˆ</p>
                    <p style="margin: 0.5rem 0 0; color: var(--text-secondary); font-size: 0.9rem;">
                        ã“ã®ã‚ˆã†ã«<strong>å¯¾è©±ã‚’é‡ã­ã‚‹ã“ã¨ã§</strong>ã€æ›–æ˜§ã ã£ãŸè¦ä»¶ãŒå…·ä½“åŒ–ã—ã€<br>
                        é©åˆ‡ãªNode/State/Edgeã®è¨­è¨ˆã«è½ã¨ã—è¾¼ã‚ã¾ã™ã€‚
                    </p>
                </div>
            </div>

            <!-- è¨­è¨ˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon emerald">âœ…</div>
                    <h3 class="card-title">è¨­è¨ˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h3>
                </div>
                <p>ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå§‹ã‚ã‚‹å‰ã«ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p>

                <div style="margin-top: 1.5rem; display: grid; gap: 0.75rem;">
                    <label style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" style="width: 20px; height: 20px; accent-color: var(--accent-emerald);">
                        <span style="color: var(--text-secondary);">å…¥åŠ›ã¨å‡ºåŠ›ãŒæ˜ç¢ºã«ãªã£ã¦ã„ã‚‹</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" style="width: 20px; height: 20px; accent-color: var(--accent-emerald);">
                        <span style="color: var(--text-secondary);">å„Nodeã®è²¬å‹™ãŒ1ã¤ã«çµã‚‰ã‚Œã¦ã„ã‚‹</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" style="width: 20px; height: 20px; accent-color: var(--accent-emerald);">
                        <span style="color: var(--text-secondary);">Stateã«ã™ã¹ã¦ã®ä¸­é–“ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ã‚‹</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" style="width: 20px; height: 20px; accent-color: var(--accent-emerald);">
                        <span style="color: var(--text-secondary);">æ¡ä»¶åˆ†å²ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæ´—ã„å‡ºã›ã¦ã„ã‚‹</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" style="width: 20px; height: 20px; accent-color: var(--accent-emerald);">
                        <span style="color: var(--text-secondary);">ã‚¨ãƒ©ãƒ¼æ™‚ã®æŒ™å‹•ã‚’è€ƒæ…®ã—ã¦ã„ã‚‹</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" style="width: 20px; height: 20px; accent-color: var(--accent-emerald);">
                        <span style="color: var(--text-secondary);">å‡¦ç†ãƒ•ãƒ­ãƒ¼ã‚’å›³ã§æã‘ã‚‹ï¼ˆé ­ã®ä¸­ã§ã‚‚OKï¼‰</span>
                    </label>
                </div>
            </div>

            <!-- å›°ã£ãŸã¨ãã®ãƒ’ãƒ³ãƒˆ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon pink">ğŸ’¡</div>
                    <h3 class="card-title">å›°ã£ãŸã¨ãã®ãƒ’ãƒ³ãƒˆ</h3>
                </div>

                <div style="display: grid; gap: 1rem; margin-top: 1rem;">
                    <div style="background: #f0f2f5; padding: 1rem; border-radius: 8px; border-left: 3px solid var(--accent-cyan);">
                        <p style="margin: 0 0 0.5rem; color: var(--accent-cyan); font-weight: 600;">ã€ŒNodeã®åˆ†ã‘æ–¹ãŒã‚ã‹ã‚‰ãªã„ã€</p>
                        <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem;">
                            â†’ <strong>å‹•è©ã§è€ƒãˆã‚‹</strong>ã€‚ã€Œè¦ç´„ã™ã‚‹ã€ã€Œåˆ†é¡ã™ã‚‹ã€ã€Œæ¤œç´¢ã™ã‚‹ã€ãªã©ã€<br>
                            ã€€ 1ã¤ã®å‹•è© = 1ã¤ã®NodeãŒåŸºæœ¬ã€‚
                        </p>
                    </div>

                    <div style="background: #f0f2f5; padding: 1rem; border-radius: 8px; border-left: 3px solid var(--accent-cyan);">
                        <p style="margin: 0 0 0.5rem; color: var(--accent-cyan); font-weight: 600;">ã€ŒStateã«ä½•ã‚’å…¥ã‚Œã‚‹ã¹ãï¼Ÿã€</p>
                        <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem;">
                            â†’ <strong>å¾Œã®NodeãŒå¿…è¦ã¨ã™ã‚‹ã‚‚ã®</strong>ã‚’ã™ã¹ã¦å…¥ã‚Œã‚‹ã€‚<br>
                            ã€€ ã€Œã“ã®Nodeã®çµæœã‚’ã€æ¬¡ã®Nodeã§ä½¿ã†ã‹ï¼Ÿã€ã§åˆ¤æ–­ã€‚
                        </p>
                    </div>

                    <div style="background: #f0f2f5; padding: 1rem; border-radius: 8px; border-left: 3px solid var(--accent-cyan);">
                        <p style="margin: 0 0 0.5rem; color: var(--accent-cyan); font-weight: 600;">ã€Œæ¡ä»¶åˆ†å²ãŒè¤‡é›‘ã«ãªã‚Šãã†ã€</p>
                        <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem;">
                            â†’ ã¾ãš<strong>ã‚·ãƒ³ãƒ—ãƒ«ãªç›´ç·šãƒ•ãƒ­ãƒ¼</strong>ã§å‹•ãã‚‚ã®ã‚’ä½œã‚‹ã€‚<br>
                            ã€€ ãã®å¾Œã€åˆ†å²ã‚’1ã¤ãšã¤è¿½åŠ ã—ã¦ã„ãã€‚
                        </p>
                    </div>

                    <div style="background: #f0f2f5; padding: 1rem; border-radius: 8px; border-left: 3px solid var(--accent-cyan);">
                        <p style="margin: 0 0 0.5rem; color: var(--accent-cyan); font-weight: 600;">ã€ŒLLMã‚’ä½¿ã†ç®‡æ‰€ãŒå¤šã™ãã‚‹ã€</p>
                        <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem;">
                            â†’ æœ¬å½“ã«LLMãŒå¿…è¦ã‹ç¢ºèªã€‚å˜ç´”ãªãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã§<br>
                            ã€€ ã§ãã‚‹å‡¦ç†ã¯é€šå¸¸ã®é–¢æ•°ã§å®Ÿè£…ï¼ˆã‚³ã‚¹ãƒˆå‰Šæ¸›ï¼‰ã€‚
                        </p>
                    </div>
                </div>
            </div>

            <!-- ç”ŸæˆAIã‚³ãƒ¼ãƒ‰ã®æ³¨æ„ç‚¹ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon orange">âš ï¸</div>
                    <h3 class="card-title">ç”ŸæˆAIã®ã‚³ãƒ¼ãƒ‰ã€ã“ã“ã«æ°—ã‚’ã¤ã‘ã¦ï¼</h3>
                </div>
                <p>Claudeå«ã‚€ç”ŸæˆAIãŒæ›¸ãã‚³ãƒ¼ãƒ‰ã«ã¯<strong>ã‚ˆãã‚ã‚‹å•é¡Œãƒ‘ã‚¿ãƒ¼ãƒ³</strong>ãŒã‚ã‚Šã¾ã™ã€‚<br>
                ã“ã‚Œã‚’çŸ¥ã£ã¦ãŠãã¨ã€ŒãŠã‹ã—ã„ãªï¼Ÿã€ã¨æ°—ã¥ã„ã¦ç›¸è«‡ã§ãã¾ã™ã€‚</p>

                <div style="margin-top: 1.5rem; display: grid; gap: 1.5rem;">

                    <!-- å•é¡Œ1: å¤ã„API -->
                    <div style="background: #f0f2f5; border-radius: 12px; overflow: hidden; border: 2px solid var(--accent-orange);">
                        <div style="background: rgba(249, 115, 22, 0.2); padding: 0.75rem 1rem; border-bottom: 1px solid var(--border-color);">
                            <span style="color: var(--accent-orange); font-weight: 700;">ğŸ”´ å¤ã„APIãƒ»éæ¨å¥¨ã®æ›¸ãæ–¹</span>
                        </div>
                        <div style="padding: 1rem;">
                            <p style="margin: 0 0 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                                LangChainã¯é€²åŒ–ãŒé€Ÿãã€åŠå¹´å‰ã®æ›¸ãæ–¹ãŒæ—¢ã«å¤ã„ã“ã¨ã‚‚ã€‚
                            </p>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
                                <div style="background: rgba(239, 68, 68, 0.1); padding: 0.75rem; border-radius: 6px; border-left: 3px solid #ef4444;">
                                    <div style="color: #ef4444; font-size: 0.75rem; font-weight: 600; margin-bottom: 0.25rem;">âŒ å¤ã„</div>
                                    <code style="font-size: 0.8rem; color: var(--text-secondary);">llm.predict(text)</code><br>
                                    <code style="font-size: 0.8rem; color: var(--text-secondary);">LLMChain(llm, prompt)</code>
                                </div>
                                <div style="background: rgba(34, 197, 94, 0.1); padding: 0.75rem; border-radius: 6px; border-left: 3px solid #22c55e;">
                                    <div style="color: #22c55e; font-size: 0.75rem; font-weight: 600; margin-bottom: 0.25rem;">âœ… æœ€æ–°</div>
                                    <code style="font-size: 0.8rem; color: var(--text-secondary);">llm.invoke(text)</code><br>
                                    <code style="font-size: 0.8rem; color: var(--text-secondary);">prompt | llm</code>
                                </div>
                            </div>
                            <p style="margin: 0.75rem 0 0; color: var(--accent-cyan); font-size: 0.85rem;">
                                ğŸ‘‰ <strong>è¦‹ã‹ã‘ãŸã‚‰èã“ã†</strong>ï¼šã€Œã“ã®æ›¸ãæ–¹ã€æœ€æ–°ï¼Ÿã€
                            </p>
                        </div>
                    </div>

                    <!-- å•é¡Œ2: éå‰°ãªtry-except -->
                    <div style="background: #f0f2f5; border-radius: 12px; overflow: hidden; border: 2px solid var(--accent-orange);">
                        <div style="background: rgba(249, 115, 22, 0.2); padding: 0.75rem 1rem; border-bottom: 1px solid var(--border-color);">
                            <span style="color: var(--accent-orange); font-weight: 700;">ğŸ”´ éå‰°ãªtry-except</span>
                        </div>
                        <div style="padding: 1rem;">
                            <p style="margin: 0 0 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                                AIã¯ã€Œå¿µã®ãŸã‚ã€ã§ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’å…¥ã‚ŒãŒã¡ã€‚æœ¬å½“ã«å¿…è¦ã‹ç¢ºèªã‚’ã€‚
                            </p>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
                                <div style="background: rgba(239, 68, 68, 0.1); padding: 0.75rem; border-radius: 6px; border-left: 3px solid #ef4444;">
                                    <div style="color: #ef4444; font-size: 0.75rem; font-weight: 600; margin-bottom: 0.25rem;">âŒ éå‰°</div>
<pre style="font-size: 0.75rem; color: var(--text-secondary); margin: 0;">try:
    result = llm.invoke(x)
except Exception as e:
    logger.error(e)
    return None</pre>
                                </div>
                                <div style="background: rgba(34, 197, 94, 0.1); padding: 0.75rem; border-radius: 6px; border-left: 3px solid #22c55e;">
                                    <div style="color: #22c55e; font-size: 0.75rem; font-weight: 600; margin-bottom: 0.25rem;">âœ… ã‚·ãƒ³ãƒ—ãƒ«</div>
<pre style="font-size: 0.75rem; color: var(--text-secondary); margin: 0;">result = llm.invoke(x)
<span style="color: #6b7280;"># ã‚¨ãƒ©ãƒ¼ã¯å‘¼ã³å‡ºã—å…ƒã§</span>
<span style="color: #6b7280;"># ã¾ã¨ã‚ã¦ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></pre>
                                </div>
                            </div>
                            <p style="margin: 0.75rem 0 0; color: var(--accent-cyan); font-size: 0.85rem;">
                                ğŸ‘‰ <strong>è¦‹ã‹ã‘ãŸã‚‰èã“ã†</strong>ï¼šã€Œã“ã®try-exceptã€å¿…è¦ï¼Ÿã€
                            </p>
                        </div>
                    </div>

                    <!-- å•é¡Œ3: ä¸è¦ãªã‚¯ãƒ©ã‚¹åŒ– -->
                    <div style="background: #f0f2f5; border-radius: 12px; overflow: hidden; border: 2px solid var(--accent-orange);">
                        <div style="background: rgba(249, 115, 22, 0.2); padding: 0.75rem 1rem; border-bottom: 1px solid var(--border-color);">
                            <span style="color: var(--accent-orange); font-weight: 700;">ğŸ”´ ä¸è¦ãªã‚¯ãƒ©ã‚¹åŒ–ãƒ»æŠ½è±¡åŒ–</span>
                        </div>
                        <div style="padding: 1rem;">
                            <p style="margin: 0 0 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                                ã€Œå°†æ¥ã®æ‹¡å¼µæ€§ã®ãŸã‚ã€ã§è¤‡é›‘ã«ã—ãŒã¡ã€‚YAGNIåŸå‰‡ã‚’å¿˜ã‚Œãšã«ã€‚
                            </p>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
                                <div style="background: rgba(239, 68, 68, 0.1); padding: 0.75rem; border-radius: 6px; border-left: 3px solid #ef4444;">
                                    <div style="color: #ef4444; font-size: 0.75rem; font-weight: 600; margin-bottom: 0.25rem;">âŒ éå‰°</div>
<pre style="font-size: 0.75rem; color: var(--text-secondary); margin: 0;">class SummarizerService:
    def __init__(self, llm):
        self.llm = llm
    def summarize(self, text):
        return self.llm.invoke(text)</pre>
                                </div>
                                <div style="background: rgba(34, 197, 94, 0.1); padding: 0.75rem; border-radius: 6px; border-left: 3px solid #22c55e;">
                                    <div style="color: #22c55e; font-size: 0.75rem; font-weight: 600; margin-bottom: 0.25rem;">âœ… ã‚·ãƒ³ãƒ—ãƒ«</div>
<pre style="font-size: 0.75rem; color: var(--text-secondary); margin: 0;">def summarize(text):
    return llm.invoke(text)

<span style="color: #6b7280;"># é–¢æ•°ã§ååˆ†ï¼</span></pre>
                                </div>
                            </div>
                            <p style="margin: 0.75rem 0 0; color: var(--accent-cyan); font-size: 0.85rem;">
                                ğŸ‘‰ <strong>è¦‹ã‹ã‘ãŸã‚‰èã“ã†</strong>ï¼šã€Œã‚¯ãƒ©ã‚¹ã«ã™ã‚‹æ„å‘³ã‚ã‚‹ï¼Ÿé–¢æ•°ã§è‰¯ããªã„ï¼Ÿã€
                            </p>
                        </div>
                    </div>

                    <!-- å•é¡Œ4: å†—é•·ãªã‚³ãƒ¡ãƒ³ãƒˆ -->
                    <div style="background: #f0f2f5; border-radius: 12px; overflow: hidden; border: 2px solid var(--accent-orange);">
                        <div style="background: rgba(249, 115, 22, 0.2); padding: 0.75rem 1rem; border-bottom: 1px solid var(--border-color);">
                            <span style="color: var(--accent-orange); font-weight: 700;">ğŸ”´ å†—é•·ãªã‚³ãƒ¡ãƒ³ãƒˆãƒ»docstring</span>
                        </div>
                        <div style="padding: 1rem;">
                            <p style="margin: 0 0 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                                ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚Œã°åˆ†ã‹ã‚‹ã“ã¨ã‚’é•·ã€…ã¨èª¬æ˜ã—ãŒã¡ã€‚
                            </p>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
                                <div style="background: rgba(239, 68, 68, 0.1); padding: 0.75rem; border-radius: 6px; border-left: 3px solid #ef4444;">
                                    <div style="color: #ef4444; font-size: 0.75rem; font-weight: 600; margin-bottom: 0.25rem;">âŒ å†—é•·</div>
<pre style="font-size: 0.75rem; color: var(--text-secondary); margin: 0;"><span style="color: #6b7280;"># ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’1å¢—ã‚„ã™</span>
counter += 1
<span style="color: #6b7280;"># çµæœã‚’ãƒªã‚¹ãƒˆã«è¿½åŠ </span>
results.append(x)</pre>
                                </div>
                                <div style="background: rgba(34, 197, 94, 0.1); padding: 0.75rem; border-radius: 6px; border-left: 3px solid #22c55e;">
                                    <div style="color: #22c55e; font-size: 0.75rem; font-weight: 600; margin-bottom: 0.25rem;">âœ… å¿…è¦ãªã¨ãã ã‘</div>
<pre style="font-size: 0.75rem; color: var(--text-secondary); margin: 0;">counter += 1
results.append(x)
<span style="color: #6b7280;"># 15ä»¶ã«åˆ¶é™ï¼ˆãƒ¡ãƒ¢ãƒªå¯¾ç­–ï¼‰</span>
results = results[-15:]</pre>
                                </div>
                            </div>
                            <p style="margin: 0.75rem 0 0; color: var(--accent-cyan); font-size: 0.85rem;">
                                ğŸ‘‰ <strong>è¦‹ã‹ã‘ãŸã‚‰èã“ã†</strong>ï¼šã€Œã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã€æœ¬å½“ã«å¿…è¦ï¼Ÿã€
                            </p>
                        </div>
                    </div>

                    <!-- å•é¡Œ5: LangGraphç‰¹æœ‰ -->
                    <div style="background: #f0f2f5; border-radius: 12px; overflow: hidden; border: 2px solid var(--accent-purple);">
                        <div style="background: rgba(139, 92, 246, 0.2); padding: 0.75rem 1rem; border-bottom: 1px solid var(--border-color);">
                            <span style="color: var(--accent-purple); font-weight: 700;">ğŸŸ£ LangGraphç‰¹æœ‰ã®æ³¨æ„ç‚¹</span>
                        </div>
                        <div style="padding: 1rem;">
                            <ul style="margin: 0; padding-left: 1.25rem; color: var(--text-secondary); font-size: 0.9rem;">
                                <li style="margin-bottom: 0.5rem;">
                                    <strong>Stateã®ç›´æ¥å¤‰æ›´</strong>: <code>state["key"] = value</code> ã¯NGã€‚å¿…ãš <code>return {"key": value}</code> ã§è¿”ã™
                                </li>
                                <li style="margin-bottom: 0.5rem;">
                                    <strong>ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®ä½¿ç”¨</strong>: Nodeå†…ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã‚’ä½¿ã†ã¨äºˆæœŸã›ã¬æŒ™å‹•ã«
                                </li>
                                <li style="margin-bottom: 0.5rem;">
                                    <strong>reducerå¿˜ã‚Œ</strong>: ãƒªã‚¹ãƒˆã«è¿½åŠ ã—ãŸã„ã®ã«æ¯å›ä¸Šæ›¸ãã•ã‚Œã‚‹ â†’ <code>Annotated[List, add]</code> ãŒå¿…è¦
                                </li>
                                <li>
                                    <strong>ENDå¿˜ã‚Œ</strong>: çµ‚äº†æ¡ä»¶ã§ <code>END</code> ã‚’è¿”ã•ãªã„ã¨ç„¡é™ãƒ«ãƒ¼ãƒ—ã«
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Claudeã¸ã®è³ªå•ä¾‹ -->
                <div style="background: linear-gradient(135deg, rgba(6, 182, 212, 0.15), rgba(59, 130, 246, 0.15)); border-radius: 12px; padding: 1.5rem; margin-top: 1.5rem; border: 1px solid var(--accent-cyan);">
                    <p style="margin: 0 0 1rem; color: var(--accent-cyan); font-weight: 700; font-size: 1.1rem;">ğŸ’¬ ã“ã‚“ãªé¢¨ã«Claudeã«èã„ã¦ã¿ã‚ˆã†</p>
                    <div style="display: grid; gap: 0.5rem;">
                        <div style="background: rgba(255,255,255,0.05); padding: 0.75rem; border-radius: 6px; font-size: 0.9rem; color: var(--text-secondary);">
                            ã€Œã“ã®ã‚³ãƒ¼ãƒ‰ã€ã‚‚ã£ã¨ã‚·ãƒ³ãƒ—ãƒ«ã«æ›¸ã‘ã‚‹ï¼Ÿã€
                        </div>
                        <div style="background: rgba(255,255,255,0.05); padding: 0.75rem; border-radius: 6px; font-size: 0.9rem; color: var(--text-secondary);">
                            ã€ŒLangChain/LangGraphã®æœ€æ–°ã®æ›¸ãæ–¹ã«ç›´ã—ã¦ã€
                        </div>
                        <div style="background: rgba(255,255,255,0.05); padding: 0.75rem; border-radius: 6px; font-size: 0.9rem; color: var(--text-secondary);">
                            ã€Œã“ã®å‡¦ç†ã€LangGraphã§ã‚„ã‚‹æ„å‘³ã‚ã‚‹ï¼Ÿæ™®é€šã®é–¢æ•°ã§è‰¯ã„ï¼Ÿã€
                        </div>
                        <div style="background: rgba(255,255,255,0.05); padding: 0.75rem; border-radius: 6px; font-size: 0.9rem; color: var(--text-secondary);">
                            ã€Œã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ã€æ”¹å–„ç‚¹ã‚’æ•™ãˆã¦ã€
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç· ã‚ -->
            <div class="highlight-box success">
                <div class="highlight-title">ğŸ“ è¨­è¨ˆç›¸è«‡ã®ã¾ã¨ã‚</div>
                <p style="margin-bottom: 0.5rem;"><strong>ã„ããªã‚Šã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‹ãªã„</strong>ã€‚ã“ã‚ŒãŒLangGraphé–‹ç™ºæˆåŠŸã®ç§˜è¨£ã§ã™ã€‚</p>
                <ul style="margin: 0.5rem 0 0 1rem; color: var(--text-secondary);">
                    <li>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã£ã¦Claudeã«ç›¸è«‡</li>
                    <li>å¯¾è©±ã—ãªãŒã‚‰è¦ä»¶ã‚’å…·ä½“åŒ–</li>
                    <li>ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã§ç¢ºèªã—ã¦ã‹ã‚‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°</li>
                    <li>å›°ã£ãŸã‚‰ã„ã¤ã§ã‚‚è¿½åŠ ã§ç›¸è«‡OK</li>
                </ul>
                <p style="margin: 1rem 0 0; color: var(--accent-green); font-weight: 600;">
                    ã•ã‚ã€ä¸Šã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚ãªãŸã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç›¸è«‡ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼
                </p>
            </div>
        </section>
    </main>

    <script>
        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ–
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                document.getElementById(tab.dataset.section).classList.add('active');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        });
        document.addEventListener('keydown', (e) => {
            const tabs = document.querySelectorAll('.nav-tab');
            const i = Array.from(tabs).findIndex(t => t.classList.contains('active'));
            if (e.key === 'ArrowRight' && i < tabs.length - 1) tabs[i + 1].click();
            if (e.key === 'ArrowLeft' && i > 0) tabs[i - 1].click();
        });

        // ãƒ•ãƒ­ãƒ¼å›³ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
        let currentFlowStep = 0;
        const maxFlowStep = 3;
        let autoPlayInterval = null;

        // ãƒãƒ¼ãƒ‰ã®è‰²è¨­å®š
        const nodeColors = {
            0: '#10b981', // START - green
            1: '#22c55e', // process - bright green
            2: '#8b5cf6', // output - purple
            3: '#ec4899'  // END - pink
        };

        function updateFlowDiagram() {
            // ãƒãƒ¼ãƒ‰ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            document.querySelectorAll('#flowSvg .flow-step').forEach(g => {
                const step = parseInt(g.dataset.step);
                const circle = g.querySelector('.node-circle');
                const color = nodeColors[step];

                if (step === currentFlowStep) {
                    // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒãƒ¼ãƒ‰ï¼šå…‰ã‚‰ã›ã‚‹
                    circle.classList.add('node-active');
                    circle.style.filter = `drop-shadow(0 0 15px ${color}) drop-shadow(0 0 30px ${color})`;
                    circle.style.fillOpacity = '0.8';
                    circle.style.strokeWidth = '4';
                } else if (step < currentFlowStep) {
                    // å®Œäº†ã—ãŸãƒãƒ¼ãƒ‰
                    circle.classList.remove('node-active');
                    circle.style.filter = 'none';
                    circle.style.fillOpacity = '0.6';
                    circle.style.strokeWidth = '3';
                } else {
                    // æœªå‡¦ç†ãƒãƒ¼ãƒ‰
                    circle.classList.remove('node-active');
                    circle.style.filter = 'none';
                    circle.style.fillOpacity = '0.2';
                    circle.style.strokeWidth = '2';
                }
            });

            // èª¬æ˜ãƒœãƒƒã‚¯ã‚¹ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('#flowSvg .state-box').forEach(g => {
                const step = parseInt(g.dataset.step);
                g.style.opacity = step === currentFlowStep ? '1' : '0';
                g.style.transition = 'opacity 0.5s ease';
            });

            // ã‚¹ãƒ†ãƒƒãƒ—è¡¨ç¤º
            const indicator = document.getElementById('flowStepIndicator');
            if (indicator) {
                indicator.textContent = `Step ${currentFlowStep} / ${maxFlowStep}`;
            }
        }

        document.getElementById('flowPrevBtn')?.addEventListener('click', () => {
            if (currentFlowStep > 0) {
                currentFlowStep--;
                updateFlowDiagram();
            }
        });

        document.getElementById('flowNextBtn')?.addEventListener('click', () => {
            if (currentFlowStep < maxFlowStep) {
                currentFlowStep++;
                updateFlowDiagram();
            }
        });

        document.getElementById('flowAutoBtn')?.addEventListener('click', function() {
            if (autoPlayInterval) {
                clearInterval(autoPlayInterval);
                autoPlayInterval = null;
                this.textContent = 'â–¶ è‡ªå‹•å†ç”Ÿ';
                this.style.background = 'linear-gradient(135deg, #06b6d4, #0891b2)';
            } else {
                currentFlowStep = 0;
                updateFlowDiagram();
                this.textContent = 'â¸ åœæ­¢';
                this.style.background = 'linear-gradient(135deg, #f97316, #ea580c)';
                autoPlayInterval = setInterval(() => {
                    if (currentFlowStep < maxFlowStep) {
                        currentFlowStep++;
                        updateFlowDiagram();
                    } else {
                        clearInterval(autoPlayInterval);
                        autoPlayInterval = null;
                        document.getElementById('flowAutoBtn').textContent = 'â–¶ è‡ªå‹•å†ç”Ÿ';
                        document.getElementById('flowAutoBtn').style.background = 'linear-gradient(135deg, #06b6d4, #0891b2)';
                    }
                }, 2000);
            }
        });

        // åˆæœŸè¡¨ç¤º
        updateFlowDiagram();

        // ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é€²è¡Œã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
        const tutorialSteps = {
            1: { icon: 'ğŸ“', name: 'ç’°å¢ƒæº–å‚™', desc: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«' },
            2: { icon: 'ğŸ“¦', name: 'Stateå®šç¾©', desc: 'å…±æœ‰ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’è¨­è¨ˆã™ã‚‹' },
            3: { icon: 'âš™ï¸', name: 'Nodeå®šç¾©', desc: 'å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã™ã‚‹' },
            4: { icon: 'ğŸ”€', name: 'æ¡ä»¶åˆ†å²', desc: 'ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½œã‚‹' },
            5: { icon: 'ğŸ”—', name: 'ã‚°ãƒ©ãƒ•çµ„ç«‹', desc: 'ã™ã¹ã¦ã‚’æ¥ç¶šã—ã¦ã‚°ãƒ©ãƒ•å®Œæˆ' },
            6: { icon: 'â–¶ï¸', name: 'å®Ÿè¡Œãƒ†ã‚¹ãƒˆ', desc: 'å‹•ä½œç¢ºèªã—ã¦å®Œæˆï¼' }
        };

        // ã‚µã‚¤ãƒ‰ãƒãƒ¼SVGã®æ›´æ–°é–¢æ•°
        function updateSidebarSVG(currentStep) {
            // Step 3ä»¥å¤–ã«ç§»å‹•ã—ãŸå ´åˆã€ã‚µãƒ–ã‚¹ãƒ†ãƒƒãƒ—ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’ãƒªã‚»ãƒƒãƒˆ
            if (currentStep !== 3) {
                document.querySelectorAll('.substep-node').forEach(node => {
                    node.classList.remove('substep-active', 'substep-completed');
                });
            }

            document.querySelectorAll('.sidebar-step').forEach(stepEl => {
                const stepNum = parseInt(stepEl.dataset.step);
                stepEl.classList.remove('active', 'completed');

                // Step 3ã¯å€‹åˆ¥ãƒãƒ¼ãƒ‰ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆï¼ˆã‚µãƒ–ã‚¹ãƒ†ãƒƒãƒ—ï¼‰ã§åˆ¶å¾¡ã™ã‚‹ãŸã‚ã€
                // ã“ã“ã§ã¯å…¨ä½“çš„ãªçŠ¶æ…‹ã®ã¿è¨­å®š
                const isStep3 = stepNum === 3;

                // å„è¦ç´ ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆStep 3ã®rectã¨textã¯CSSã‚¯ãƒ©ã‚¹ã§åˆ¶å¾¡ï¼‰
                const rects = isStep3 ? [] : stepEl.querySelectorAll('rect');
                const texts = isStep3 ? stepEl.querySelectorAll('.step3-title') : stepEl.querySelectorAll('text');
                const lines = stepEl.querySelectorAll('line');
                const polygons = stepEl.querySelectorAll('polygon');

                if (stepNum === currentStep) {
                    // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–: ç·‘è‰²ã«å…‰ã‚‰ã›ã‚‹
                    stepEl.classList.add('active');

                    // Step 3ã®å ´åˆã€ã‚¿ã‚¤ãƒˆãƒ«ã¨ãƒ©ã‚¤ãƒ³ã®ã¿JSã§åˆ¶å¾¡
                    if (isStep3) {
                        texts.forEach(text => {
                            text.style.fill = '#22c55e';
                            text.style.fontWeight = 'bold';
                        });
                        lines.forEach(line => {
                            line.style.stroke = '#22c55e';
                            line.style.filter = 'drop-shadow(0 0 4px #22c55e)';
                        });
                    } else {
                        rects.forEach(rect => {
                            rect.style.fill = 'rgba(34, 197, 94, 0.3)';
                            rect.style.stroke = '#22c55e';
                            rect.style.strokeWidth = '3';
                            rect.style.filter = 'drop-shadow(0 0 8px #22c55e) drop-shadow(0 0 16px #22c55e)';
                        });
                        texts.forEach(text => {
                            text.style.fill = '#22c55e';
                            text.style.fontWeight = 'bold';
                        });
                        lines.forEach(line => {
                            line.style.stroke = '#22c55e';
                            line.style.filter = 'drop-shadow(0 0 4px #22c55e)';
                        });
                        polygons.forEach(polygon => {
                            polygon.style.fill = 'rgba(34, 197, 94, 0.3)';
                            polygon.style.stroke = '#22c55e';
                            polygon.style.strokeWidth = '3';
                            polygon.style.filter = 'drop-shadow(0 0 8px #22c55e) drop-shadow(0 0 16px #22c55e)';
                        });
                    }
                } else if (stepNum < currentStep) {
                    // å®Œäº†: è–„ã„ç·‘
                    stepEl.classList.add('completed');

                    if (isStep3) {
                        // Step 3ãŒå®Œäº†çŠ¶æ…‹: å…¨ãƒãƒ¼ãƒ‰ã‚’å®Œäº†ã‚¹ã‚¿ã‚¤ãƒ«ã«
                        document.querySelectorAll('.substep-node').forEach(node => {
                            node.classList.remove('substep-active');
                            node.classList.add('substep-completed');
                        });
                        texts.forEach(text => {
                            text.style.fill = '#10b981';
                            text.style.fontWeight = 'normal';
                        });
                        lines.forEach(line => {
                            line.style.stroke = '#10b981';
                            line.style.filter = 'none';
                        });
                    } else {
                        rects.forEach(rect => {
                            rect.style.fill = 'rgba(16, 185, 129, 0.2)';
                            rect.style.stroke = '#10b981';
                            rect.style.strokeWidth = '2';
                            rect.style.filter = 'none';
                        });
                        texts.forEach(text => {
                            text.style.fill = '#10b981';
                            text.style.fontWeight = 'normal';
                        });
                        lines.forEach(line => {
                            line.style.stroke = '#10b981';
                            line.style.filter = 'none';
                        });
                        polygons.forEach(polygon => {
                            polygon.style.fill = 'rgba(16, 185, 129, 0.2)';
                            polygon.style.stroke = '#10b981';
                            polygon.style.strokeWidth = '2';
                            polygon.style.filter = 'none';
                        });
                    }
                } else {
                    // æœªå‡¦ç†: å…ƒã®è‰²ã«æˆ»ã™
                    if (isStep3) {
                        texts.forEach(text => {
                            text.style.fill = '';
                            text.style.fontWeight = '';
                        });
                        lines.forEach(line => {
                            line.style.stroke = '';
                            line.style.filter = '';
                        });
                    } else {
                        rects.forEach(rect => {
                            rect.style.fill = '';
                            rect.style.stroke = '';
                            rect.style.strokeWidth = '';
                            rect.style.filter = '';
                        });
                        texts.forEach(text => {
                            text.style.fill = '';
                            text.style.fontWeight = '';
                        });
                        lines.forEach(line => {
                            line.style.stroke = '';
                            line.style.filter = '';
                        });
                        polygons.forEach(polygon => {
                            polygon.style.fill = '';
                            polygon.style.stroke = '';
                            polygon.style.strokeWidth = '';
                            polygon.style.filter = '';
                        });
                    }
                }
            });

            // ãƒ©ãƒ™ãƒ«æ›´æ–°
            const label = document.getElementById('sidebarStepLabel');
            if (label && tutorialSteps[currentStep]) {
                label.textContent = `Step ${currentStep}: ${tutorialSteps[currentStep].name}`;
            }
        }

        // åˆæœŸåŒ–: ã‚µã‚¤ãƒ‰ãƒãƒ¼SVGã®Step 1ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
        updateSidebarSVG(1);

        document.querySelectorAll('.tut-step-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const step = parseInt(this.dataset.step);

                // ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«æ›´æ–°
                document.querySelectorAll('.tut-step-btn').forEach(b => {
                    b.style.border = '2px solid var(--border-color)';
                    b.style.background = 'transparent';
                    b.style.color = 'var(--text-secondary)';
                });
                this.style.border = '2px solid var(--accent-green)';
                this.style.background = 'rgba(34, 197, 94, 0.2)';
                this.style.color = 'var(--accent-green)';

                // æƒ…å ±æ›´æ–°
                document.getElementById('tutorialProgress').textContent = `Step ${step} / 6`;
                document.getElementById('tutorialIcon').textContent = tutorialSteps[step].icon;
                document.getElementById('tutorialStepName').textContent = tutorialSteps[step].name;
                document.getElementById('tutorialStepDesc').textContent = tutorialSteps[step].desc;

                // è©²å½“ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                const targetId = `tut-step${step}`;
                const target = document.getElementById(targetId);
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    target.style.animation = 'none';
                    setTimeout(() => {
                        target.style.animation = 'fadeIn 0.5s ease';
                    }, 10);
                }

                // ã‚µã‚¤ãƒ‰ãƒãƒ¼SVGã‚‚æ›´æ–°
                updateSidebarSVG(step);
            });
        });

        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§è‡ªå‹•æ›´æ–°
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const stepMatch = entry.target.id.match(/tut-step(\d)/);
                    if (stepMatch) {
                        const step = parseInt(stepMatch[1]);
                        document.querySelectorAll('.tut-step-btn').forEach(b => {
                            const btnStep = parseInt(b.dataset.step);
                            if (btnStep === step) {
                                b.style.border = '2px solid var(--accent-green)';
                                b.style.background = 'rgba(34, 197, 94, 0.2)';
                                b.style.color = 'var(--accent-green)';
                            } else {
                                b.style.border = '2px solid var(--border-color)';
                                b.style.background = 'transparent';
                                b.style.color = 'var(--text-secondary)';
                            }
                        });
                        document.getElementById('tutorialProgress').textContent = `Step ${step} / 6`;
                        document.getElementById('tutorialIcon').textContent = tutorialSteps[step].icon;
                        document.getElementById('tutorialStepName').textContent = tutorialSteps[step].name;
                        document.getElementById('tutorialStepDesc').textContent = tutorialSteps[step].desc;

                        // ã‚µã‚¤ãƒ‰ãƒãƒ¼SVGã‚‚æ›´æ–°
                        updateSidebarSVG(step);
                    }
                }
            });
        }, { threshold: 0.3 });

        document.querySelectorAll('[id^="tut-step"]').forEach(el => observer.observe(el));

        // Step 3 ã‚µãƒ–ã‚¹ãƒ†ãƒƒãƒ—ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆç”¨Observer
        let currentSubstep = null;
        const substepOrder = ['3-1', '3-2', '3-3', '3-4'];

        function updateSubstepHighlight(activeSubstep) {
            if (currentSubstep === activeSubstep) return;
            currentSubstep = activeSubstep;

            // å…¨ã‚µãƒ–ã‚¹ãƒ†ãƒƒãƒ—ãƒãƒ¼ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆ
            document.querySelectorAll('.substep-node').forEach(node => {
                node.classList.remove('substep-active', 'substep-completed');
            });

            if (!activeSubstep) return;

            const activeIndex = substepOrder.indexOf(activeSubstep);

            document.querySelectorAll('.substep-node').forEach(node => {
                const nodeSubstep = node.dataset.substep;
                const nodeIndex = substepOrder.indexOf(nodeSubstep);

                if (nodeSubstep === activeSubstep) {
                    // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚µãƒ–ã‚¹ãƒ†ãƒƒãƒ—
                    node.classList.add('substep-active');
                } else if (nodeIndex < activeIndex) {
                    // å®Œäº†ã—ãŸã‚µãƒ–ã‚¹ãƒ†ãƒƒãƒ—
                    node.classList.add('substep-completed');
                }
            });
        }

        const substepObserver = new IntersectionObserver((entries) => {
            let mostVisibleSubstep = null;
            let maxRatio = 0;

            entries.forEach(entry => {
                if (entry.isIntersecting && entry.intersectionRatio > maxRatio) {
                    maxRatio = entry.intersectionRatio;
                    const match = entry.target.id.match(/substep-(\d-\d)/);
                    if (match) {
                        mostVisibleSubstep = match[1];
                    }
                }
            });

            if (mostVisibleSubstep) {
                updateSubstepHighlight(mostVisibleSubstep);
            }
        }, { threshold: [0, 0.25, 0.5, 0.75, 1], rootMargin: '-100px 0px -50% 0px' });

        // ã‚µãƒ–ã‚¹ãƒ†ãƒƒãƒ—è¦ç´ ã‚’ç›£è¦–
        document.querySelectorAll('[id^="substep-"]').forEach(el => substepObserver.observe(el));

        // Step 6 å®Ÿè¡Œæ–¹æ³•ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function switchExecTab(targetId) {
            // ã™ã¹ã¦ã®ãƒ‘ãƒãƒ«ã‚’éè¡¨ç¤º
            document.querySelectorAll('.exec-panel').forEach(panel => {
                panel.style.display = 'none';
            });
            // é¸æŠã•ã‚ŒãŸãƒ‘ãƒãƒ«ã‚’è¡¨ç¤º
            document.getElementById(targetId).style.display = 'block';

            // ã‚¿ãƒ–ã®ã‚¹ã‚¿ã‚¤ãƒ«æ›´æ–°
            document.querySelectorAll('.exec-tab').forEach(tab => {
                if (tab.dataset.target === targetId) {
                    tab.style.background = 'linear-gradient(135deg, #22c55e, #10b981)';
                    tab.style.border = 'none';
                    tab.style.color = '#ffffff';
                } else {
                    tab.style.background = 'var(--bg-card)';
                    tab.style.border = '2px solid var(--border-color)';
                    tab.style.color = 'var(--text-secondary)';
                }
            });
        }

        // ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒˆã‚°ãƒ«
        function toggleMobileMenu() {
            const navTabs = document.getElementById('navTabs');
            const menuBtn = document.querySelector('.mobile-menu-btn');
            navTabs.classList.toggle('mobile-open');
            menuBtn.textContent = navTabs.classList.contains('mobile-open') ? 'âœ•' : 'â˜°';
        }

        // ãƒŠãƒ“ã‚¿ãƒ–ã‚¯ãƒªãƒƒã‚¯æ™‚ã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹ï¼ˆãƒ¢ãƒã‚¤ãƒ«ï¼‰
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const navTabs = document.getElementById('navTabs');
                const menuBtn = document.querySelector('.mobile-menu-btn');
                if (navTabs.classList.contains('mobile-open')) {
                    navTabs.classList.remove('mobile-open');
                    menuBtn.textContent = 'â˜°';
                }
            });
        });

        // è¨­è¨ˆç›¸è«‡ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½
        function copyPrompt() {
            const promptText = document.getElementById('design-prompt').textContent;
            navigator.clipboard.writeText(promptText.trim()).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'âœ“ ã‚³ãƒ”ãƒ¼å®Œäº†ï¼';
                btn.style.background = '#10b981';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = 'var(--accent-green)';
                }, 2000);
            }).catch(err => {
                console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
                alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
            });
        }
    </script>
</body>
</html>
